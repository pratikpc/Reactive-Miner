{"version":3,"sources":["components/clustering/fcmeans/figue.js","components/utils/logo.png","components/svm/libsvm.js","components/context/csv-context.js","components/utils/SideDrawer.js","components/utils/Header.js","components/utils/Dashboard.js","components/linreg/utils.js","components/utils/CsvReader.js","components/utils/CsvTable.js","components/utils/Overview.js","components/utils/TitleBar.js","ML/utils.js","ML/linreg.js","components/linreg/LinearRegression.js","components/decisiontree/utils.js","components/decisiontree/DecisionTree.js","components/clustering/HC/hc-hook.js","components/clustering/HC/HierarchicalClustering.js","components/clustering/kmeans/Kmeans.js","components/svm/utils.js","components/svm/Svm.js","components/knn/visualization/defaults.js","components/knn/visualization/circle.js","components/knn/visualization/visualization.js","components/knn/algorithms/knn.js","components/knn/algorithms/machine-learning-algorithm.js","components/knn/visualization/knn-visualization.js","components/knn/KNN.js","components/pca/PCAnalysis.js","components/clustering/fcmeans/FCMeans.js","App.js","serviceWorker.js","index.js"],"names":["figue","euclidianDistance","vec1","vec2","N","length","d","i","Math","pow","sqrt","manhattanDistance","abs","maxDistance","max","addVectors","vec","Array","multiplyVectorByValue","value","v","repeatChar","c","n","str","calculateCentroid","c1Size","c1Centroid","c2Size","c2Centroid","newCentroid","newSize","centerString","width","diff","halfdiff","floor","putString","index","getRandomVectors","k","vectors","vector","select","selected_vectors","selected_indices","tested_indices","tested","selected","random_index","random","compare","Matrix","rows","cols","this","mtx","row","j","Node","label","left","right","dist","centroid","size","depth","SINGLE_LINKAGE","COMPLETE_LINKAGE","AVERAGE_LINKAGE","EUCLIDIAN_DISTANCE","MANHATTAN_DISTANCE","MAX_DISTANCE","PRINT_VECTOR_VALUE_PRECISION","KMEANS_MAX_ITERATIONS","FCMEANS_MAX_ITERATIONS","generateDendogram","tree","sep","balanced","withLabel","withCentroid","withDistance","lines","centroidstr","vals","precision","round","join","prettyVector","isLeaf","labelstr","String","len","push","distancestr","prettyValue","left_dendo","right_dendo","left_bar_ix","indexOf","right_bar_ix","bar_ix","hline","shortest","longest","header","toadd","splice","agglomerate","labels","distance","linkage","c1","c2","c1Cluster","c2Cluster","p","root","dMin","cSize","distMatrix","clusters","Infinity","newCluster","avg","kmeans","assignments","clusterSizes","repeat","nb_iters","centroids","t","mindist","Number","MAX_VALUE","best","newCentroids","cluster","fcmeans","epsilon","fuzziness","l","tmp","norm","membershipMatrix","previousMembershipMatrix","copy","prototype","toString","duplicate","slice","buildDendogram","testArr","module","exports","SVM","options","makeRbfKernel","sigma","v1","v2","s","q","exp","linearKernel","train","data","C","tol","alphatol","maxiter","numpasses","kernel","kernelType","rbfSigma","rbfsigma","D","alpha","arr","zeros","b","usew_","memoize","kernelResults","a","iter","passes","alphaChanged","Ei","marginOne","ai","aj","Ej","L","H","min","eta","kernelResult","newaj","newai","b1","b2","w","newdata","newlabels","newalpha","trainstats","iters","inst","f","predictOne","margins","predict","margs","getWeights","toJSON","console","log","json","fromJSON","csvContext","createContext","csv","fetchCsv","useStyles","makeStyles","theme","display","button","margin","spacing","drawer","breakpoints","up","flexShrink","toolbar","mixins","drawerPaper","paddingTop","SideDrawer","props","history","useHistory","classes","useTheme","pushLink","link","handleDrawerToggle","ListItem","Typography","style","fontSize","fontWeight","color","Divider","List","onClick","ListItemText","primary","ListSubheader","component","className","aria-label","Hidden","lgUp","Drawer","container","variant","anchor","direction","open","mobileOpen","onClose","paper","ModalProps","keepMounted","mdDown","appBar","zIndex","menuButton","marginRight","content","flexGrow","title","Header","useState","setMobileOpen","CssBaseline","AppBar","position","Toolbar","IconButton","edge","src","logo","height","alt","marginTop","children","Dashboard","ReadCSV","url","delimiter","tfcore","tfdata","hasHeader","SetDifference","filter","x","includes","Zip","map","e","VisorStop","node","nodeV","document","getElementById","remove","RemoveNode","GemerateChartForLinearRegression","name","tab","y","preds","chart","values","GenerateChartForCluster","xIdx","yIdx","DrawBarChart","surface","tfvis","barchart","DrawScatterPlot","series","series_names","scatterplot","CsvReader","useContext","onDrop","accepted","rejected","links","preview","Paper","padding","accept","multiple","CsvTable","columns","setColumns","setData","useEffect","columnNames","toArray","Fetch","filterType","responsive","textAlign","Overview","Grid","item","md","xs","TitleBar","background","marginBottom","tags","tag","key","NormalizeValRaw","tf","std","sub","div","NormalizeVar","val","pred","ScaleBackValRaw","mul","add","ScaleBackValWithTensor","ScaleBackVal","InputDimSize","tensor","shape","RootMeanSquareError","yTrue","yPred","meanSquaredError","FindArgMax","axis","valuesT","argMaxT","argMax","array","dispose","DisposeValue","DisposeValues","ConvertClusterIconsToData","clusterIds","ExtractSelectedLabels","selectedCols","results","kv","result","colName","ConvertCSVToRawArrays","labelCol","allCols","normalize","SplitIntoInputAndLabel","xT","yT","ConvertCSVToSingleArray","raw","rawV","ExtractInformation","x_raw","y_raw","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","CreateModel","outs","inputs","l1","l2","learningRate","regularizer","l1l2","model","dense","units","inputShape","kernelRegularizer","compile","loss","optimizer","sgd","metrics","Fit","xTrain","yTrain","OnEpochEndCallBack","_","epochs","batchSize","validationSplit","TensorDimSize","logs","fit","shuffle","callbacks","onEpochEnd","epoch","rms_loss","val_rms_loss","val_loss","Predict","args","PredictWithScaling","predT","scaledT","prediction","PredictDataset","preds_list","preds_raw","Promise","all","predsT","x_valsT","x_vals","y_valsT","y_vals","flexDirection","alignItems","formControl","selectEmpty","form","marginLeft","submit","lin_reg_cache","GetDataFromCSV","rowIdx","predCol","Utils","Object","keys","PredictValues","input","inputT","inputNormT","inputNorm","LinearRegressionApply","Perform","labelCols","inputCols","inputData","lossContainer","summary","modelSummary","LinearRegression","error","setError","setColumnNames","ycolumn","setYcolumn","predInput","setPredInput","setPrediction","performPred","setPerformedPred","LoadColumnNames","Link","href","process","Alert","severity","enableReinitialize","initialValues","xColumns","selectedColumn","validate","errors","onSubmit","setSubmitting","xCols","Set","submitFormHandler","touched","handleChange","handleBlur","handleSubmit","isSubmitting","setFieldValue","backgroundColor","column","FormControlLabel","control","Checkbox","checked","onChange","event","target","newArray","col","TextField","id","fullWidth","MenuItem","FormHelperText","type","onBlur","Button","disabled","split","predictedValue","dt","DecisionTree","builder","buildDecisionTree","trainingSet","minItemsCount","categoryAttr","entropyThrehold","maxTreeDepth","ignoredAttributes","category","mostFrequentValue","initialEntropy","entropy","alreadyChecked","bestSplit","gain","attr","pivot","predicateName","attrPredPivot","predicate","predicates","currSplit","matchEntropy","match","notMatchEntropy","notMatch","newEntropy","currGain","attribute","matchSubTree","notMatchSubTree","matchedCount","notMatchedCount","arrayToHashSet","RandomForest","treesNumber","trees","items","trainingSets","forest","buildRandomForest","hashSet","countUniqueValues","counter","mostFrequentCount","predictRandomForest","minWidth","descDiv","borderDiv","borderBottom","dTree","setDTree","config","setConfig","details","predictionForm","setPredictionForm","dT","current","innerHTML","lastItem","reqCols","forEach","useRef","ignoreColumn","changeDetails","treeToHtml","Fragment","FormControl","Select","displayEmpty","inputProps","decisionTree","err","noValidate","autoComplete","startIcon","decisionTreePrediction","ref","window","scrollTo","offsetTop","gutterBottom","HierarchicalClustering","setLabel","dendoGram","space","params","param","text","innerText","FormLabel","RadioGroup","parseInt","Radio","PerformKMeans","res","Kmeans","drawCircle","ctx","r","beginPath","arc","PI","closePath","stroke","fill","svmjs","require","NPGcanvas","labelColumn","setLabelColumn","trainModel","svm","getContext","WIDTH","canvas","HEIGHT","draw","wb","ss","dirty","kernelid","rbfKernelSigma","svmC","clearRect","dec","fillStyle","fillRect","density","strokeStyle","lineWidth","moveTo","lineTo","ys","u","xi","yi","defaultOptions","rootNode","circleRadius","circleFill","circleStroke","Circle","cx","cy","radius","cssClass","Visualization","types","assign","xScale","createXScale","yScale","createYScale","isValidTypes","typeColorMap","mapTypesToColors","isValidData","mapDataToCircle","svgId","Date","now","svg","appendSVG","clickable","isArray","reduce","entries","entry","isValidCoordinate","isValidType","msg","Error","colorScale","d3","colorMap","hasOwnProperty","fillColor","getFillColor","targetId","querySelector","addEventListener","clickCallback","isValidEventTarget","newCircle","invert","offsetX","offsetY","callback","call","inputId","inputType","inputChangeCallback","elementName","attributes","el","createElement","setAttribute","childElements","settingsGroup","child","append","labelText","labelAttributes","inputValue","inputAttributes","span","inputLabel","textContent","appendChild","circle","domain","range","selectAll","enter","drawCircles","KNN","circles","weighted","kClosestNeighbors","neighbors","setDistance","calculateDistance","sort","compareDistance","typeDistance","neighbor","inverseDistance","counts","getCircleTypeWeighted","getCircleTypeUnweighted","findKClosestNeighbors","determineCircleType","KNNVisualization","knn","onClickSvg","svgClickCallback","setClickable","classifiedCircle","getClassifiedCircle","addCircle","boundingCircle","getBoundingCircle","drawConnectingLines","mapClosestNeighborsToConnectingLines","removeElementsAfterTransition","circleType","classify","setType","setCssClass","x1","x2","y1","y2","strokeWidth","connectingLines","transition","duration","typeColor","selector","that","on","removeElements","displayWidth","innerWidth","displayHeight","dataSetSize","setParams","getRandomInt","vis","dataset","ellipsoidOptions","A","B","apply","rho","phi","rands","cos","sin","createRandomEllipsoidCoordinates","createRandomData","valuetext","paddingBottom","Slider","aria-labelledby","valueLabelDisplay","step","marks","getAriaValueText","newValue","PCA","PCAnalysis","threshold","setThreshold","pcaColumns","setPcaColumns","toggleColumn","trainPca","pca","arr1","getExplainedVariance","PerformFCMeans","assignedClusters","FCMeans","parseFloat","createMuiTheme","customTheme","App","setCsv","useCallback","routes","path","exact","Svm","to","ThemeProvider","Provider","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","ReactDOM","render","URL","origin","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.4d89ea30.chunk.js","sourcesContent":["let figue = function () {\r\n\r\n\r\n\tfunction euclidianDistance (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet d = 0 ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\td += Math.pow (vec1[i] - vec2[i], 2)\r\n\t\td = Math.sqrt (d) ;\r\n\t\treturn d ;\r\n\t}\r\n\r\n\tfunction manhattanDistance (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet d = 0 ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\td += Math.abs (vec1[i] - vec2[i])\r\n\t\treturn d ;\r\n\t}\r\n\r\n\tfunction maxDistance (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet d = 0 ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\td = Math.max (d , Math.abs (vec1[i] - vec2[i])) ;\r\n\t\treturn d ;\r\n\t}\r\n\r\n\tfunction addVectors (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet vec = new Array(N) ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\tvec[i] = vec1[i] + vec2[i] ;\r\n\t\treturn vec ;\r\n\t}\t\r\n\r\n\tfunction multiplyVectorByValue (value , vec) {\r\n\t\tlet N = vec.length ;\r\n\t\tlet v = new Array(N) ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\tv[i] = value * vec[i] ;\r\n\t\treturn v ;\r\n\t}\t\r\n\t\r\n\t// function vectorDotProduct (vec1, vec2) {\r\n\t// \tlet N = vec1.length ;\r\n\t// \tlet s = 0 ;\r\n\t// \tfor (let i = 0 ; i < N ; i++)\r\n\t// \t\ts += vec1[i] * vec2[i] ;\r\n\t// \treturn s ;\r\n\t// }\r\n\t\r\n\r\n\tfunction repeatChar(c, n) {\r\n\t\tlet str = \"\";\r\n\t\tfor (let i = 0 ; i < n ; i++)\r\n\t\t\tstr += c ;\r\n\t\treturn str ;\r\n\t}\r\n\t\r\n\tfunction calculateCentroid (c1Size , c1Centroid , c2Size , c2Centroid) {\r\n\t\tlet newCentroid = new Array(c1Centroid.length) ;\r\n\t\tlet newSize = c1Size + c2Size ;\r\n\t\tfor (let i = 0 ; i < c1Centroid.length ; i++) \r\n\t\t\tnewCentroid[i] = (c1Size * c1Centroid[i] + c2Size * c2Centroid[i]) / newSize ;\r\n\t\treturn newCentroid ;\t\r\n\t}\r\n\r\n\r\n\tfunction centerString(str, width) {\r\n\t\tlet diff = width - str.length ;\r\n\t\tif (diff < 0)\r\n\t\t\treturn ;\r\n\r\n\t\tlet halfdiff = Math.floor(diff / 2) ;\r\n\t\treturn repeatChar (\" \" , halfdiff) + str + repeatChar (\" \" , diff - halfdiff)  ;\r\n\t}\r\n\r\n\tfunction putString(str, width, index) {\r\n\t\tlet diff = width - str.length ;\r\n\t\tif (diff < 0)\r\n\t\t\treturn ;\r\n\r\n\t\treturn repeatChar (\" \" , index) + str + repeatChar (\" \" , width - (str.length+index)) ;\r\n\t}\r\n\r\n\tfunction prettyVector(vector) {\r\n\t\tlet vals = new Array(vector.length) ;\r\n\t\tlet precision = Math.pow(10, figue.PRINT_VECTOR_VALUE_PRECISION) ; \r\n\t\tfor (let i = 0 ; i < vector.length ; i++)\r\n\t\t\tvals[i] = Math.round(vector[i]*precision)/precision ;\r\n\t\treturn vals.join(\",\")\r\n\t}\r\n\r\n\tfunction prettyValue(value) {\r\n\t\tlet precision = Math.pow(10, figue.PRINT_VECTOR_VALUE_PRECISION) ; \r\n\t\treturn String (Math.round(value*precision)/precision) ;\r\n\t}\r\n\r\n\tfunction generateDendogram(tree, sep, balanced, withLabel, withCentroid, withDistance) {\r\n\t\tlet lines = [];\r\n\t\tlet centroidstr = prettyVector(tree.centroid) ;\r\n\t\tif (tree.isLeaf()) {\r\n\t\t\tlet labelstr = String(tree.label) ;\r\n\t\t\tlet len = 1;\r\n\t\t\tif (withCentroid) \r\n\t\t\t\tlen = Math.max(centroidstr.length , len) ;\r\n\t\t\tif (withLabel)\r\n\t\t\t\tlen = Math.max(labelstr.length , len) ;\r\n\r\n\t\t\tlines.push (centerString (\"|\" , len)) ;\r\n\t\t\tif (withCentroid) \r\n\t\t\t\tlines.push (centerString (centroidstr , len)) ;\r\n\t\t\tif (withLabel) \r\n\t\t\t\tlines.push (centerString (labelstr , len)) ;\r\n\r\n\t\t} else {\r\n\t\t\tlet distancestr = prettyValue(tree.dist) ;\r\n\t\t\tlet left_dendo = generateDendogram(tree.left ,sep, balanced,withLabel,withCentroid, withDistance) ;\r\n\t\t\tlet right_dendo = generateDendogram(tree.right, sep, balanced,withLabel,withCentroid,withDistance) ;\r\n\t\t\tlet left_bar_ix = left_dendo[0].indexOf(\"|\") ;\r\n\t\t\tlet right_bar_ix = right_dendo[0].indexOf(\"|\") ;\r\n\t\r\n\t\t\t// calculate nb of chars of each line\r\n\t\t\tlet len = sep + right_dendo[0].length + left_dendo[0].length ;\r\n\t\t\tif (withCentroid) \r\n\t\t\t\tlen = Math.max(centroidstr.length , len) ;\r\n\t\t\tif (withDistance) \r\n\t\t\t\tlen = Math.max(distancestr.length , len) ;\r\n\r\n\r\n\t\t\t// calculate position of new vertical bar\r\n\t\t\tlet bar_ix =  left_bar_ix + Math.floor(( left_dendo[0].length - (left_bar_ix) + sep + (1+right_bar_ix)) / 2) ;\r\n\t\t\t\r\n\t\t\t// add line with the new vertical bar \r\n\t\t\tlines.push (putString (\"|\" , len , bar_ix)) ;\r\n\t\t\tif (withCentroid) {\r\n\t\t\t\tlines.push (putString (centroidstr , len , bar_ix - Math.floor (centroidstr.length / 2))) ; //centerString (centroidstr , len)) ;\r\n\t\t\t}\r\n\t\t\tif (withDistance) {\r\n\t\t\t\tlines.push (putString (distancestr , len , bar_ix - Math.floor (distancestr.length / 2))) ; //centerString (centroidstr , len)) ;\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t// add horizontal line to connect the vertical bars of the lower level\r\n\t\t\tlet hlineLen = sep + (left_dendo[0].length -left_bar_ix) + right_bar_ix+1 ;\r\n\t\t\tlet hline = repeatChar (\"_\" , hlineLen) ;\r\n\t\t\tlines.push (putString(hline, len, left_bar_ix)) ;\r\n\t\r\n\t\t\t// IF: the user want the tree to be balanced: all the leaves have to be at the same level\r\n\t\t\t// THEN: if the left and right subtrees have not the same depth, add extra vertical bars to the top of the smallest subtree\r\n\t\t\tif (balanced &&  (left_dendo.length !==right_dendo.length)) {\r\n\t\t\t\tlet shortest ;\r\n\t\t\t\tlet longest ;\r\n\t\t\t\tif (left_dendo.length > right_dendo.length) {\r\n\t\t\t\t\tlongest = left_dendo ;\r\n\t\t\t\t\tshortest = right_dendo ;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlongest = right_dendo ;\r\n\t\t\t\t\tshortest = left_dendo ;\r\n\t\t\t\t}\r\n\t\t\t\t// repeat the first line containing the vertical bar\r\n\t\t\t\tlet header = shortest[0] ;\r\n\t\t\t\tlet toadd = longest.length - shortest.length ;\r\n\t\t\t\tfor (let i = 0 ; i < toadd ; i++) {\r\n\t\t\t\t\tshortest.splice (0,0,header) ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// merge the left and right subtrees \r\n\t\t\tfor (let i = 0 ; i < Math.max (left_dendo.length , right_dendo.length) ; i++) {\r\n\t\t\t\tlet left = \"\" ;\r\n\t\t\t\tif (i < left_dendo.length)\r\n\t\t\t\t\tleft = left_dendo[i] ;\r\n\t\t\t\telse\r\n\t\t\t\t\tleft = repeatChar (\" \" , left_dendo[0].length) ;\r\n\t\r\n\t\t\t\tlet right = \"\" ;\r\n\t\t\t\tif (i < right_dendo.length)\r\n\t\t\t\t\tright = right_dendo[i] ;\r\n\t\t\t\telse\r\n\t\t\t\t\tright = repeatChar (\" \" , right_dendo[0].length) ;\r\n\t\t\t\tlines.push(left + repeatChar (\" \" , sep) + right) ;\r\n\t\t\t\t// eslint-disable-next-line\t\r\n\t\t\t\tlet l = left + repeatChar (\" \" , sep) + right ;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn lines ;\r\n\t}\r\n\r\n\r\n\r\n\tfunction agglomerate (labels, vectors, distance, linkage) {\r\n\t\tlet N = vectors.length ;\r\n\t\tlet dMin = new Array(N) ;\r\n\t\tlet cSize = new Array(N) ;\r\n\t\tlet matrixObj = new figue.Matrix(N,N);\r\n\t\tlet distMatrix = matrixObj.mtx ;\r\n\t\tlet clusters = new Array(N) ;\r\n\r\n\t\tlet c1, c2, c1Cluster, c2Cluster, i, j, p, root , newCentroid ;\r\n\r\n\t\tif (distance === figue.EUCLIDIAN_DISTANCE)\r\n\t\t\tdistance = euclidianDistance ;\r\n\t\telse if (distance === figue.MANHATTAN_DISTANCE)\r\n\t\t\tdistance = manhattanDistance ;\r\n\t\telse if (distance === figue.MAX_DISTANCE)\r\n\t\t\tdistance = maxDistance ;\r\n\r\n\t\t// Initialize distance matrix and vector of closest clusters\r\n\t\tfor (i = 0 ; i < N ; i++) {\r\n\t\t\tdMin[i] = 0 ;\r\n\t\t\tfor (j = 0 ; j < N ; j++) {\r\n\t\t\t\tif (i === j)\r\n\t\t\t\t\tdistMatrix[i][j] = Infinity ;\r\n\t\t\t\telse\r\n\t\t\t\t\tdistMatrix[i][j] = distance(vectors[i] , vectors[j]) ;\r\n\t\r\n\t\t\t\tif (distMatrix[i][dMin[i]] > distMatrix[i][j] )\r\n\t\t\t\t\tdMin[i] = j ;\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t// create leaves of the tree\r\n\t\tfor (i = 0 ; i < N ; i++) {\r\n\t\t\tclusters[i] = [] ;\r\n\t\t\tclusters[i][0] = new Node (labels[i], null, null, 0, vectors[i]) ;\r\n\t\t\tcSize[i] = 1 ;\r\n\t\t}\r\n\t\t\r\n\t\t// Main loop\r\n\t\tfor (p = 0 ; p < N-1 ; p++) {\r\n\t\t\t// find the closest pair of clusters\r\n\t\t\tc1 = 0 ;\r\n\t\t\tfor (i = 0 ; i < N ; i++) {\r\n\t\t\t\tif (distMatrix[i][dMin[i]] < distMatrix[c1][dMin[c1]])\r\n\t\t\t\t\tc1 = i ;\r\n\t\t\t}\r\n\t\t\tc2 = dMin[c1] ;\r\n\t\r\n\t\t\t// create node to store cluster info \r\n\t\t\tc1Cluster = clusters[c1][0] ;\r\n\t\t\tc2Cluster = clusters[c2][0] ;\r\n\r\n\t\t\tnewCentroid = calculateCentroid ( c1Cluster.size , c1Cluster.centroid , c2Cluster.size , c2Cluster.centroid ) ;\r\n\t\t\tlet newCluster = new Node (-1, c1Cluster, c2Cluster , distMatrix[c1][c2] , newCentroid) ;\r\n\t\t\tclusters[c1].splice(0,0, newCluster) ;\r\n\t\t\tcSize[c1] += cSize[c2] ;\r\n\t\t\r\n\t\t\t// overwrite row c1 with respect to the linkage type\r\n\t\t\tfor (j = 0 ; j < N ; j++) {\r\n\t\t\t\tif (linkage === figue.SINGLE_LINKAGE) {\r\n\t\t\t\t\tif (distMatrix[c1][j] > distMatrix[c2][j])\r\n\t\t\t\t\t\tdistMatrix[j][c1] = distMatrix[c1][j] = distMatrix[c2][j] ;\r\n\t\t\t\t} else if (linkage === figue.COMPLETE_LINKAGE) {\r\n\t\t\t\t\tif (distMatrix[c1][j] < distMatrix[c2][j])\r\n\t\t\t\t\t\tdistMatrix[j][c1] = distMatrix[c1][j] = distMatrix[c2][j] ;\r\n\t\t\t\t} else if (linkage === figue.AVERAGE_LINKAGE) {\r\n\t\t\t\t\tlet avg = ( cSize[c1] * distMatrix[c1][j] + cSize[c2] * distMatrix[c2][j])  / (cSize[c1] + cSize[j]) \r\n\t\t\t\t\tdistMatrix[j][c1] = distMatrix[c1][j] = avg ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdistMatrix[c1][c1] = Infinity ;\r\n\t\t\r\n\t\t\t// infinity out old row c2 and column c2\r\n\t\t\tfor (i = 0 ; i < N ; i++)\r\n\t\t\t\tdistMatrix[i][c2] = distMatrix[c2][i] = Infinity ;\r\n\t\r\n\t\t\t// update dmin and replace ones that previous pointed to c2 to point to c1\r\n\t\t\tfor (j = 0; j < N ; j++) {\r\n\t\t\t\tif (dMin[j] === c2)\r\n\t\t\t\t\tdMin[j] = c1;\r\n\t\t\t\tif (distMatrix[c1][j] < distMatrix[c1][dMin[c1]]) \r\n\t\t\t\t\tdMin[c1] = j;\r\n\t\t\t}\r\n\t\r\n\t\t\t// keep track of the last added cluster\r\n\t\t\troot = newCluster ;\r\n\t\t}\r\n\t\r\n\t\treturn root ;\r\n\t}\r\n\r\n\r\n\t\r\n\tfunction getRandomVectors(k, vectors) {\r\n\t\t/*  Returns a array of k distinct vectors randomly selected from a the input array of vectors\r\n\t\t\tReturns null if k > n or if there are less than k distinct objects in vectors */\r\n\t\t\r\n\t\tlet n = vectors.length ;\r\n\t\tif ( k > n ) \r\n\t\t\treturn null ;\r\n\t\t\r\n\t\tlet selected_vectors = new Array(k) ;\r\n\t\tlet selected_indices = new Array(k) ;\r\n\t\t\r\n\t\tlet tested_indices = {};\r\n\t\tlet tested = 0 ;\r\n\t\tlet selected = 0 ;\r\n\t\tlet i , vector, select ;\r\n\t\twhile (selected < k) {\r\n\t\t\tif (tested === n)\r\n\t\t\t\treturn null ;\r\n\t\t\t\r\n\t\t\tlet random_index = Math.floor(Math.random()*(n)) ;\r\n\t\t\tif (random_index in tested_indices)\r\n\t\t\t\tcontinue ;\r\n\t\t\t\r\n\t\t\ttested_indices[random_index] = 1;\r\n\t\t\ttested++ ;\r\n\t\t\tvector = vectors[random_index] ;\r\n\t\t\tselect = true ;\r\n\t\t\tfor (i = 0 ; i < selected ; i++) {\r\n\t\t\t\tif ( vector.compare (selected_vectors[i]) ) {\r\n\t\t\t\t\tselect = false ;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (select) {\r\n\t\t\t\tselected_vectors[selected] = vector ;\r\n\t\t\t\tselected_indices[selected] = random_index ; \r\n\t\t\t\tselected++ ;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {'vectors': selected_vectors, 'indices': selected_indices} ;\r\n\t}\r\n\t\r\n\tfunction kmeans (k, vectors) {\r\n\t\tlet n = vectors.length ;\r\n\t\tlet assignments = new Array(n) ;\r\n\t\tlet clusterSizes = new Array(k) ;\r\n\t\tlet repeat = true ;\r\n\t\tlet nb_iters = 0 ;\r\n\t\tlet centroids = null ;\r\n\t\t\r\n\t\tlet t = getRandomVectors(k, vectors) ;\r\n\t\tif (t === null)\r\n\t\t\treturn null ;\r\n\t\telse\r\n\t\t\tcentroids = t.vectors ;\r\n\t\t\t\r\n\t\twhile (repeat) {\r\n\r\n\t\t\t// assignment step\r\n\t\t\tfor (let j = 0 ; j < k ; j++)\r\n\t\t\t\tclusterSizes[j] = 0 ;\r\n\t\t\t\r\n\t\t\tfor (let i = 0 ; i < n ; i++) {\r\n\t\t\t\tlet vector = vectors[i] ;\r\n\t\t\t\tlet mindist = Number.MAX_VALUE ;\r\n\t\t\t\tlet best ;\r\n\t\t\t\tlet dist;\r\n\t\t\t\tfor (let j = 0 ; j < k ; j++) {\r\n\t\t\t\t\tdist = euclidianDistance (centroids[j], vector)\r\n\t\t\t\t\tif (dist < mindist) {\r\n\t\t\t\t\t\tmindist = dist ;\r\n\t\t\t\t\t\tbest = j ;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tclusterSizes[best]++ ;\r\n\t\t\t\tassignments[i] = best ;\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// update centroids step\r\n\t\t\tlet newCentroids = new Array(k) ;\r\n\t\t\tfor (let j = 0 ; j < k ; j++)\r\n\t\t\t\tnewCentroids[j] = null ;\r\n\t\t\tlet cluster;\r\n\t\t\tfor (let i = 0 ; i < n ; i++) {\r\n\t\t\t\tcluster = assignments[i] ;\r\n\t\t\t\tif (newCentroids[cluster] === null)\r\n\t\t\t\t\tnewCentroids[cluster] = vectors[i] ;\r\n\t\t\t\telse\r\n\t\t\t\t\tnewCentroids[cluster] = addVectors (newCentroids[cluster] , vectors[i]) ;\t\r\n\t\t\t}\r\n\r\n\t\t\tfor (let j = 0 ; j < k ; j++) {\r\n\t\t\t\tnewCentroids[j] = multiplyVectorByValue (1/clusterSizes[j] , newCentroids[j]) ;\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t\t// check convergence\r\n\t\t\trepeat = false ;\r\n\t\t\tfor (let j = 0 ; j < k ; j++) {\r\n\t\t\t\tif (! newCentroids[j].compare (centroids[j])) {\r\n\t\t\t\t\trepeat = true ; \r\n\t\t\t\t\tbreak ; \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcentroids = newCentroids ;\r\n\t\t\tnb_iters++ ;\r\n\t\t\t\r\n\t\t\t// check nb of iters\r\n\t\t\tif (nb_iters > figue.KMEANS_MAX_ITERATIONS)\r\n\t\t\t\trepeat = false ;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn { 'centroids': centroids , 'assignments': assignments} ;\r\n\r\n\t}\r\n\t\r\n\tfunction fcmeans (k, vectors, epsilon, fuzziness) {\r\n\t\tlet membershipMatrix = new Matrix (vectors.length, k) ;\r\n\t\tlet repeat = true ;\r\n\t\tlet nb_iters = 0 ;\r\n\t\t\r\n\t\tlet centroids = null ;\r\n\t\t\r\n\t\tlet i,j,l, tmp, norm, max, diff ;\r\n\t\twhile (repeat) {\r\n\t\t\t// initialize or update centroids\r\n\t\t\tif (centroids === null) {\r\n\t\t\t\t\r\n\t\t\t\ttmp = getRandomVectors(k, vectors) ;\r\n\t\t\t\tif (tmp === null)\r\n\t\t\t\t\treturn null ;\r\n\t\t\t\telse\r\n\t\t\t\t\tcentroids = tmp.vectors ;\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tfor (j = 0 ; j < k; j++) {\r\n\t\t\t\t\tcentroids[j] = [] ;\r\n\t\t\t\t\tnorm = 0 ;\r\n\t\t\t\t\tfor (i = 0 ; i < membershipMatrix.rows ; i++) {\r\n\t\t\t\t\t\tnorm += Math.pow(membershipMatrix.mtx[i][j], fuzziness) ;\r\n\t\t\t\t\t\ttmp = multiplyVectorByValue( Math.pow(membershipMatrix.mtx[i][j], fuzziness) , vectors[i]) ;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (i === 0)\r\n\t\t\t\t\t\t\tcentroids[j] = tmp ;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tcentroids[j] = addVectors (centroids[j] , tmp) ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (norm > 0)\r\n\t\t\t\t\t\tcentroids[j] = multiplyVectorByValue(1/norm, centroids[j]);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t//alert(centroids);\r\n\t\t\t\r\n\t\t\t// update the degree of membership of each vector\r\n\t\t\tlet previousMembershipMatrix = membershipMatrix.copy() ;\r\n\t\t\tfor (i = 0 ; i < membershipMatrix.rows ; i++) {\r\n\t\t\t\tfor (j = 0 ; j < k ; j++) {\r\n\t\t\t\t\tmembershipMatrix.mtx[i][j] = 0;\r\n\t\t\t\t\tfor (l = 0 ; l < k ; l++) {\r\n\t\t\t\t\t\tif (euclidianDistance(vectors[i] , centroids[l]) === 0)\r\n\t\t\t\t\t\t\ttmp = 0 ;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttmp =  euclidianDistance(vectors[i] , centroids[j]) / euclidianDistance(vectors[i] , centroids[l]) ;\r\n\t\t\t\t\t\ttmp = Math.pow (tmp, 2/(fuzziness-1)) ;\r\n\t\t\t\t\t\tmembershipMatrix.mtx[i][j] += tmp ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (membershipMatrix.mtx[i][j] > 0)\r\n\t\t\t\t\t\tmembershipMatrix.mtx[i][j] = 1 / membershipMatrix.mtx[i][j] ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//alert(membershipMatrix) ;\r\n\t\t\t\r\n\t\t\t// check convergence\r\n\t\t\tmax = -1 ;\r\n\t\t\tfor (i = 0 ; i < membershipMatrix.rows ; i++)\r\n\t\t\t\tfor (j = 0 ; j < membershipMatrix.cols ; j++) {\r\n\t\t\t\t\tdiff = Math.abs(membershipMatrix.mtx[i][j] - previousMembershipMatrix.mtx[i][j]) ;\r\n\t\t\t\t\tif (diff > max)\r\n\t\t\t\t\t\tmax = diff ;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\tif (max < epsilon)\r\n\t\t\t\trepeat = false ;\r\n\r\n\t\t\tnb_iters++ ;\r\n\r\n\t\t\t// check nb of iters\r\n\t\t\tif (nb_iters > figue.FCMEANS_MAX_ITERATIONS)\r\n\t\t\t\trepeat = false ;\r\n\t\t}\r\n\t\treturn { 'centroids': centroids , 'membershipMatrix': membershipMatrix} ;\r\n\t\r\n\t}\r\n\t\r\n\t\t\t\r\n\tfunction Matrix (rows,cols) \r\n\t{\r\n\t\tthis.rows = rows ;\r\n\t\tthis.cols = cols ;\r\n\t\tthis.mtx = new Array(rows) ; \r\n\r\n\t\tfor (let i = 0 ; i < rows ; i++)\r\n\t\t{\r\n\t\t\tlet row = new Array(cols) ;\r\n\t\t\tfor (let j = 0 ; j < cols ; j++)\r\n\t\t\t\trow[j] = 0;\r\n\t\t\tthis.mtx[i] = row ;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction Node (label,left,right,dist, centroid) \r\n\t{\r\n\t\tthis.label = label ;\r\n\t\tthis.left = left ;\r\n\t\tthis.right = right ;\r\n\t\tthis.dist = dist ;\r\n\t\tthis.centroid = centroid ;\r\n\t\tif (left === null && right === null) {\r\n\t\t\tthis.size = 1 ;\r\n\t\t\tthis.depth = 0 ;\r\n\t\t} else {\r\n\t\t\tthis.size = left.size + right.size ;\r\n\t\t\tthis.depth = 1 + Math.max (left.depth , right.depth ) ;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\treturn { \r\n\t\tSINGLE_LINKAGE: 0,\r\n\t\tCOMPLETE_LINKAGE: 1,\r\n\t\tAVERAGE_LINKAGE:2 ,\r\n\t\tEUCLIDIAN_DISTANCE: 0,\r\n\t\tMANHATTAN_DISTANCE: 1,\r\n\t\tMAX_DISTANCE: 2,\r\n\t\tPRINT_VECTOR_VALUE_PRECISION: 2,\r\n\t\tKMEANS_MAX_ITERATIONS: 10,\r\n\t\tFCMEANS_MAX_ITERATIONS: 3,\r\n\r\n\t\tMatrix: Matrix,\r\n\t\tNode: Node,\r\n\t\tgenerateDendogram: generateDendogram,\r\n\t\tagglomerate: agglomerate,\r\n\t\tkmeans: kmeans,\r\n\t\tfcmeans: fcmeans\r\n\t}\r\n}() ;\r\n\r\n\r\nfigue.Matrix.prototype.toString = function() \r\n{\r\n\tlet lines = [] ;\r\n\tfor (let i = 0 ; i < this.rows ; i++) \r\n\t\tlines.push (this.mtx[i].join(\"\\t\")) ;\r\n\treturn lines.join (\"\\n\") ;\r\n}\r\n\r\n\r\nfigue.Matrix.prototype.copy = function() \r\n{\r\n\tlet duplicate = new figue.Matrix(this.rows, this.cols) ;\r\n\tfor (let i = 0 ; i < this.rows ; i++)\r\n\t\tduplicate.mtx[i] = this.mtx[i].slice(0); \r\n\treturn duplicate ;\r\n}\r\n\r\nfigue.Node.prototype.isLeaf = function() \r\n{\r\n\tif ((this.left === null) && (this.right === null))\r\n\t\treturn true ;\r\n\telse\r\n\t\treturn false ;\r\n}\r\n\r\nfigue.Node.prototype.buildDendogram = function (sep, balanced,withLabel,withCentroid, withDistance)\r\n{\r\n\tlet lines;\r\n\tlines = figue.generateDendogram(this, sep, balanced,withLabel,withCentroid, withDistance) ;\r\n\treturn lines.join (\"\\n\") ;\t\r\n}\r\n\r\n// eslint-disable-next-line\r\nArray.prototype.compare = function(testArr) {\r\n    if (this.length !==testArr.length) return false;\r\n    for (let i = 0; i < testArr.length; i++) {\r\n        if (this[i].compare) { \r\n            if (!this[i].compare(testArr[i])) return false;\r\n        }\r\n        if (this[i] !== testArr[i]) return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nmodule.exports = figue;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAMAAABlApw1AAAC5VBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VfA0nAAAA9nRSTlMAAAcBA0eGDIdJD3nr4SUm4ngQJKf6+VNUqEDJkpTLBFvQGdEIc+7oMwJRUudyhPXkZFdZBmKDDo5Fvy0ukP6yI+Yisf2lGxqmpBYJUBcKce0Y8fKK4K2g2ir7oa4/yr4hHayenR4ws/Rc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\"","// eslint-disable-next-line\r\nlet svmjs = (function(exports){\r\n    let SVM = function(options) {\r\n\r\n    }\r\n  \r\n    SVM.prototype = {\r\n      \r\n      // data is NxD array of floats. labels are 1 or -1.\r\n      train: function(data, labels, options) {\r\n        \r\n        // we need these in helper functions\r\n        this.data = data;\r\n        this.labels = labels;\r\n  \r\n        // parameters\r\n        options = options || {};\r\n        let C = options.C || 1.0; // C value. Decrease for more regularization\r\n\r\n        let tol = options.tol || 1e-4; // numerical tolerance. Don't touch unless you're pro\r\n\r\n        let alphatol = options.alphatol || 1e-7; // non-support vectors for space and time efficiency are truncated. To guarantee correct result set this to 0 to do no truncating. If you want to increase efficiency, experiment with setting this little higher, up to maybe 1e-4 or so.\r\n\r\n        let maxiter = options.maxiter || 10000; // max number of iterations\r\n\r\n        let numpasses = options.numpasses || 10; // how many passes over data with no change before we halt? Increase for more precision.\r\n\r\n        \r\n        // instantiate kernel according to options. kernel can be given as string or as a custom function\r\n        let kernel = linearKernel;\r\n\r\n        this.kernelType = \"linear\";\r\n        if(\"kernel\" in options) {\r\n          if(typeof options.kernel === \"string\") {\r\n            // kernel was specified as a string. Handle these special cases appropriately\r\n            if(options.kernel === \"linear\") { \r\n              this.kernelType = \"linear\"; \r\n              kernel = linearKernel; \r\n            }\r\n            if(options.kernel === \"rbf\") { \r\n              let rbfSigma = options.rbfsigma || 0.5;\r\n\r\n              this.rbfSigma = rbfSigma; // back this up\r\n              this.kernelType = \"rbf\";\r\n              kernel = makeRbfKernel(rbfSigma);\r\n            }\r\n          } else {\r\n            // assume kernel was specified as a function. Let's just use it\r\n            this.kernelType = \"custom\";\r\n            kernel = options.kernel;\r\n          }\r\n        }\r\n  \r\n        // initializations\r\n        this.kernel = kernel;\r\n        this.N = data.length; let N = this.N;\r\n\r\n        this.D = data[0].length; \r\n        // let D = this.D;\r\n\r\n        this.alpha = zeros(N);\r\n        this.b = 0.0;\r\n        this.usew_ = false; // internal efficiency flag\r\n  \r\n        // Cache kernel computations to avoid expensive recomputation.\r\n        // This could use too much memory if N is large.\r\n        if (options.memoize) {\r\n          this.kernelResults = new Array(N);\r\n          for (let i=0;i<N;i++) {\r\n\r\n            this.kernelResults[i] = new Array(N);\r\n            for (let j=0;j<N;j++) {\r\n\r\n              this.kernelResults[i][j] = kernel(data[i],data[j]);\r\n            }\r\n          }\r\n        }\r\n  \r\n        // run SMO algorithm\r\n        let iter = 0;\r\n\r\n        let passes = 0;\r\n\r\n        while(passes < numpasses && iter < maxiter) {\r\n          \r\n          let alphaChanged = 0;\r\n\r\n          for(let i=0;i<N;i++) {\r\n\r\n          \r\n            let Ei= this.marginOne(data[i]) - labels[i];\r\n\r\n            if( (labels[i]*Ei < -tol && this.alpha[i] < C)\r\n             || (labels[i]*Ei > tol && this.alpha[i] > 0) ){\r\n              \r\n              // alpha_i needs updating! Pick a j to update it with\r\n              let j = i;\r\n\r\n              while(j === i) j= randi(0, this.N);\r\n              let Ej= this.marginOne(data[j]) - labels[j];\r\n              let ai;\r\n              let aj;\r\n              \r\n              // calculate L and H bounds for j to ensure we're in [0 C]x[0 C] box\r\n              ai= this.alpha[i];\r\n              aj= this.alpha[j];\r\n              let L = 0; let H = C;\r\n\r\n\r\n              if(labels[i] === labels[j]) {\r\n                L = Math.max(0, ai+aj-C);\r\n                H = Math.min(C, ai+aj);\r\n              } else {\r\n                L = Math.max(0, aj-ai);\r\n                H = Math.min(C, C+aj-ai);\r\n              }\r\n              \r\n              if(Math.abs(L - H) < 1e-4) continue;\r\n  \r\n              let eta = 2*this.kernelResult(i,j) - this.kernelResult(i,i) - this.kernelResult(j,j);\r\n\r\n              if(eta >= 0) continue;\r\n              \r\n              // compute new alpha_j and clip it inside [0 C]x[0 C] box\r\n              // then compute alpha_i based on it.\r\n              let newaj = aj - labels[j]*(Ei-Ej) / eta;\r\n\r\n              if(newaj>H) newaj = H;\r\n              if(newaj<L) newaj = L;\r\n              if(Math.abs(aj - newaj) < 1e-4) continue; \r\n              this.alpha[j] = newaj;\r\n              let newai = ai + labels[i]*labels[j]*(aj - newaj);\r\n\r\n              this.alpha[i] = newai;\r\n              \r\n              // update the bias term\r\n              let b1 = this.b - Ei - labels[i]*(newai-ai)*this.kernelResult(i,i)\r\n\r\n                       - labels[j]*(newaj-aj)*this.kernelResult(i,j);\r\n              let b2 = this.b - Ej - labels[i]*(newai-ai)*this.kernelResult(i,j)\r\n\r\n                       - labels[j]*(newaj-aj)*this.kernelResult(j,j);\r\n              this.b = 0.5*(b1+b2);\r\n              if(newai > 0 && newai < C) this.b= b1;\r\n              if(newaj > 0 && newaj < C) this.b= b2;\r\n              \r\n              alphaChanged++;\r\n              \r\n            } // end alpha_i needed updating\r\n          } // end for i=1..N\r\n          \r\n          iter++;\r\n          //console.log(\"iter number %d, alphaChanged = %d\", iter, alphaChanged);\r\n          if(alphaChanged === 0) passes++;\r\n          else passes= 0;\r\n          \r\n        } // end outer loop\r\n        \r\n        // if the user was using a linear kernel, lets also compute and store the\r\n        // weights. This will speed up evaluations during testing time\r\n        if(this.kernelType === \"linear\") {\r\n  \r\n          // compute weights and store them\r\n          this.w = new Array(this.D);\r\n          for(let j=0;j<this.D;j++) {\r\n\r\n            let s= 0.0;\r\n\r\n            for(let i=0;i<this.N;i++) {\r\n\r\n              s+= this.alpha[i] * labels[i] * data[i][j];\r\n            }\r\n            this.w[j] = s;\r\n            this.usew_ = true;\r\n          }\r\n        } else {\r\n  \r\n          // okay, we need to retain all the support vectors in the training data,\r\n          // we can't just get away with computing the weights and throwing it out\r\n  \r\n          // But! We only need to store the support vectors for evaluation of testing\r\n          // instances. So filter here based on this.alpha[i]. The training data\r\n          // for which this.alpha[i] = 0 is irrelevant for future. \r\n          let newdata = [];\r\n\r\n          let newlabels = [];\r\n\r\n          let newalpha = [];\r\n\r\n          for(let i=0;i<this.N;i++) {\r\n\r\n            //console.log(\"alpha=%f\", this.alpha[i]);\r\n            if(this.alpha[i] > alphatol) {\r\n              newdata.push(this.data[i]);\r\n              newlabels.push(this.labels[i]);\r\n              newalpha.push(this.alpha[i]);\r\n            }\r\n          }\r\n  \r\n          // store data and labels\r\n          this.data = newdata;\r\n          this.labels = newlabels;\r\n          this.alpha = newalpha;\r\n          this.N = this.data.length;\r\n          //console.log(\"filtered training data from %d to %d support vectors.\", data.length, this.data.length);\r\n        }\r\n  \r\n        let trainstats = {};\r\n\r\n        trainstats.iters= iter;\r\n        return trainstats;\r\n      }, \r\n      \r\n      // inst is an array of length D. Returns margin of given example\r\n      // this is the core prediction function. All others are for convenience mostly\r\n      // and end up calling this one somehow.\r\n      marginOne: function(inst) {\r\n  \r\n        let f = this.b;\r\n\r\n        // if the linear kernel was used and w was computed and stored,\r\n        // (i.e. the svm has fully finished training)\r\n        // the internal class letiable usew_ will be set to true.\r\n\r\n        if(this.usew_) {\r\n  \r\n          // we can speed this up a lot by using the computed weights\r\n          // we computed these during train(). This is significantly faster\r\n          // than the version below\r\n          for(let j=0;j<this.D;j++) {\r\n\r\n            f += inst[j] * this.w[j];\r\n          }\r\n  \r\n        } else {\r\n  \r\n          for(let i=0;i<this.N;i++) {\r\n\r\n            f += this.alpha[i] * this.labels[i] * this.kernel(inst, this.data[i]);\r\n          }\r\n        }\r\n  \r\n        return f;\r\n      },\r\n      \r\n      predictOne: function(inst) { \r\n        return this.marginOne(inst) > 0 ? 1 : -1; \r\n      },\r\n      \r\n      // data is an NxD array. Returns array of margins.\r\n      margins: function(data) {\r\n        \r\n        // go over support vectors and accumulate the prediction. \r\n        let N = data.length;\r\n\r\n        let margins = new Array(N);\r\n\r\n        for(let i=0;i<N;i++) {\r\n\r\n          margins[i] = this.marginOne(data[i]);\r\n        }\r\n        return margins;\r\n        \r\n      },\r\n  \r\n      kernelResult: function(i, j) {\r\n        if (this.kernelResults) {\r\n          return this.kernelResults[i][j];\r\n        }\r\n        return this.kernel(this.data[i], this.data[j]);\r\n      },\r\n  \r\n      // data is NxD array. Returns array of 1 or -1, predictions\r\n      predict: function(data) {\r\n        let margs = this.margins(data);\r\n\r\n        for(let i=0;i<margs.length;i++) {\r\n\r\n          margs[i] = margs[i] > 0 ? 1 : -1;\r\n        }\r\n        return margs;\r\n      },\r\n      \r\n      // THIS FUNCTION IS NOW DEPRECATED. WORKS FINE BUT NO NEED TO USE ANYMORE. \r\n      // LEAVING IT HERE JUST FOR BACKWARDS COMPATIBILITY FOR A WHILE.\r\n      // if we trained a linear svm, it is possible to calculate just the weights and the offset\r\n      // prediction is then yhat = sign(X * w + b)\r\n      getWeights: function() {\r\n        \r\n        // DEPRECATED\r\n        let w= new Array(this.D);\r\n\r\n        for(let j=0;j<this.D;j++) {\r\n\r\n          let s= 0.0;\r\n\r\n          for(let i=0;i<this.N;i++) {\r\n\r\n            s+= this.alpha[i] * this.labels[i] * this.data[i][j];\r\n          }\r\n          w[j]= s;\r\n        }\r\n        return {w: w, b: this.b};\r\n      },\r\n  \r\n      toJSON: function() {\r\n        \r\n        if(this.kernelType === \"custom\") {\r\n          console.log(\"Can't save this SVM because it's using custom, unsupported kernel...\");\r\n          return {};\r\n        }\r\n  \r\n        let json = {}\r\n        json.N = this.N;\r\n        json.D = this.D;\r\n        json.b = this.b;\r\n  \r\n        json.kernelType = this.kernelType;\r\n        if(this.kernelType === \"linear\") { \r\n          // just back up the weights\r\n          json.w = this.w; \r\n        }\r\n        if(this.kernelType === \"rbf\") { \r\n          // we need to store the support vectors and the sigma\r\n          json.rbfSigma = this.rbfSigma; \r\n          json.data = this.data;\r\n          json.labels = this.labels;\r\n          json.alpha = this.alpha;\r\n        }\r\n  \r\n        return json;\r\n      },\r\n      \r\n      fromJSON: function(json) {\r\n        \r\n        this.N = json.N;\r\n        this.D = json.D;\r\n        this.b = json.b;\r\n  \r\n        this.kernelType = json.kernelType;\r\n        if(this.kernelType === \"linear\") { \r\n  \r\n          // load the weights! \r\n          this.w = json.w; \r\n          this.usew_ = true; \r\n          this.kernel = linearKernel; // this shouldn't be necessary\r\n        }\r\n        else if(this.kernelType === \"rbf\") {\r\n  \r\n          // initialize the kernel\r\n          this.rbfSigma = json.rbfSigma; \r\n          this.kernel = makeRbfKernel(this.rbfSigma);\r\n  \r\n          // load the support vectors\r\n          this.data = json.data;\r\n          this.labels = json.labels;\r\n          this.alpha = json.alpha;\r\n        } else {\r\n          console.log(\"ERROR! unrecognized kernel type.\" + this.kernelType);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Kernels\r\n    function makeRbfKernel(sigma) {\r\n      return function(v1, v2) {\r\n        let s=0;\r\n\r\n        for(let q=0;q<v1.length;q++) { s += (v1[q] - v2[q])*(v1[q] - v2[q]); } \r\n\r\n        return Math.exp(-s/(2.0*sigma*sigma));\r\n      }\r\n    }\r\n    \r\n    function linearKernel(v1, v2) {\r\n      let s=0; \r\n\r\n      for(let q=0;q<v1.length;q++) { s += v1[q] * v2[q]; } \r\n\r\n      return s;\r\n    }\r\n  \r\n    // Misc utility functions\r\n    // generate random floating point number between a and b\r\n    \r\n    // eslint-disable-next-line\r\n    function randf(a, b) {\r\n      return Math.random()*(b-a)+a;\r\n    }\r\n  \r\n    // generate random integer between a and b (b excluded)\r\n    function randi(a, b) {\r\n       return Math.floor(Math.random()*(b-a)+a);\r\n    }\r\n  \r\n    // create vector of zeros of length n\r\n    function zeros(n) {\r\n      let arr= new Array(n);\r\n\r\n      for(let i=0;i<n;i++) { arr[i]= 0; }\r\n\r\n      return arr;\r\n    }\r\n  \r\n    // export public members\r\n    exports = exports || {};\r\n    exports.SVM = SVM;\r\n    exports.makeRbfKernel = makeRbfKernel;\r\n    exports.linearKernel = linearKernel;\r\n    return exports;\r\n  \r\n  })(typeof module != 'undefined' && module.exports);  // add exports to module.exports if in node.js","  import { createContext } from 'react';\r\n\r\nexport const csvContext = createContext({\r\n    csv: null,\r\n    fetchCsv: (csv) => {}\r\n});","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport List from '@material-ui/core/List';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  drawer: {\r\n    [theme.breakpoints.up('lg')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n    [theme.breakpoints.up('lg')]: {\r\n      paddingTop: \"64px\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst SideDrawer = props => {\r\n  let history = useHistory();\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const pushLink = link => {\r\n    history.push(link);\r\n    props.handleDrawerToggle();\r\n  }\r\n\r\n  const drawer = (\r\n    <div>\r\n      <ListItem classes={{ root: classes.root }} button>\r\n        <Typography style={{ fontSize: '20px', fontWeight: '500', color: 'white' }}>\r\n          Algorithms\r\n                </Typography>\r\n      </ListItem>\r\n      <Divider />\r\n      <List>\r\n        <ListItem button onClick={() => { pushLink('/') }}>\r\n          <ListItemText primary=\"Dashboard\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => { pushLink('/overview') }}>\r\n          <ListItemText primary=\"Overview\" />\r\n        </ListItem>\r\n      </List>\r\n      <Divider />\r\n      <List>\r\n        <ListSubheader component=\"div\">\r\n          REGRESSION\r\n          </ListSubheader>\r\n        <ListItem button onClick={() => { pushLink('/linreg') }}>\r\n          <ListItemText primary=\"Linear Regression\" />\r\n        </ListItem>\r\n      </List>\r\n      <Divider />\r\n      <List>\r\n        <ListSubheader component=\"div\">\r\n          CLASSIFICATION\r\n          </ListSubheader>\r\n        <ListItem button onClick={() => { pushLink('/decision-tree') }}>\r\n          <ListItemText primary=\"Decision Tree\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => { pushLink('/pca') }}>\r\n          <ListItemText primary=\"PCA\" />\r\n        </ListItem>\r\n        {/* <ListItem button onClick={() => { pushLink('/svm') }}>\r\n          <ListItemText primary=\"SVM\" />\r\n        </ListItem> */}\r\n        <ListItem button onClick={() => { pushLink('/knn') }}>\r\n          <ListItemText primary=\"KNN Classifier\" />\r\n        </ListItem>\r\n      </List>\r\n      <Divider />\r\n      <Divider />\r\n      <List>\r\n        <ListSubheader component=\"div\">\r\n          CLUSTERING\r\n          </ListSubheader>\r\n        <ListItem button onClick={() => { pushLink('/fcmeans') }}>\r\n          < ListItemText primary=\"FC Means\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => { pushLink('/kmeans') }}>\r\n          <ListItemText primary=\"KMeans\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => { pushLink('/hcluster') }}>\r\n          <ListItemText primary=\"Hierarchical Clustering\" />\r\n        </ListItem>\r\n      </List>\r\n      <Divider />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n      <Hidden lgUp>\r\n        <Drawer\r\n          container={props.container}\r\n          variant=\"temporary\"\r\n          anchor={theme.direction === 'rtl' ? 'right' : 'left'}\r\n          open={props.mobileOpen}\r\n          onClose={props.handleDrawerToggle}\r\n          classes={{\r\n            paper: classes.drawerPaper,\r\n          }}\r\n          ModalProps={{\r\n            keepMounted: true, // Better open performance on mobile.\r\n          }}\r\n        >\r\n          {drawer}\r\n        </Drawer>\r\n      </Hidden>\r\n      <Hidden mdDown>\r\n        <Drawer\r\n          classes={{\r\n            paper: classes.drawerPaper,\r\n          }}\r\n          variant=\"permanent\"\r\n          open\r\n        >\r\n          {drawer}\r\n        </Drawer>\r\n      </Hidden>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default SideDrawer;","import React, { useState } from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport SideDrawer from './SideDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport logo from './logo.png';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up('lg')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n    title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nconst Header = props => {\r\n  const { container } = props;\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [mobileOpen, setMobileOpen] = useState(false);\r\n\r\n  const handleDrawerToggle = () => {\r\n    setMobileOpen(!mobileOpen);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <AppBar position=\"fixed\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            edge=\"start\"\r\n            onClick={handleDrawerToggle}\r\n            className={classes.menuButton}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <img src={logo} height=\"30\" width=\"30\" alt=\"logo\" />\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            &nbsp;Data Miner\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n        <SideDrawer \r\n          theme={theme}\r\n          container={container}\r\n          handleDrawerToggle={handleDrawerToggle}\r\n          mobileOpen={mobileOpen}\r\n          setMobileOpen={setMobileOpen}\r\n        />\r\n      <main className={classes.content}>\r\n        <div style={{ marginTop: \"70px\" }}>\r\n            {props.children}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  container: PropTypes.any,\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nconst Dashboard = () => {\r\n    return (\r\n        <div>\r\n            fg\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dashboard;","import * as tfdata from \"@tensorflow/tfjs-data\";\r\nimport * as tfcore from \"@tensorflow/tfjs-core\";\r\nimport * as tfvis from \"@tensorflow/tfjs-vis\";\r\n\r\nexport function ReadCSV(url, delimiter) {\r\n    return tfcore.tidy(() => {\r\n        const data = tfdata.csv(url, {\r\n            hasHeader: true,\r\n            delimiter: delimiter\r\n        });\r\n        return data;\r\n    })\r\n}\r\nexport function SetDifference(a, b) {\r\n    return a.filter(x => !b.includes(x));\r\n}\r\n\r\nexport function RemoveNode(node) {\r\n    const nodeV = document.getElementById(node);\r\n    if (nodeV != null)\r\n        nodeV.remove();\r\n}\r\n\r\nexport function CreateTensor(data, labels) {\r\n    const arr = [];\r\n    return tfcore.tidy(() => {\r\n        for (const label of labels)\r\n            arr.push(data[label]);\r\n        return tfcore.tensor(arr);\r\n    });\r\n}\r\n\r\nexport function Zip(a, b) {\r\n    const c = a.map(function (e, i) {\r\n        return [e, b[i]];\r\n    });\r\n    return c;\r\n}\r\nexport function VisorStop() {\r\n    return RemoveNode(\"tfjs-visor-container\");\r\n}\r\nexport function GemerateChartForLinearRegression(name, tab, x, y, preds) {\r\n    const chart = {\r\n        name: name,\r\n        tab: tab,\r\n        values: []\r\n    };\r\n    for (let i = 0; i < x[0].length; ++i) {\r\n        // Chart the Inputs with Label\r\n        chart.values.push({\r\n            name: \"X \" + (i + 1) + \" Y\",\r\n            // Values to Chart\r\n            values: Zip(x, y).map(([x, y]) => { return { x: x[i], y }; })\r\n        });\r\n        // Chart the Inputs with Predictions\r\n        chart.values.push({\r\n            name: \"X \" + i + \" PREDs\",\r\n            // Values to Chart\r\n            values: Zip(x, preds).map(([x, y]) => { return { x: x[i], y }; })\r\n        });\r\n    }\r\n    return chart;\r\n}\r\nexport function GenerateChartForCluster(centroids, clusters, xIdx, yIdx) {\r\n    const chart = { name: \"Cluster\", tab: \"Cluster Vis\", values: [] };\r\n    for (let i = 0; i < clusters.length; ++i)\r\n        chart.values.push({\r\n            name: 'Cluster ' + i,\r\n            values: clusters[i].map(cluster => { return { x: cluster[xIdx], y: cluster[yIdx] } })\r\n        });\r\n    for (let i = 0; i < centroids.length; ++i) {\r\n        chart.values.push({\r\n            name: 'Centroid ' + i,\r\n            values: [{ x: centroids[i][xIdx], y: centroids[i][yIdx] }]\r\n        });\r\n    }\r\n    return chart;\r\n}\r\nexport async function DrawBarChart(name, tab, values) {\r\n    const data = values.map((value, index) => { return { index, value } });\r\n    // Render to visor\r\n    const surface = { name: name, tab: tab };\r\n    tfvis.render.barchart(surface, data);\r\n}\r\nexport async function DrawScatterPlot(chart) {\r\n    const series = chart.values.map(value => value.values);\r\n    const series_names = chart.values.map(value => value.name);\r\n    const data = { values: series, series: series_names }\r\n    await tfvis.render.scatterplot({ name: chart.name, tab: chart.tab }, data);\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport MagicDropzone from 'react-magic-dropzone';\r\nimport { csvContext } from '../context/csv-context';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { ReadCSV } from '../linreg/utils';\r\n\r\nconst CsvReader = () => {\r\n    const { fetchCsv } = useContext(csvContext);\r\n    // eslint-disable-next-line\r\n    const [delimiter, setDelimiter] = useState(',');\r\n    const onDrop = async (accepted, rejected, links) => {\r\n        if (accepted && accepted.length > 0) {\r\n            const url = accepted[0].preview;\r\n            const data = ReadCSV(url, delimiter);\r\n            fetchCsv(data);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Paper style={{ margin: '10px', padding: '10px' }}>\r\n            <MagicDropzone className=\"dropzone\" accept=\".csv\" multiple={false} onDrop={onDrop}>\r\n                <div className=\"center-div-wrap\">\r\n                    <div style={{ display: 'block' }}>\r\n                        <p>Drag/drop csv files over here</p>\r\n                    </div>\r\n                </div>\r\n            </MagicDropzone>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default CsvReader;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { csvContext } from '../context/csv-context';\r\nimport MUIDataTable from \"mui-datatables\";\r\n\r\nconst CsvTable = () => {\r\n    const { csv } = useContext(csvContext);\r\n    const [columns, setColumns] = useState([])\r\n    const [data, setData] = useState([]);\r\n\r\n    useEffect( () => {\r\n        if (csv) {\r\n            async function Fetch() {\r\n                setColumns(await csv.columnNames());\r\n                setData(await csv.toArray())\r\n            }\r\n            Fetch();\r\n        }\r\n    }, [csv])\r\n\r\n    const options = {\r\n        filterType: \"dropdown\",\r\n        responsive: \"scroll\"\r\n    };\r\n\r\n    return (\r\n        <div className=\"csv-table\">\r\n            {csv ? (\r\n                <MUIDataTable\r\n                    title={\"Data Table\"}\r\n                    data={data}\r\n                    columns={columns}\r\n                    options={options}\r\n                />\r\n            ) : (\r\n                    <div style={{ textAlign: 'center' }}>\r\n                        <h3>No Data Found</h3>\r\n                    </div>\r\n                )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CsvTable;","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from './CsvReader';\r\nimport CsvTable from './CsvTable';\r\n\r\nconst Overview = () => {\r\n    return (\r\n        <div>\r\n            <Grid container>\r\n                <Grid item md={6} xs={12}>\r\n                    <CsvReader />\r\n                    <CsvTable />\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Overview;","import React from 'react'\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst TitleBar = props => {\r\n    return (\r\n        <Paper style={{ background: '#000000', color: 'white', margin:' 10px', padding: '20px' }}>\r\n            <Typography style={{ marginBottom: '10px' }} variant=\"h5\">\r\n                {props.name}\r\n            </Typography>\r\n            {props.tags.map((tag, index) => \r\n            <span className=\"tag\" key={index}>\r\n                {tag}\r\n            </span>\r\n            )}\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default TitleBar;","import * as tf from \"@tensorflow/tfjs\";\r\n\r\nexport function Normalize(tensor) {\r\n    return tf.tidy(() => {\r\n        const max = tensor.max();\r\n        const min = tensor.min();\r\n        const normalized = NormalizeValRaw(max, min, tensor);\r\n        return { max, min, value: normalized };\r\n    });\r\n}\r\nexport function NormalizeValRaw(max, min, value) {\r\n    return tf.tidy(() => {\r\n        const std = max.sub(min)\r\n        const num = value.sub(min)\r\n        const normalized = num.div(std)\r\n        return normalized;\r\n    });\r\n}\r\nexport function NormalizeVar(val, pred) {\r\n    return tf.tidy(() => { return NormalizeValRaw(val.max, val.min, pred); })\r\n}\r\nexport function ScaleBackValRaw(max, min, pred) {\r\n    return tf.tidy(() => {\r\n        const std = max.sub(min)\r\n        const num = pred.mul(std)\r\n        const scaled = num.add(min)\r\n        return scaled;\r\n    });\r\n}\r\nexport function ScaleBackValWithTensor(val, pred) {\r\n    return tf.tidy(() => {\r\n        return ScaleBackValRaw(val.max, val.min, tf.tensor(pred))\r\n    });\r\n}\r\nexport function ScaleBackVal(val, pred) {\r\n    return tf.tidy(() => {\r\n        return ScaleBackValRaw(val.max, val.min, pred);\r\n    });\r\n}\r\n\r\nexport function InputDimSize(tensor) {\r\n    return tf.tidy(() => tensor.shape[1])\r\n}\r\nexport function RootMeanSquareError(yTrue, yPred) {\r\n    return tf.tidy(() => {\r\n        // Scale the the first column (0-1 shape indicator) of `yTrue` in order\r\n        // to ensure balanced contributions to the final loss value\r\n        // from shape and bounding-box predictions.\r\n        return tf.sqrt(tf.metrics.meanSquaredError(yTrue, yPred));\r\n    });\r\n}\r\nexport async function FindArgMax(values, axis = 1) {\r\n    const valuesT = tf.tensor(values);\r\n    const argMaxT = valuesT.argMax(axis);\r\n    const argMax = await argMaxT.array();\r\n    valuesT.dispose();\r\n    argMaxT.dispose();\r\n    return argMax;\r\n}\r\nexport function DisposeValue(val) {\r\n    val.value.dispose();\r\n    val.max.dispose();\r\n    val.min.dispose();\r\n}\r\nexport function DisposeValues(...vals) {\r\n    for (const val of vals)\r\n        DisposeValue(val);\r\n}\r\nexport function ConvertClusterIconsToData(clusterIds, k, data) {\r\n    let clusters = [];\r\n    for (let i = 0; i < k; ++i)\r\n        clusters.push([]);\r\n    for (let i = 0; i < clusterIds.length; ++i) {\r\n        const cluster = clusterIds[i];\r\n        const value = data[i];\r\n        clusters[cluster].push(value);\r\n    }\r\n    return clusters;\r\n}\r\nexport async function ExtractSelectedLabelsFromCSV(csv, selectedCols = []) {\r\n    const data = await csv.toArray();\r\n    return ExtractSelectedLabels(data, selectedCols);\r\n}\r\nexport function ExtractSelectedLabels(data, selectedCols = []) {\r\n    if (selectedCols.length === 0)\r\n        return data;\r\n    const results = [];\r\n    for (const kv of data) {\r\n        const result = {};\r\n        for (const colName in kv) {\r\n            if (!selectedCols.includes(colName))\r\n                continue;\r\n            const value = kv[colName];\r\n            result[colName] = value;\r\n        }\r\n        results.push(result);\r\n    }\r\n    return results;\r\n}\r\nexport async function ConvertCSVToRawArrays(csv, labelCol, allCols = [], normalize = false) {\r\n    const data = await csv.toArray();\r\n    const [xT, yT] = SplitIntoInputAndLabel(data, labelCol, allCols, normalize);\r\n\r\n    const x = await xT.value.array();\r\n    const y = await yT.value.array();\r\n\r\n    DisposeValues(xT, yT);\r\n    return [x, y];\r\n}\r\nexport async function ConvertCSVToSingleArray(csv, selectedCols = [], normalize = false) {\r\n    const data = await csv.toArray();\r\n    const raw = await ExtractSelectedLabels(data, selectedCols);\r\n    const values = [];\r\n    for (const rawV of raw) {\r\n        const value = [];\r\n        for (const key in rawV)\r\n            value.push(rawV[key]);\r\n        values.push(value);\r\n    }\r\n    return values;\r\n}\r\nfunction ExtractInformation(raw, data, normalize = true) {\r\n    return tf.tidy(() => {\r\n        const value = {\r\n            value: [],\r\n            max: [],\r\n            min: []\r\n        };\r\n        for (let i = 0; i < data.length; ++i)\r\n            value.value.push([]);\r\n\r\n        for (const colName in raw) {\r\n            const max = raw[colName].max;\r\n            const min = raw[colName].min;\r\n            value.max.push(max);\r\n            value.min.push(min);\r\n            for (let i = 0; i < raw[colName].value.length; ++i) {\r\n                if (normalize)\r\n                    raw[colName].value[i] = (raw[colName].value[i] - min) / (max - min)\r\n                value.value[i].push(raw[colName].value[i]);\r\n            }\r\n        }\r\n        value.max = tf.tensor(value.max);\r\n        value.min = tf.tensor(value.min);\r\n        value.value = tf.tensor(value.value);\r\n        return value;\r\n    });\r\n}\r\nexport function ArrayRemoveColumn(array, remIdx = []) {\r\n    return array.map((arr) => {\r\n        return arr.filter((_, idx) => !remIdx.includes(idx));\r\n    });\r\n};\r\nexport function SplitIntoInputAndLabel(data, labelCol, allCols = [], normalize = true) {\r\n    return tf.tidy(() => {\r\n        let x_raw = {};\r\n        let y_raw = {};\r\n\r\n        for (const kv of data)\r\n            for (const colName in kv) {\r\n                if (allCols.length !== 0 && !allCols.includes(colName)) {\r\n                    continue;\r\n                }\r\n                const value = kv[colName];\r\n                if (labelCol.includes(colName)) {\r\n                    if (y_raw[colName] == null)\r\n                        y_raw[colName] = { value: [], min: Number.MAX_SAFE_INTEGER, max: Number.MIN_SAFE_INTEGER }\r\n                    y_raw[colName].max = Math.max(y_raw[colName].max, value);\r\n                    y_raw[colName].min = Math.min(y_raw[colName].min, value);\r\n                    y_raw[colName].value.push(value);\r\n                } else {\r\n                    if (x_raw[colName] == null)\r\n                        x_raw[colName] = { value: [], min: Number.MAX_SAFE_INTEGER, max: Number.MIN_SAFE_INTEGER }\r\n                    x_raw[colName].value.push(value);\r\n                    x_raw[colName].max = Math.max(x_raw[colName].max, value);\r\n                    x_raw[colName].min = Math.min(x_raw[colName].min, value);\r\n                }\r\n            }\r\n        const x = ExtractInformation(x_raw, data, normalize)\r\n        const y = ExtractInformation(y_raw, data, normalize)\r\n        return [x, y];\r\n    });\r\n}","import * as tf from \"@tensorflow/tfjs\";\r\nimport { InputDimSize as TensorDimSize, RootMeanSquareError, ScaleBackVal, ScaleBackValWithTensor } from \"./utils\";\r\n\r\nexport function CreateModel(outs, inputs, l1, l2, learningRate) {\r\n    return tf.tidy(() => {\r\n        const regularizer = tf.regularizers.l1l2({\r\n            l1: l1,\r\n            l2: l2\r\n        });\r\n        const model = tf.sequential();\r\n        model.add(\r\n            tf.layers.dense({\r\n                units: outs, // Simple Linear Regression\r\n                inputShape: [inputs],\r\n                kernelRegularizer: regularizer\r\n            })\r\n        );\r\n        model.compile({\r\n            loss: RootMeanSquareError,\r\n            optimizer: tf.train.sgd(learningRate),\r\n            metrics: [RootMeanSquareError]\r\n        });\r\n        return model;\r\n    });\r\n}\r\nexport async function Fit(\r\n    xTrain, yTrain,\r\n    OnEpochEndCallBack = async (_) => { },\r\n    l1 = 0.0, l2 = 0.0,\r\n    epochs = 100, batchSize = 16, validationSplit = 10,\r\n    learningRate = 0.01) {\r\n\r\n    const model = CreateModel(TensorDimSize(yTrain), TensorDimSize(xTrain), l1, l2, learningRate);\r\n    const logs = [];\r\n\r\n    await model.fit(xTrain, yTrain, {\r\n        batchSize: batchSize,\r\n        epochs: epochs,\r\n        shuffle: true,\r\n        validationSplit: (validationSplit / 100), // In Percentage\r\n        callbacks: {\r\n            onEpochEnd: async (epoch, log) => {\r\n                logs.push({\r\n                    rms_loss: log.loss,\r\n                    val_rms_loss: log.val_loss,\r\n                    epoch: epoch\r\n                });\r\n                // Perform Action with All Train Logs\r\n                await OnEpochEndCallBack(logs);\r\n            }\r\n        }\r\n    });\r\n    return model;\r\n}\r\n\r\nexport function Predict(model, value, args = () => { }) {\r\n    return tf.tidy(() => {\r\n        return model.predict(tf.tensor([value]), args);\r\n    });\r\n}\r\nexport function Evaluate(model, x, y, args = () => { }) {\r\n    return tf.tidy(() => {\r\n        return model.evaluate(x, y, args);\r\n    });\r\n}\r\nexport async function PredictWithScaling(model, x, y) {\r\n    const predT = Predict(model, x);\r\n    const scaledT = ScaleBackVal(y, predT);\r\n    predT.dispose();\r\n    const prediction = (await scaledT.array())[0];\r\n    scaledT.dispose();\r\n    return prediction;\r\n}\r\nexport async function PredictDataset(model, x, y) {\r\n    let preds_list = [];\r\n    for (const val of await x.value.array()) {\r\n        const pred = Predict(model, val);\r\n        preds_list.push(pred);\r\n    }\r\n    let preds_raw = preds_list.map(pred => pred.array());\r\n    preds_raw = await Promise.all(preds_raw);\r\n    preds_raw = preds_raw.map(pred => pred[0]);\r\n\r\n    for (const pred_dispose of preds_list)\r\n        pred_dispose.dispose();\r\n    const predsT = ScaleBackValWithTensor(y, preds_raw);\r\n    const preds = await predsT.array();\r\n\r\n    const x_valsT = ScaleBackVal(x, x.value);\r\n    const x_vals = await x_valsT.array();\r\n\r\n    const y_valsT = ScaleBackVal(y, y.value);\r\n    const y_vals = await y_valsT.array();\r\n\r\n    predsT.dispose();\r\n    x_valsT.dispose();\r\n    y_valsT.dispose();\r\n    console.log(preds, x_vals, y_vals);\r\n    return [preds, x_vals, y_vals]\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { Formik } from 'formik';\r\nimport TitleBar from '../utils/TitleBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { csvContext } from '../context/csv-context';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport * as Utils from \"./utils\";\r\nimport { SplitIntoInputAndLabel, NormalizeVar, DisposeValues } from '../../ML/utils';\r\nimport * as LinearRegressionApply from \"../../ML/linreg\";\r\nimport * as tfvis from \"@tensorflow/tfjs-vis\";\r\nimport * as tf from \"@tensorflow/tfjs-core\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from '../utils/CsvReader';\r\nimport CsvTable from '../utils/CsvTable';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        margin: theme.spacing(8, 4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        width: '80%',\r\n    },\r\n    selectEmpty: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    form: {\r\n        width: '90%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: '20px',\r\n    },\r\n    submit: {\r\n        width: '100px',\r\n    },\r\n}));\r\n\r\nconst lin_reg_cache = { inputs: null, labels: null, model: null };\r\n\r\n// async function PredictSingleValue(model, data, xCols, x, y) {\r\n//     const val_pred = Utils.CreateTensor(data, xCols);\r\n//     const pred = await val_pred.data();\r\n//     const val_pred_norm = NormalizeVar(x, val_pred);\r\n//     const prediction = LinearRegressionApply.Predict(model, await val_pred_norm.array());\r\n//     const resT = ScaleBackVal(y, prediction);\r\n//     const res = (await resT.array())[0];\r\n//     val_pred.dispose();\r\n//     val_pred_norm.dispose();\r\n//     resT.dispose();\r\n//     prediction.dispose();\r\n//     return [pred, res];\r\n// }\r\n\r\nasync function GetDataFromCSV(csv, rowIdx, columns, predCol) {\r\n    const data = (await csv.toArray())[rowIdx];\r\n    const columnNames = Utils.SetDifference(columns, [predCol]);\r\n    const values = Object.keys(data).filter(key => columnNames.includes(key)).map(val => data[val]);\r\n    return values.join(',');\r\n}\r\n\r\nasync function PredictValues(model, input) {\r\n    const inputT = tf.tensor(input);\r\n    const inputNormT = NormalizeVar(lin_reg_cache.inputs, inputT)\r\n    inputT.dispose();\r\n    const inputNorm = await inputNormT.array();\r\n    inputNormT.dispose();\r\n    const pred = await LinearRegressionApply.PredictWithScaling(model, inputNorm, lin_reg_cache.labels);\r\n    return pred;\r\n}\r\n\r\nasync function Perform(csv, labelCols, inputCols, l1, l2, epochs, batchSize, validationSplit, learningRate) {\r\n    if (lin_reg_cache.inputs != null && lin_reg_cache.labels != null && lin_reg_cache.model != null) {\r\n        DisposeValues(lin_reg_cache.inputs, lin_reg_cache.labels);\r\n        lin_reg_cache.model.dispose();\r\n        lin_reg_cache.model = null;\r\n    }\r\n    const inputData = await csv.toArray();\r\n    Utils.VisorStop();\r\n    tfvis.visor().open();\r\n    const [input, label] = SplitIntoInputAndLabel(inputData, labelCols, inputCols);\r\n    const lossContainer = { name: 'show.loss', tab: 'Loss' };\r\n    const model = await LinearRegressionApply.Fit(input.value, label.value, async (logs) => {\r\n        await tfvis.show.history(lossContainer, logs, [\"rms_loss\", \"val_rms_loss\"]);\r\n    }, l1, l2, epochs, batchSize, validationSplit, learningRate);\r\n    model.summary();\r\n    await tfvis.show.modelSummary({ name: 'Model', tab: 'Model' }, model);\r\n\r\n    {\r\n        const [preds, x_vals, y_vals] = await LinearRegressionApply.PredictDataset(model, input, label);\r\n        const chart = Utils.GemerateChartForLinearRegression('Results', 'Plot', x_vals, y_vals, preds)\r\n        await Utils.DrawScatterPlot(chart);\r\n    }\r\n    lin_reg_cache.inputs = input;\r\n    lin_reg_cache.labels = label;\r\n    lin_reg_cache.model = model;\r\n    lin_reg_cache.inputs.value.dispose();\r\n    lin_reg_cache.labels.value.dispose();\r\n\r\n    console.log(\"Final Memory Usage\", tf.memory());\r\n}\r\n\r\nexport default function LinearRegression() {\r\n    const classes = useStyles();\r\n    const [error, setError] = useState('')\r\n    const { csv } = useContext(csvContext);\r\n    const [columnNames, setColumnNames] = useState([]);\r\n    const [ycolumn, setYcolumn] = useState();\r\n    const [predInput, setPredInput] = useState(\"9,7.5,3.5\");\r\n    const [prediction, setPrediction] = useState(\"\");\r\n    const [performPred, setPerformedPred] = useState(false);\r\n    useEffect(() => {\r\n        if (csv == null)\r\n            return;\r\n        async function LoadColumnNames() {\r\n            const columns = await csv.columnNames();\r\n            setColumnNames(columns);\r\n            setYcolumn(columns[columns.length - 1]);\r\n        }\r\n        LoadColumnNames();\r\n    }, [csv, setColumnNames]);\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item md={6} xs={12}>\r\n                <TitleBar name=\"Linear Regression\" tags={['Classification', 'Regression']} />\r\n                <p>\r\n                    <Link href={`${process.env.PUBLIC_URL}/Linear Regression.csv`}>Sample CSV</Link>\r\n                </p>\r\n                <CsvReader />\r\n                <CsvTable />\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n                {csv && ycolumn ? (\r\n                    <div style={{ padding: '10px' }}>\r\n                        {error && (\r\n                            <Alert onClose={() => setError('')} severity=\"error\">\r\n                                {error}\r\n                            </Alert>\r\n                        )}\r\n                        <Formik\r\n                            enableReinitialize\r\n                            initialValues={{\r\n                                xColumns: columnNames,\r\n                                selectedColumn: ycolumn,\r\n                                l1: 0.0,\r\n                                l2: 0.0,\r\n                                batchSize: 16,\r\n                                validationSplit: 10,\r\n                                learningRate: 0.01,\r\n                                epochs: 50,\r\n                            }}\r\n                            validate={values => {\r\n                                const errors = {};\r\n                                if (!values.selectedColumn) {\r\n                                    errors.selectedColumn = 'Required';\r\n                                }\r\n                                if (values.l1 == null) {\r\n                                    errors.l1 = 'Required';\r\n                                }\r\n                                if (values.l1 < 0) {\r\n                                    errors.l1 = 'Invalid L1 value';\r\n                                }\r\n                                if (values.l2 == null) {\r\n                                    errors.l2 = 'Required';\r\n                                }\r\n                                if (values.l2 < 0) {\r\n                                    errors.l2 = 'Invalid L2 value';\r\n                                }\r\n                                if (!values.batchSize) {\r\n                                    errors.batchSize = 'Required';\r\n                                }\r\n                                if (!values.validationSplit) {\r\n                                    errors.validationSplit = 'Required';\r\n                                }\r\n                                if (values.validationSplit < 5) {\r\n                                    errors.validationSplit = 'Invalid Validation Split';\r\n                                }\r\n                                if (!values.learningRate) {\r\n                                    errors.learningRate = 'Required';\r\n                                }\r\n                                if (values.learningRate < 0 || values.learningRate > 1) {\r\n                                    errors.learningRate = 'Invalid Learning Rate';\r\n                                }\r\n                                if (!values.epochs) {\r\n                                    errors.epochs = 'Required';\r\n                                }\r\n                                if (values.epochs < 1) {\r\n                                    errors.epochs = 'Invalid Number of Epochs';\r\n                                }\r\n\r\n                                return errors;\r\n                            }}\r\n                            onSubmit={(values, { setSubmitting }) => {\r\n                                const submitFormHandler = async values => {\r\n                                    let xCols = [...values.xColumns, values.selectedColumn]\r\n                                    xCols = [...new Set(xCols)]\r\n                                    try {\r\n                                        setError(\"\");\r\n                                        setPerformedPred(false);\r\n                                        await Perform(\r\n                                            csv,\r\n                                            [values.selectedColumn],\r\n                                            xCols,\r\n                                            values.l1,\r\n                                            values.l2,\r\n                                            values.epochs,\r\n                                            values.batchSize,\r\n                                            values.validationSplit,\r\n                                            values.learningRate)\r\n                                        setPerformedPred(true);\r\n                                        setPredInput(await GetDataFromCSV(csv, 0, xCols, ycolumn));\r\n                                    } catch (err) {\r\n                                        console.error(err);\r\n                                        setError('Error occored in Training');\r\n                                        setPerformedPred(false);\r\n                                    }\r\n                                }\r\n                                submitFormHandler(values);\r\n                                setSubmitting(false)\r\n                            }}\r\n                        >{({\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            handleSubmit,\r\n                            isSubmitting,\r\n                            setFieldValue,\r\n                        }) => (\r\n                                <form className={classes.form} onSubmit={handleSubmit}>\r\n                                    <Grid container spacing={1}>\r\n                                        <Grid item xs={12}>\r\n                                            <Paper style={{ backgroundColor: 'black', padding: '20px' }}>\r\n                                                Select the attributes for training the model\r\n                                        </Paper>\r\n                                            <Grid container spacing={1}>\r\n                                                {columnNames.map((column, index) =>\r\n                                                    <Grid item xs={4} key={index}>\r\n                                                        {column !== values.selectedColumn && (\r\n                                                            <FormControlLabel\r\n                                                                control={<Checkbox\r\n                                                                    checked={values.xColumns.includes(column)}\r\n                                                                    color=\"default\"\r\n                                                                    name={column}\r\n                                                                    onChange={(event) => {\r\n                                                                        let array = values.xColumns;\r\n                                                                        if (array.includes(event.target.name)) {\r\n                                                                            const newArray = array.filter((col) => col !== event.target.name);\r\n                                                                            setFieldValue('xColumns', newArray, false)\r\n                                                                        } else {\r\n                                                                            array.push(event.target.name)\r\n                                                                            setFieldValue('xColumns', array, false)\r\n                                                                        }\r\n                                                                    }}\r\n                                                                />}\r\n                                                                label={column}\r\n                                                            />\r\n                                                        )}\r\n                                                    </Grid>\r\n                                                )}\r\n                                            </Grid>\r\n                                        </Grid>\r\n                                        <Grid item xs={12}>\r\n                                            <TextField id=\"select\"\r\n                                                label=\"Y Attribute\" select\r\n                                                fullWidth\r\n                                                value={values.selectedColumn}\r\n                                                name=\"selectedColumn\"\r\n                                                onChange={handleChange}\r\n                                                variant=\"filled\"\r\n                                            >\r\n                                                {columnNames.map((column, index) =>\r\n                                                    <MenuItem key={index} value={column}>{column}</MenuItem>\r\n                                                )}\r\n                                            </TextField>\r\n                                            <FormHelperText>Select a column</FormHelperText>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"L1\"\r\n                                                name=\"l1\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.l1}\r\n\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.l1 && touched.l1 && errors.l1}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"L2\"\r\n                                                name=\"l2\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.l2}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.l2 && touched.l2 && errors.l2}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"Batch Size\"\r\n                                                name=\"batchSize\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.batchSize}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.batchSize && touched.batchSize && errors.batchSize}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"Validation Split\"\r\n                                                name=\"validationSplit\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.validationSplit}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.validationSplit && touched.validationSplit && errors.validationSplit}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"Learning Rate\"\r\n                                                name=\"learningRate\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.learningRate}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.learningRate && touched.learningRate && errors.learningRate}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"Epochs\"\r\n                                                name=\"epochs\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.epochs}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.epochs && touched.epochs && errors.epochs}\r\n                                            </div>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                    <div style={{ margin: '20px', textAlign: 'center' }}>\r\n                                        <Button\r\n                                            style={{ width: '100%' }}\r\n                                            type=\"submit\"\r\n                                            fullWidth\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            className={classes.submit}\r\n                                            disabled={isSubmitting}\r\n                                        >\r\n                                            Perform\r\n                                    </Button>\r\n                                    </div>\r\n                                </form>\r\n                            )}\r\n                        </Formik>\r\n                        {\r\n                            performPred &&\r\n                            <>\r\n                                <TextField\r\n                                    variant=\"filled\"\r\n                                    label=\"Predictor\"\r\n                                    name=\"Predictor\"\r\n                                    value={predInput}\r\n                                    onChange={(_) => setPredInput(_.target.value)}\r\n                                />\r\n                                <Button onClick={() => tfvis.visor().open()}>Show Charts</Button>\r\n                                <Button onClick={async () => {\r\n                                    setPrediction('');\r\n                                    const inputs = String(predInput).split(',').map(value => Number(value));\r\n                                    const predictedValue = await PredictValues(lin_reg_cache.model, inputs);\r\n                                    setPrediction(predictedValue);\r\n                                }}>PREDICT</Button>\r\n                            </>\r\n                        }\r\n                        {\r\n                            performPred && prediction !== \"\" &&\r\n                            <Alert onClose={() => { setPrediction('') }} severity=\"success\">\r\n                                The predicted value is {prediction}\r\n                            </Alert>\r\n                        }\r\n                    </div>\r\n                ) : (\r\n                        <div style={{ paddingTop: '50px', textAlign: 'center' }}>\r\n                            Please select a dataset\r\n                        </div>\r\n                    )}\r\n            </Grid>\r\n\r\n        </Grid >\r\n    )\r\n}\r\n\r\n","let dt = (function () {\r\n          \r\n    /**\r\n     * Creates an instance of DecisionTree\r\n     *\r\n     * @constructor\r\n     * @param builder - contains training set and\r\n     *                  some configuration parameters\r\n     */\r\n    function DecisionTree(builder) {        \r\n        this.root = buildDecisionTree({\r\n            trainingSet: builder.trainingSet,\r\n            ignoredAttributes: arrayToHashSet(builder.ignoredAttributes),\r\n            categoryAttr: builder.categoryAttr || 'category',\r\n            minItemsCount: builder.minItemsCount || 1,\r\n            entropyThrehold: builder.entropyThrehold || 0.01,\r\n            maxTreeDepth: builder.maxTreeDepth || 70\r\n        });\r\n    }\r\n          \r\n    DecisionTree.prototype.predict = function (item) {\r\n        return predict(this.root, item);\r\n    }\r\n\r\n    /**\r\n     * Creates an instance of RandomForest\r\n     * with specific number of trees\r\n     *\r\n     * @constructor\r\n     * @param builder - contains training set and some\r\n     *                  configuration parameters for\r\n     *                  building decision trees\r\n     */\r\n    function RandomForest(builder, treesNumber) {\r\n        this.trees = buildRandomForest(builder, treesNumber);\r\n    }\r\n          \r\n    RandomForest.prototype.predict = function (item) {\r\n        return predictRandomForest(this.trees, item);\r\n    }\r\n    \r\n    /**\r\n     * Transforming array to object with such attributes \r\n     * as elements of array (afterwards it can be used as HashSet)\r\n     */\r\n    function arrayToHashSet(array) {\r\n        let hashSet = {};\r\n        if (array) {\r\n            for(let i in array) {\r\n                let attr = array[i];\r\n                hashSet[attr] = true;\r\n            }\r\n        }\r\n        return hashSet;\r\n    }\r\n    \r\n    /**\r\n     * Calculating how many objects have the same \r\n     * values of specific attribute.\r\n     *\r\n     * @param items - array of objects\r\n     *\r\n     * @param attr  - letiable with name of attribute, \r\n     *                which embedded in each object\r\n     */\r\n    function countUniqueValues(items, attr) {\r\n        let counter = {};\r\n\r\n        // detecting different values of attribute\r\n        for (let i = items.length - 1; i >= 0; i--) {\r\n            // items[i][attr] - value of attribute\r\n            counter[items[i][attr]] = 0;\r\n        }\r\n          \r\n        // counting number of occurrences of each of values\r\n        // of attribute\r\n        for (let i = items.length - 1; i >= 0; i--) {\r\n            counter[items[i][attr]] += 1;\r\n        }\r\n\r\n        return counter;\r\n    }\r\n    \r\n    /**\r\n     * Calculating entropy of array of objects \r\n     * by specific attribute.\r\n     *\r\n     * @param items - array of objects\r\n     *\r\n     * @param attr  - letiable with name of attribute, \r\n     *                which embedded in each object\r\n     */\r\n    function entropy(items, attr) {\r\n        // counting number of occurrences of each of values\r\n        // of attribute\r\n        let counter = countUniqueValues(items, attr);\r\n\r\n        let entropy = 0;\r\n        let p;\r\n        for (let i in counter) {\r\n            p = counter[i] / items.length;\r\n            entropy += -p * Math.log(p);\r\n        }\r\n\r\n        return entropy;\r\n    }\r\n          \r\n    /**\r\n     * Splitting array of objects by value of specific attribute, \r\n     * using specific predicate and pivot.\r\n     *\r\n     * Items which matched by predicate will be copied to \r\n     * the new array called 'match', and the rest of the items \r\n     * will be copied to array with name 'notMatch'\r\n     *\r\n     * @param items - array of objects\r\n     *\r\n     * @param attr  - letiable with name of attribute,\r\n     *                which embedded in each object\r\n     *\r\n     * @param predicate - function(x, y) \r\n     *                    which returns 'true' or 'false'\r\n     *\r\n     * @param pivot - used as the second argument when \r\n     *                calling predicate function:\r\n     *                e.g. predicate(item[attr], pivot)\r\n     */\r\n    function split(items, attr, predicate, pivot) {\r\n        let match = [];\r\n        let notMatch = [];\r\n\r\n        let item,\r\n            attrValue;\r\n          \r\n        for (let i = items.length - 1; i >= 0; i--) {\r\n            item = items[i];\r\n            attrValue = item[attr];\r\n\r\n            if (predicate(attrValue, pivot)) {\r\n                match.push(item);\r\n            } else {\r\n                notMatch.push(item);\r\n            }\r\n        };\r\n\r\n        return {\r\n            match: match,\r\n            notMatch: notMatch\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Finding value of specific attribute which is most frequent\r\n     * in given array of objects.\r\n     *\r\n     * @param items - array of objects\r\n     *\r\n     * @param attr  - letiable with name of attribute, \r\n     *                which embedded in each object\r\n     */\r\n    function mostFrequentValue(items, attr) {\r\n        // counting number of occurrences of each of values\r\n        // of attribute\r\n        let counter = countUniqueValues(items, attr);\r\n\r\n        let mostFrequentCount = 0;\r\n        let mostFrequentValue;\r\n\r\n        for (let value in counter) {\r\n            if (counter[value] > mostFrequentCount) {\r\n                mostFrequentCount = counter[value];\r\n                mostFrequentValue = value;\r\n            }\r\n        };\r\n\r\n        return mostFrequentValue;\r\n    }\r\n          \r\n    let predicates = {\r\n        '===': function (a, b) { return a === b },\r\n        '>=': function (a, b) { return a >= b }\r\n    };\r\n\r\n    /**\r\n     * Function for building decision tree\r\n     */\r\n    function buildDecisionTree(builder) {\r\n\r\n        let trainingSet = builder.trainingSet;\r\n        let minItemsCount = builder.minItemsCount;\r\n        let categoryAttr = builder.categoryAttr;\r\n        let entropyThrehold = builder.entropyThrehold;\r\n        let maxTreeDepth = builder.maxTreeDepth;\r\n        let ignoredAttributes = builder.ignoredAttributes;\r\n\r\n        if ((maxTreeDepth === 0) || (trainingSet.length <= minItemsCount)) {\r\n            // restriction by maximal depth of tree\r\n            // or size of training set is to small\r\n            // so we have to terminate process of building tree\r\n            return {\r\n                category: mostFrequentValue(trainingSet, categoryAttr)\r\n            };\r\n        }\r\n\r\n        let initialEntropy = entropy(trainingSet, categoryAttr);\r\n\r\n        if (initialEntropy <= entropyThrehold) {\r\n            // entropy of training set too small\r\n            // (it means that training set is almost homogeneous),\r\n            // so we have to terminate process of building tree\r\n            return {\r\n                category: mostFrequentValue(trainingSet, categoryAttr)\r\n            };\r\n        }\r\n\r\n        // used as hash-set for avoiding the checking of split by rules\r\n        // with the same 'attribute-predicate-pivot' more than once\r\n        let alreadyChecked = {};\r\n          \r\n        // this letiable expected to contain rule, which splits training set\r\n        // into subsets with smaller values of entropy (produces informational gain)\r\n        let bestSplit = {gain: 0};\r\n\r\n        for (let i = trainingSet.length - 1; i >= 0; i--) {\r\n            let item = trainingSet[i];\r\n\r\n            // iterating over all attributes of item\r\n            for (let attr in item) {\r\n                if ((attr === categoryAttr) || ignoredAttributes[attr]) {\r\n                    continue;\r\n                }\r\n\r\n                // let the value of current attribute be the pivot\r\n                let pivot = item[attr];\r\n\r\n                // pick the predicate\r\n                // depending on the type of the attribute value\r\n                let predicateName;\r\n                if (typeof pivot === 'number') {\r\n                    predicateName = '>=';\r\n                } else {\r\n                    // there is no sense to compare non-numeric attributes\r\n                    // so we will check only equality of such attributes\r\n                    predicateName = '===';\r\n                }\r\n\r\n                let attrPredPivot = attr + predicateName + pivot;\r\n                if (alreadyChecked[attrPredPivot]) {\r\n                    // skip such pairs of 'attribute-predicate-pivot',\r\n                    // which been already checked\r\n                    continue;\r\n                }\r\n                alreadyChecked[attrPredPivot] = true;\r\n\r\n                let predicate = predicates[predicateName];\r\n          \r\n                // splitting training set by given 'attribute-predicate-value'\r\n                let currSplit = split(trainingSet, attr, predicate, pivot);\r\n\r\n                // calculating entropy of subsets\r\n                let matchEntropy = entropy(currSplit.match, categoryAttr);\r\n                let notMatchEntropy = entropy(currSplit.notMatch, categoryAttr);\r\n\r\n                // calculating informational gain\r\n                let newEntropy = 0;\r\n                newEntropy += matchEntropy * currSplit.match.length;\r\n                newEntropy += notMatchEntropy * currSplit.notMatch.length;\r\n                newEntropy /= trainingSet.length;\r\n                let currGain = initialEntropy - newEntropy;\r\n\r\n                if (currGain > bestSplit.gain) {\r\n                    // remember pairs 'attribute-predicate-value'\r\n                    // which provides informational gain\r\n                    bestSplit = currSplit;\r\n                    bestSplit.predicateName = predicateName;\r\n                    bestSplit.predicate = predicate;\r\n                    bestSplit.attribute = attr;\r\n                    bestSplit.pivot = pivot;\r\n                    bestSplit.gain = currGain;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!bestSplit.gain) {\r\n            // can't find optimal split\r\n            return { category: mostFrequentValue(trainingSet, categoryAttr) };\r\n        }\r\n\r\n        // building subtrees\r\n          \r\n        builder.maxTreeDepth = maxTreeDepth - 1;\r\n\r\n        builder.trainingSet = bestSplit.match;\r\n        let matchSubTree = buildDecisionTree(builder);\r\n\r\n        builder.trainingSet = bestSplit.notMatch;\r\n        let notMatchSubTree = buildDecisionTree(builder);\r\n\r\n        return {\r\n            attribute: bestSplit.attribute,\r\n            predicate: bestSplit.predicate,\r\n            predicateName: bestSplit.predicateName,\r\n            pivot: bestSplit.pivot,\r\n            match: matchSubTree,\r\n            notMatch: notMatchSubTree,\r\n            matchedCount: bestSplit.match.length,\r\n            notMatchedCount: bestSplit.notMatch.length\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Classifying item, using decision tree\r\n     */\r\n    function predict(tree, item) {\r\n        let attr,\r\n            value,\r\n            predicate,\r\n            pivot;\r\n        \r\n        // Traversing tree from the root to leaf\r\n        while(true) {\r\n          \r\n            if (tree.category) {\r\n                // only leafs contains predicted category\r\n                return tree.category;\r\n            }\r\n\r\n            attr = tree.attribute;\r\n            value = item[attr];\r\n\r\n            predicate = tree.predicate;\r\n            pivot = tree.pivot;\r\n\r\n            // move to one of subtrees\r\n            if (predicate(value, pivot)) {\r\n                tree = tree.match;\r\n            } else {\r\n                tree = tree.notMatch;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Building array of decision trees\r\n     */\r\n    function buildRandomForest(builder, treesNumber) {\r\n        let items = builder.trainingSet;\r\n          \r\n        // creating training sets for each tree\r\n        let trainingSets = [];\r\n        for (let t = 0; t < treesNumber; t++) {\r\n            trainingSets[t] = [];\r\n        }\r\n        for (let i = items.length - 1; i >= 0 ; i--) {\r\n          // assigning items to training sets of each tree\r\n          // using 'round-robin' strategy\r\n          let correspondingTree = i % treesNumber;\r\n          trainingSets[correspondingTree].push(items[i]);\r\n        }\r\n\r\n        // building decision trees\r\n        let forest = [];\r\n        for (let t = 0; t < treesNumber; t++) {\r\n            builder.trainingSet = trainingSets[t];\r\n\r\n            let tree = new DecisionTree(builder);\r\n            forest.push(tree);\r\n        }\r\n        return forest;\r\n    }\r\n\r\n    /**\r\n     * Each of decision tree classifying item\r\n     * ('voting' that item corresponds to some class).\r\n     *\r\n     * This function returns hash, which contains \r\n     * all classifying results, and number of votes \r\n     * which were given for each of classifying results\r\n     */\r\n    function predictRandomForest(forest, item) {\r\n        let result = {};\r\n        for (let i in forest) {\r\n            let tree = forest[i];\r\n            let prediction = tree.predict(item);\r\n            result[prediction] = result[prediction] ? result[prediction] + 1 : 1;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    let exports = {};\r\n    exports.DecisionTree = DecisionTree;\r\n    exports.RandomForest = RandomForest;\r\n    return exports;\r\n})();\r\n\r\nexport default dt;","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport dt from './utils';\r\nimport { csvContext } from '../context/csv-context';\r\nimport './DecisionTree.css';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from '../utils/CsvReader';\r\nimport CsvTable from '../utils/CsvTable';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FunctionsIcon from '@material-ui/icons/Functions';\r\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\r\nimport TitleBar from '../utils/TitleBar';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        '& > *': {\r\n          margin: theme.spacing(1),\r\n          width: '25ch',\r\n        },\r\n    },\r\n    button: {\r\n        margin: theme.spacing(1),\r\n        width: '100%',\r\n    },\r\n    formControl: {\r\n      margin: theme.spacing(1),\r\n      minWidth: 120,\r\n    },\r\n    selectEmpty: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n    descDiv: {\r\n        background: '#505050', \r\n        width: '100%', \r\n        padding: '15px',\r\n        fontSize: '14px',\r\n    },\r\n    borderDiv: {\r\n        marginBottom: '20px', \r\n        padding: '10px', \r\n        borderBottom: '1px solid white',\r\n    }\r\n}));\r\n\r\nconst DecisionTree = () => {\r\n    const classes = useStyles();\r\n    const { csv } = useContext(csvContext);\r\n    const [columns, setColumns] = useState([]);\r\n    const [dTree, setDTree] = useState();\r\n    const [config, setConfig] = useState({\r\n        trainingSet: null, \r\n        categoryAttr: '', \r\n        ignoredAttributes: [] \r\n    })\r\n\r\n    const [predictionForm, setPredictionForm] = useState({\r\n        columns: [],\r\n        details: {}\r\n    });\r\n\r\n    const scrollToRef = (ref) => window.scrollTo(0, ref.current.offsetTop) \r\n    const [error, setError] = useState('');\r\n    const [prediction, setPrediction] = useState('')\r\n\r\n    useEffect( () => {\r\n        if (csv) {\r\n            async function Fetch() {\r\n                setDTree(null);\r\n                dT.current.innerHTML = null\r\n                let cols = await csv.columnNames()\r\n                let [lastItem] = cols.slice(-1)\r\n                setColumns(cols);\r\n                setConfig({\r\n                    trainingSet: await csv.toArray(),\r\n                    categoryAttr: lastItem,\r\n                    ignoredAttributes: [] \r\n                })\r\n            }\r\n            Fetch();\r\n        }\r\n    }, [csv]) \r\n\r\n    useEffect(() => {\r\n        if (dTree) {\r\n            let reqCols = columns.filter(n => !config.ignoredAttributes.includes(n))\r\n            reqCols = reqCols.filter(n => n !== config.categoryAttr)\r\n            let details = {};\r\n            reqCols.forEach(col => {\r\n                details[col] = '';\r\n            });\r\n            setPredictionForm({\r\n                columns: reqCols,\r\n                details: details\r\n            })\r\n        }\r\n    }, [columns, config, dTree])\r\n\r\n    const dT = useRef();\r\n\r\n    const ignoreColumn = (event) => {\r\n        let array = config.ignoredAttributes;\r\n        if (array.includes(event.target.name)) {\r\n            const newArray = array.filter((col) => col !== event.target.name);\r\n            setConfig({\r\n                ...config,\r\n                ignoredAttributes: newArray\r\n            })\r\n        } else {\r\n            array.push(event.target.name)\r\n            setConfig({\r\n                ...config,\r\n                ignoredAttributes: array\r\n            })\r\n        }\r\n    }\r\n\r\n    const chooseCategoryAttr = (event) => {\r\n        setConfig({\r\n            ...config,\r\n            categoryAttr: event.target.value\r\n        })\r\n    }\r\n\r\n    const changeDetails = (event) => {\r\n        let details = predictionForm.details\r\n        details[event.target.name] = event.target.value\r\n        setPredictionForm({\r\n            ...predictionForm,\r\n            details: details\r\n        })\r\n    }\r\n\r\n    // Recursive (DFS) function for displaying inner structure of decision tree\r\n    const treeToHtml = (tree) => {\r\n        // only leafs containing category\r\n        if (tree.category) {\r\n            return  ['<ul>',\r\n                        '<li>',\r\n                            '<button>',\r\n                                '<b>', tree.category, '</b>',\r\n                            '</button>',\r\n                        '</li>',\r\n                    '</ul>'].join('');\r\n        }\r\n        \r\n        return  ['<ul>',\r\n                    '<li>',\r\n                        '<button>',\r\n                            '<b>', tree.attribute, ' ', tree.predicateName, ' ', tree.pivot, ' ?</b>',\r\n                        '</button>',\r\n                        '<ul>',\r\n                            '<li>',\r\n                                '<button>yes</button>',\r\n                                treeToHtml(tree.match),\r\n                            '</li>',\r\n                            '<li>', \r\n                                '<button>no</button>',\r\n                                treeToHtml(tree.notMatch),\r\n                            '</li>',\r\n                        '</ul>',\r\n                    '</li>',\r\n                '</ul>'].join('');\r\n    }\r\n\r\n    const generateTree = () => {\r\n        try {\r\n            // Building Decision Tree\r\n            let decisionTree = new dt.DecisionTree(config);\r\n            setDTree(decisionTree)\r\n            // Displaying Decision Tree\r\n            dT.current.innerHTML = treeToHtml(decisionTree.root);\r\n        } catch (err) {\r\n            setError(err)\r\n        }\r\n    }\r\n\r\n    const predictTree = () => {\r\n        // Building Decision Tree\r\n        let decisionTree = new dt.DecisionTree(config);\r\n\r\n        // Testing Decision Tree and Random Forest\r\n        let details = predictionForm.details;\r\n\r\n        let decisionTreePrediction = decisionTree.predict(details);\r\n        setPrediction(decisionTreePrediction)\r\n        // Displaying Decision Tree\r\n        dT.current.innerHTML = treeToHtml(decisionTree.root);\r\n    }\r\n    \r\n    return (\r\n        <Grid container>\r\n            <Grid item md={6} xs={12}>\r\n                <TitleBar name=\"Decision Tree\" tags={['Classification', 'Tree']} />\r\n                <CsvReader />\r\n                <CsvTable />\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n                {csv ? (\r\n                        <div style={{ padding: '10px' }}>\r\n                            {error && (\r\n                                <Alert onClose={() => setError('')} severity=\"error\">\r\n                                    {error}\r\n                                </Alert>\r\n                            )}\r\n                            {columns && (\r\n                                <React.Fragment>  \r\n                                    <div className={classes.borderDiv}>\r\n                                        <Paper className={classes.descDiv}>\r\n                                            Select the column to be predicted\r\n                                        </Paper>\r\n                                        <FormControl className={classes.formControl}>\r\n                                            <Select\r\n                                                value={config.categoryAttr}\r\n                                                onChange={chooseCategoryAttr}\r\n                                                displayEmpty\r\n                                                className={classes.selectEmpty}\r\n                                                inputProps={{ 'aria-label': 'Without label' }}\r\n                                            >\r\n                                                {columns.map((column, index) => \r\n                                                    <MenuItem key={index} value={column}>{column}</MenuItem>\r\n                                                )}\r\n                                            </Select>\r\n                                            <FormHelperText>Select a column</FormHelperText>\r\n                                        </FormControl>\r\n                                    </div>\r\n                                    <div className={classes.borderDiv}>\r\n                                        <Paper className={classes.descDiv}>\r\n                                            Check the columns to be ignored\r\n                                        </Paper>\r\n                                        {columns.map((column, index) => \r\n                                            <div key={index}>\r\n                                                {column !== config.categoryAttr && (\r\n                                                    <FormControlLabel\r\n                                                        control={<Checkbox \r\n                                                                    checked={config.ignoredAttributes.includes(column)} \r\n                                                                    color=\"default\" \r\n                                                                    name={column}\r\n                                                                    onChange={ignoreColumn} \r\n                                                                />}\r\n                                                        label={column}       \r\n                                                    />\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            )}\r\n\r\n\r\n                            <div style={{ textAlign: 'center' }}>\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={generateTree}>Generate Decision Tree</Button>\r\n                            </div>\r\n                            {dTree && (\r\n                                <div style={{ marginTop: '20px', padding: '10px' }}>\r\n                                    <Paper className={classes.descDiv}>\r\n                                        Make a Prediction\r\n                                    </Paper>\r\n                                    <form className={classes.root} noValidate autoComplete=\"off\">\r\n                                        {predictionForm.columns.map((column, index) => \r\n                                            <TextField \r\n                                                key={index}  \r\n                                                label={column} \r\n                                                name={column}\r\n                                                value={predictionForm.details.column}\r\n                                                onChange={changeDetails}\r\n                                            />\r\n                                        )}\r\n                                    </form>\r\n                                    <Grid style={{ marginBottom: '20px' }} container spacing={4}>\r\n                                        <Grid item xs={6}>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                className={classes.button}\r\n                                                startIcon={<FunctionsIcon />}\r\n                                                onClick={predictTree}\r\n                                            >\r\n                                                Predict\r\n                                            </Button>      \r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                className={classes.button}\r\n                                                startIcon={<AccountTreeIcon />}\r\n                                                onClick={() => {scrollToRef(dT)}}\r\n                                            >\r\n                                                View Tree\r\n                                            </Button>       \r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </div>\r\n                            )}\r\n                            {prediction && (\r\n                                <Alert onClose={() => {setPrediction('')}} severity=\"success\">\r\n                                    The predicted value is {prediction}\r\n                                </Alert>\r\n                            )}\r\n                        </div>\r\n                ) : (\r\n                        <div style={{ paddingTop: '50px', textAlign: 'center' }}>\r\n                            Please select a dataset \r\n                        </div>\r\n                )}\r\n                \r\n            </Grid>\r\n            {dTree && (\r\n                <Paper style={{ width: '100%', margin: '20px', padding: '20px', textAlign: 'center', backgroundColor: '#000000' }}>\r\n                    <Typography variant=\"h4\" gutterBottom>\r\n                        Decision Tree\r\n                    </Typography>\r\n                </Paper>\r\n            )}\r\n            <div className=\"tree-wrapper\">\r\n                <div className=\"tree\" ref={dT} />\r\n            </div>\r\n        </Grid>\r\n        \r\n    );\r\n}\r\n\r\nexport default DecisionTree;\r\n","let figue = function () {\r\n\r\n\r\n\tfunction euclidianDistance (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet d = 0 ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\td += Math.pow (vec1[i] - vec2[i], 2)\r\n\t\td = Math.sqrt (d) ;\r\n\t\treturn d ;\r\n\t}\r\n\r\n\tfunction manhattanDistance (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet d = 0 ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\td += Math.abs (vec1[i] - vec2[i])\r\n\t\treturn d ;\r\n\t}\r\n\r\n\tfunction maxDistance (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet d = 0 ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\td = Math.max (d , Math.abs (vec1[i] - vec2[i])) ;\r\n\t\treturn d ;\r\n\t}\r\n\r\n\tfunction addVectors (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet vec = new Array(N) ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\tvec[i] = vec1[i] + vec2[i] ;\r\n\t\treturn vec ;\r\n\t}\t\r\n\r\n\tfunction multiplyVectorByValue (value , vec) {\r\n\t\tlet N = vec.length ;\r\n\t\tlet v = new Array(N) ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\tv[i] = value * vec[i] ;\r\n\t\treturn v ;\r\n\t}\t\r\n\t\r\n\t// function vectorDotProduct (vec1, vec2) {\r\n\t// \tlet N = vec1.length ;\r\n\t// \tlet s = 0 ;\r\n\t// \tfor (let i = 0 ; i < N ; i++)\r\n\t// \t\ts += vec1[i] * vec2[i] ;\r\n\t// \treturn s ;\r\n\t// }\r\n\t\r\n\r\n\tfunction repeatChar(c, n) {\r\n\t\tlet str = \"\";\r\n\t\tfor (let i = 0 ; i < n ; i++)\r\n\t\t\tstr += c ;\r\n\t\treturn str ;\r\n\t}\r\n\t\r\n\tfunction calculateCentroid (c1Size , c1Centroid , c2Size , c2Centroid) {\r\n\t\tlet newCentroid = new Array(c1Centroid.length) ;\r\n\t\tlet newSize = c1Size + c2Size ;\r\n\t\tfor (let i = 0 ; i < c1Centroid.length ; i++) \r\n\t\t\tnewCentroid[i] = (c1Size * c1Centroid[i] + c2Size * c2Centroid[i]) / newSize ;\r\n\t\treturn newCentroid ;\t\r\n\t}\r\n\r\n\r\n\tfunction centerString(str, width) {\r\n\t\tlet diff = width - str.length ;\r\n\t\tif (diff < 0)\r\n\t\t\treturn ;\r\n\r\n\t\tlet halfdiff = Math.floor(diff / 2) ;\r\n\t\treturn repeatChar (\" \" , halfdiff) + str + repeatChar (\" \" , diff - halfdiff)  ;\r\n\t}\r\n\r\n\tfunction putString(str, width, index) {\r\n\t\tlet diff = width - str.length ;\r\n\t\tif (diff < 0)\r\n\t\t\treturn ;\r\n\r\n\t\treturn repeatChar (\" \" , index) + str + repeatChar (\" \" , width - (str.length+index)) ;\r\n\t}\r\n\r\n\tfunction prettyVector(vector) {\r\n\t\tlet vals = new Array(vector.length) ;\r\n\t\tlet precision = Math.pow(10, figue.PRINT_VECTOR_VALUE_PRECISION) ; \r\n\t\tfor (let i = 0 ; i < vector.length ; i++)\r\n\t\t\tvals[i] = Math.round(vector[i]*precision)/precision ;\r\n\t\treturn vals.join(\",\")\r\n\t}\r\n\r\n\tfunction prettyValue(value) {\r\n\t\tlet precision = Math.pow(10, figue.PRINT_VECTOR_VALUE_PRECISION) ; \r\n\t\treturn String (Math.round(value*precision)/precision) ;\r\n\t}\r\n\r\n\tfunction generateDendogram(tree, sep, balanced, withLabel, withCentroid, withDistance) {\r\n\t\tlet lines = [];\r\n\t\tlet centroidstr = prettyVector(tree.centroid) ;\r\n\t\tif (tree.isLeaf()) {\r\n\t\t\tlet labelstr = String(tree.label) ;\r\n\t\t\tlet len = 1;\r\n\t\t\tif (withCentroid) \r\n\t\t\t\tlen = Math.max(centroidstr.length , len) ;\r\n\t\t\tif (withLabel)\r\n\t\t\t\tlen = Math.max(labelstr.length , len) ;\r\n\r\n\t\t\tlines.push (centerString (\"|\" , len)) ;\r\n\t\t\tif (withCentroid) \r\n\t\t\t\tlines.push (centerString (centroidstr , len)) ;\r\n\t\t\tif (withLabel) \r\n\t\t\t\tlines.push (centerString (labelstr , len)) ;\r\n\r\n\t\t} else {\r\n\t\t\tlet distancestr = prettyValue(tree.dist) ;\r\n\t\t\tlet left_dendo = generateDendogram(tree.left ,sep, balanced,withLabel,withCentroid, withDistance) ;\r\n\t\t\tlet right_dendo = generateDendogram(tree.right, sep, balanced,withLabel,withCentroid,withDistance) ;\r\n\t\t\tlet left_bar_ix = left_dendo[0].indexOf(\"|\") ;\r\n\t\t\tlet right_bar_ix = right_dendo[0].indexOf(\"|\") ;\r\n\t\r\n\t\t\t// calculate nb of chars of each line\r\n\t\t\tlet len = sep + right_dendo[0].length + left_dendo[0].length ;\r\n\t\t\tif (withCentroid) \r\n\t\t\t\tlen = Math.max(centroidstr.length , len) ;\r\n\t\t\tif (withDistance) \r\n\t\t\t\tlen = Math.max(distancestr.length , len) ;\r\n\r\n\r\n\t\t\t// calculate position of new vertical bar\r\n\t\t\tlet bar_ix =  left_bar_ix + Math.floor(( left_dendo[0].length - (left_bar_ix) + sep + (1+right_bar_ix)) / 2) ;\r\n\t\t\t\r\n\t\t\t// add line with the new vertical bar \r\n\t\t\tlines.push (putString (\"|\" , len , bar_ix)) ;\r\n\t\t\tif (withCentroid) {\r\n\t\t\t\tlines.push (putString (centroidstr , len , bar_ix - Math.floor (centroidstr.length / 2))) ; //centerString (centroidstr , len)) ;\r\n\t\t\t}\r\n\t\t\tif (withDistance) {\r\n\t\t\t\tlines.push (putString (distancestr , len , bar_ix - Math.floor (distancestr.length / 2))) ; //centerString (centroidstr , len)) ;\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t// add horizontal line to connect the vertical bars of the lower level\r\n\t\t\tlet hlineLen = sep + (left_dendo[0].length -left_bar_ix) + right_bar_ix+1 ;\r\n\t\t\tlet hline = repeatChar (\"_\" , hlineLen) ;\r\n\t\t\tlines.push (putString(hline, len, left_bar_ix)) ;\r\n\t\r\n\t\t\t// IF: the user want the tree to be balanced: all the leaves have to be at the same level\r\n\t\t\t// THEN: if the left and right subtrees have not the same depth, add extra vertical bars to the top of the smallest subtree\r\n\t\t\tif (balanced &&  (left_dendo.length !==right_dendo.length)) {\r\n\t\t\t\tlet shortest ;\r\n\t\t\t\tlet longest ;\r\n\t\t\t\tif (left_dendo.length > right_dendo.length) {\r\n\t\t\t\t\tlongest = left_dendo ;\r\n\t\t\t\t\tshortest = right_dendo ;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlongest = right_dendo ;\r\n\t\t\t\t\tshortest = left_dendo ;\r\n\t\t\t\t}\r\n\t\t\t\t// repeat the first line containing the vertical bar\r\n\t\t\t\tlet header = shortest[0] ;\r\n\t\t\t\tlet toadd = longest.length - shortest.length ;\r\n\t\t\t\tfor (let i = 0 ; i < toadd ; i++) {\r\n\t\t\t\t\tshortest.splice (0,0,header) ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// merge the left and right subtrees \r\n\t\t\tfor (let i = 0 ; i < Math.max (left_dendo.length , right_dendo.length) ; i++) {\r\n\t\t\t\tlet left = \"\" ;\r\n\t\t\t\tif (i < left_dendo.length)\r\n\t\t\t\t\tleft = left_dendo[i] ;\r\n\t\t\t\telse\r\n\t\t\t\t\tleft = repeatChar (\" \" , left_dendo[0].length) ;\r\n\t\r\n\t\t\t\tlet right = \"\" ;\r\n\t\t\t\tif (i < right_dendo.length)\r\n\t\t\t\t\tright = right_dendo[i] ;\r\n\t\t\t\telse\r\n\t\t\t\t\tright = repeatChar (\" \" , right_dendo[0].length) ;\r\n\t\t\t\tlines.push(left + repeatChar (\" \" , sep) + right) ;\r\n\t\t\t\t// eslint-disable-next-line\t\r\n\t\t\t\tlet l = left + repeatChar (\" \" , sep) + right ;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn lines ;\r\n\t}\r\n\r\n\r\n\r\n\tfunction agglomerate (labels, vectors, distance, linkage) {\r\n\t\tlet N = vectors.length ;\r\n\t\tlet dMin = new Array(N) ;\r\n\t\tlet cSize = new Array(N) ;\r\n\t\tlet matrixObj = new figue.Matrix(N,N);\r\n\t\tlet distMatrix = matrixObj.mtx ;\r\n\t\tlet clusters = new Array(N) ;\r\n\r\n\t\tlet c1, c2, c1Cluster, c2Cluster, i, j, p, root , newCentroid ;\r\n\r\n\t\tif (distance === figue.EUCLIDIAN_DISTANCE)\r\n\t\t\tdistance = euclidianDistance ;\r\n\t\telse if (distance === figue.MANHATTAN_DISTANCE)\r\n\t\t\tdistance = manhattanDistance ;\r\n\t\telse if (distance === figue.MAX_DISTANCE)\r\n\t\t\tdistance = maxDistance ;\r\n\r\n\t\t// Initialize distance matrix and vector of closest clusters\r\n\t\tfor (i = 0 ; i < N ; i++) {\r\n\t\t\tdMin[i] = 0 ;\r\n\t\t\tfor (j = 0 ; j < N ; j++) {\r\n\t\t\t\tif (i === j)\r\n\t\t\t\t\tdistMatrix[i][j] = Infinity ;\r\n\t\t\t\telse\r\n\t\t\t\t\tdistMatrix[i][j] = distance(vectors[i] , vectors[j]) ;\r\n\t\r\n\t\t\t\tif (distMatrix[i][dMin[i]] > distMatrix[i][j] )\r\n\t\t\t\t\tdMin[i] = j ;\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t// create leaves of the tree\r\n\t\tfor (i = 0 ; i < N ; i++) {\r\n\t\t\tclusters[i] = [] ;\r\n\t\t\tclusters[i][0] = new Node (labels[i], null, null, 0, vectors[i]) ;\r\n\t\t\tcSize[i] = 1 ;\r\n\t\t}\r\n\t\t\r\n\t\t// Main loop\r\n\t\tfor (p = 0 ; p < N-1 ; p++) {\r\n\t\t\t// find the closest pair of clusters\r\n\t\t\tc1 = 0 ;\r\n\t\t\tfor (i = 0 ; i < N ; i++) {\r\n\t\t\t\tif (distMatrix[i][dMin[i]] < distMatrix[c1][dMin[c1]])\r\n\t\t\t\t\tc1 = i ;\r\n\t\t\t}\r\n\t\t\tc2 = dMin[c1] ;\r\n\t\r\n\t\t\t// create node to store cluster info \r\n\t\t\tc1Cluster = clusters[c1][0] ;\r\n\t\t\tc2Cluster = clusters[c2][0] ;\r\n\r\n\t\t\tnewCentroid = calculateCentroid ( c1Cluster.size , c1Cluster.centroid , c2Cluster.size , c2Cluster.centroid ) ;\r\n\t\t\tlet newCluster = new Node (-1, c1Cluster, c2Cluster , distMatrix[c1][c2] , newCentroid) ;\r\n\t\t\tclusters[c1].splice(0,0, newCluster) ;\r\n\t\t\tcSize[c1] += cSize[c2] ;\r\n\t\t\r\n\t\t\t// overwrite row c1 with respect to the linkage type\r\n\t\t\tfor (j = 0 ; j < N ; j++) {\r\n\t\t\t\tif (linkage === figue.SINGLE_LINKAGE) {\r\n\t\t\t\t\tif (distMatrix[c1][j] > distMatrix[c2][j])\r\n\t\t\t\t\t\tdistMatrix[j][c1] = distMatrix[c1][j] = distMatrix[c2][j] ;\r\n\t\t\t\t} else if (linkage === figue.COMPLETE_LINKAGE) {\r\n\t\t\t\t\tif (distMatrix[c1][j] < distMatrix[c2][j])\r\n\t\t\t\t\t\tdistMatrix[j][c1] = distMatrix[c1][j] = distMatrix[c2][j] ;\r\n\t\t\t\t} else if (linkage === figue.AVERAGE_LINKAGE) {\r\n\t\t\t\t\tlet avg = ( cSize[c1] * distMatrix[c1][j] + cSize[c2] * distMatrix[c2][j])  / (cSize[c1] + cSize[j]) \r\n\t\t\t\t\tdistMatrix[j][c1] = distMatrix[c1][j] = avg ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdistMatrix[c1][c1] = Infinity ;\r\n\t\t\r\n\t\t\t// infinity out old row c2 and column c2\r\n\t\t\tfor (i = 0 ; i < N ; i++)\r\n\t\t\t\tdistMatrix[i][c2] = distMatrix[c2][i] = Infinity ;\r\n\t\r\n\t\t\t// update dmin and replace ones that previous pointed to c2 to point to c1\r\n\t\t\tfor (j = 0; j < N ; j++) {\r\n\t\t\t\tif (dMin[j] === c2)\r\n\t\t\t\t\tdMin[j] = c1;\r\n\t\t\t\tif (distMatrix[c1][j] < distMatrix[c1][dMin[c1]]) \r\n\t\t\t\t\tdMin[c1] = j;\r\n\t\t\t}\r\n\t\r\n\t\t\t// keep track of the last added cluster\r\n\t\t\troot = newCluster ;\r\n\t\t}\r\n\t\r\n\t\treturn root ;\r\n\t}\r\n\r\n\r\n\t\r\n\tfunction getRandomVectors(k, vectors) {\r\n\t\t/*  Returns a array of k distinct vectors randomly selected from a the input array of vectors\r\n\t\t\tReturns null if k > n or if there are less than k distinct objects in vectors */\r\n\t\t\r\n\t\tlet n = vectors.length ;\r\n\t\tif ( k > n ) \r\n\t\t\treturn null ;\r\n\t\t\r\n\t\tlet selected_vectors = new Array(k) ;\r\n\t\tlet selected_indices = new Array(k) ;\r\n\t\t\r\n\t\tlet tested_indices = {};\r\n\t\tlet tested = 0 ;\r\n\t\tlet selected = 0 ;\r\n\t\tlet i , vector, select ;\r\n\t\twhile (selected < k) {\r\n\t\t\tif (tested === n)\r\n\t\t\t\treturn null ;\r\n\t\t\t\r\n\t\t\tlet random_index = Math.floor(Math.random()*(n)) ;\r\n\t\t\tif (random_index in tested_indices)\r\n\t\t\t\tcontinue ;\r\n\t\t\t\r\n\t\t\ttested_indices[random_index] = 1;\r\n\t\t\ttested++ ;\r\n\t\t\tvector = vectors[random_index] ;\r\n\t\t\tselect = true ;\r\n\t\t\tfor (i = 0 ; i < selected ; i++) {\r\n\t\t\t\tif ( vector.compare (selected_vectors[i]) ) {\r\n\t\t\t\t\tselect = false ;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (select) {\r\n\t\t\t\tselected_vectors[selected] = vector ;\r\n\t\t\t\tselected_indices[selected] = random_index ; \r\n\t\t\t\tselected++ ;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {'vectors': selected_vectors, 'indices': selected_indices} ;\r\n\t}\r\n\t\r\n\tfunction kmeans (k, vectors) {\r\n\t\tlet n = vectors.length ;\r\n\t\tlet assignments = new Array(n) ;\r\n\t\tlet clusterSizes = new Array(k) ;\r\n\t\tlet repeat = true ;\r\n\t\tlet nb_iters = 0 ;\r\n\t\tlet centroids = null ;\r\n\t\t\r\n\t\tlet t = getRandomVectors(k, vectors) ;\r\n\t\tif (t === null)\r\n\t\t\treturn null ;\r\n\t\telse\r\n\t\t\tcentroids = t.vectors ;\r\n\t\t\t\r\n\t\twhile (repeat) {\r\n\r\n\t\t\t// assignment step\r\n\t\t\tfor (let j = 0 ; j < k ; j++)\r\n\t\t\t\tclusterSizes[j] = 0 ;\r\n\t\t\t\r\n\t\t\tfor (let i = 0 ; i < n ; i++) {\r\n\t\t\t\tlet vector = vectors[i] ;\r\n\t\t\t\tlet mindist = Number.MAX_VALUE ;\r\n\t\t\t\tlet best ;\r\n\t\t\t\tlet dist;\r\n\t\t\t\tfor (let j = 0 ; j < k ; j++) {\r\n\t\t\t\t\tdist = euclidianDistance (centroids[j], vector)\r\n\t\t\t\t\tif (dist < mindist) {\r\n\t\t\t\t\t\tmindist = dist ;\r\n\t\t\t\t\t\tbest = j ;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tclusterSizes[best]++ ;\r\n\t\t\t\tassignments[i] = best ;\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// update centroids step\r\n\t\t\tlet newCentroids = new Array(k) ;\r\n\t\t\tfor (let j = 0 ; j < k ; j++)\r\n\t\t\t\tnewCentroids[j] = null ;\r\n\t\t\tlet cluster;\r\n\t\t\tfor (let i = 0 ; i < n ; i++) {\r\n\t\t\t\tcluster = assignments[i] ;\r\n\t\t\t\tif (newCentroids[cluster] === null)\r\n\t\t\t\t\tnewCentroids[cluster] = vectors[i] ;\r\n\t\t\t\telse\r\n\t\t\t\t\tnewCentroids[cluster] = addVectors (newCentroids[cluster] , vectors[i]) ;\t\r\n\t\t\t}\r\n\r\n\t\t\tfor (let j = 0 ; j < k ; j++) {\r\n\t\t\t\tnewCentroids[j] = multiplyVectorByValue (1/clusterSizes[j] , newCentroids[j]) ;\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t\t// check convergence\r\n\t\t\trepeat = false ;\r\n\t\t\tfor (let j = 0 ; j < k ; j++) {\r\n\t\t\t\tif (! newCentroids[j].compare (centroids[j])) {\r\n\t\t\t\t\trepeat = true ; \r\n\t\t\t\t\tbreak ; \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcentroids = newCentroids ;\r\n\t\t\tnb_iters++ ;\r\n\t\t\t\r\n\t\t\t// check nb of iters\r\n\t\t\tif (nb_iters > figue.KMEANS_MAX_ITERATIONS)\r\n\t\t\t\trepeat = false ;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn { 'centroids': centroids , 'assignments': assignments} ;\r\n\r\n\t}\r\n\t\r\n\tfunction fcmeans (k, vectors, epsilon, fuzziness) {\r\n\t\tlet membershipMatrix = new Matrix (vectors.length, k) ;\r\n\t\tlet repeat = true ;\r\n\t\tlet nb_iters = 0 ;\r\n\t\t\r\n\t\tlet centroids = null ;\r\n\t\t\r\n\t\tlet i,j,l, tmp, norm, max, diff ;\r\n\t\twhile (repeat) {\r\n\t\t\t// initialize or update centroids\r\n\t\t\tif (centroids === null) {\r\n\t\t\t\t\r\n\t\t\t\ttmp = getRandomVectors(k, vectors) ;\r\n\t\t\t\tif (tmp === null)\r\n\t\t\t\t\treturn null ;\r\n\t\t\t\telse\r\n\t\t\t\t\tcentroids = tmp.vectors ;\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tfor (j = 0 ; j < k; j++) {\r\n\t\t\t\t\tcentroids[j] = [] ;\r\n\t\t\t\t\tnorm = 0 ;\r\n\t\t\t\t\tfor (i = 0 ; i < membershipMatrix.rows ; i++) {\r\n\t\t\t\t\t\tnorm += Math.pow(membershipMatrix.mtx[i][j], fuzziness) ;\r\n\t\t\t\t\t\ttmp = multiplyVectorByValue( Math.pow(membershipMatrix.mtx[i][j], fuzziness) , vectors[i]) ;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (i === 0)\r\n\t\t\t\t\t\t\tcentroids[j] = tmp ;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tcentroids[j] = addVectors (centroids[j] , tmp) ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (norm > 0)\r\n\t\t\t\t\t\tcentroids[j] = multiplyVectorByValue(1/norm, centroids[j]);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t//alert(centroids);\r\n\t\t\t\r\n\t\t\t// update the degree of membership of each vector\r\n\t\t\tlet previousMembershipMatrix = membershipMatrix.copy() ;\r\n\t\t\tfor (i = 0 ; i < membershipMatrix.rows ; i++) {\r\n\t\t\t\tfor (j = 0 ; j < k ; j++) {\r\n\t\t\t\t\tmembershipMatrix.mtx[i][j] = 0;\r\n\t\t\t\t\tfor (l = 0 ; l < k ; l++) {\r\n\t\t\t\t\t\tif (euclidianDistance(vectors[i] , centroids[l]) === 0)\r\n\t\t\t\t\t\t\ttmp = 0 ;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttmp =  euclidianDistance(vectors[i] , centroids[j]) / euclidianDistance(vectors[i] , centroids[l]) ;\r\n\t\t\t\t\t\ttmp = Math.pow (tmp, 2/(fuzziness-1)) ;\r\n\t\t\t\t\t\tmembershipMatrix.mtx[i][j] += tmp ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (membershipMatrix.mtx[i][j] > 0)\r\n\t\t\t\t\t\tmembershipMatrix.mtx[i][j] = 1 / membershipMatrix.mtx[i][j] ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//alert(membershipMatrix) ;\r\n\t\t\t\r\n\t\t\t// check convergence\r\n\t\t\tmax = -1 ;\r\n\t\t\tfor (i = 0 ; i < membershipMatrix.rows ; i++)\r\n\t\t\t\tfor (j = 0 ; j < membershipMatrix.cols ; j++) {\r\n\t\t\t\t\tdiff = Math.abs(membershipMatrix.mtx[i][j] - previousMembershipMatrix.mtx[i][j]) ;\r\n\t\t\t\t\tif (diff > max)\r\n\t\t\t\t\t\tmax = diff ;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\tif (max < epsilon)\r\n\t\t\t\trepeat = false ;\r\n\r\n\t\t\tnb_iters++ ;\r\n\r\n\t\t\t// check nb of iters\r\n\t\t\tif (nb_iters > figue.FCMEANS_MAX_ITERATIONS)\r\n\t\t\t\trepeat = false ;\r\n\t\t}\r\n\t\treturn { 'centroids': centroids , 'membershipMatrix': membershipMatrix} ;\r\n\t\r\n\t}\r\n\t\r\n\t\t\t\r\n\tfunction Matrix (rows,cols) \r\n\t{\r\n\t\tthis.rows = rows ;\r\n\t\tthis.cols = cols ;\r\n\t\tthis.mtx = new Array(rows) ; \r\n\r\n\t\tfor (let i = 0 ; i < rows ; i++)\r\n\t\t{\r\n\t\t\tlet row = new Array(cols) ;\r\n\t\t\tfor (let j = 0 ; j < cols ; j++)\r\n\t\t\t\trow[j] = 0;\r\n\t\t\tthis.mtx[i] = row ;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction Node (label,left,right,dist, centroid) \r\n\t{\r\n\t\tthis.label = label ;\r\n\t\tthis.left = left ;\r\n\t\tthis.right = right ;\r\n\t\tthis.dist = dist ;\r\n\t\tthis.centroid = centroid ;\r\n\t\tif (left === null && right === null) {\r\n\t\t\tthis.size = 1 ;\r\n\t\t\tthis.depth = 0 ;\r\n\t\t} else {\r\n\t\t\tthis.size = left.size + right.size ;\r\n\t\t\tthis.depth = 1 + Math.max (left.depth , right.depth ) ;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\treturn { \r\n\t\tSINGLE_LINKAGE: 0,\r\n\t\tCOMPLETE_LINKAGE: 1,\r\n\t\tAVERAGE_LINKAGE:2 ,\r\n\t\tEUCLIDIAN_DISTANCE: 0,\r\n\t\tMANHATTAN_DISTANCE: 1,\r\n\t\tMAX_DISTANCE: 2,\r\n\t\tPRINT_VECTOR_VALUE_PRECISION: 2,\r\n\t\tKMEANS_MAX_ITERATIONS: 10,\r\n\t\tFCMEANS_MAX_ITERATIONS: 3,\r\n\r\n\t\tMatrix: Matrix,\r\n\t\tNode: Node,\r\n\t\tgenerateDendogram: generateDendogram,\r\n\t\tagglomerate: agglomerate,\r\n\t\tkmeans: kmeans,\r\n\t\tfcmeans: fcmeans\r\n\t}\r\n}() ;\r\n\r\n\r\nfigue.Matrix.prototype.toString = function() \r\n{\r\n\tlet lines = [] ;\r\n\tfor (let i = 0 ; i < this.rows ; i++) \r\n\t\tlines.push (this.mtx[i].join(\"\\t\")) ;\r\n\treturn lines.join (\"\\n\") ;\r\n}\r\n\r\n\r\nfigue.Matrix.prototype.copy = function() \r\n{\r\n\tlet duplicate = new figue.Matrix(this.rows, this.cols) ;\r\n\tfor (let i = 0 ; i < this.rows ; i++)\r\n\t\tduplicate.mtx[i] = this.mtx[i].slice(0); \r\n\treturn duplicate ;\r\n}\r\n\r\nfigue.Node.prototype.isLeaf = function() \r\n{\r\n\tif ((this.left === null) && (this.right === null))\r\n\t\treturn true ;\r\n\telse\r\n\t\treturn false ;\r\n}\r\n\r\nfigue.Node.prototype.buildDendogram = function (sep, balanced,withLabel,withCentroid, withDistance)\r\n{\r\n\tlet lines;\r\n\tlines = figue.generateDendogram(this, sep, balanced,withLabel,withCentroid, withDistance) ;\r\n\treturn lines.join (\"\\n\") ;\t\r\n}\r\n\r\n\r\n// Array.prototype.compare = function(testArr) {\r\n//     if (this.length !==testArr.length) return false;\r\n//     for (let i = 0; i < testArr.length; i++) {\r\n//         if (this[i].compare) { \r\n//             if (!this[i].compare(testArr[i])) return false;\r\n//         }\r\n//         if (this[i] !== testArr[i]) return false;\r\n//     }\r\n//     return true;\r\n// }\r\n\r\nexport default figue;","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { Formik } from 'formik';\r\nimport { csvContext } from '../../context/csv-context';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TitleBar from '../../utils/TitleBar';\r\nimport figue from './hc-hook';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from '../../utils/CsvReader';\r\nimport CsvTable from '../../utils/CsvTable';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\n\r\nimport './Dendogram.css';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        margin: theme.spacing(8, 4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        width: '80%',\r\n    },\r\n    selectEmpty: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    form: {\r\n        width: '90%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: '20px',\r\n    },\r\n    submit: {\r\n        width: '100px',\r\n    },\r\n}));\r\n\r\nconst HierarchicalClustering = () => {\r\n    const classes = useStyles();\r\n    const [error, setError] = useState('')\r\n    const { csv } = useContext(csvContext);\r\n    const [columnNames, setColumnNames] = useState([]);\r\n    const [label, setLabel] = useState();\r\n    const dendoGram = useRef();\r\n    const scrollToRef = (ref) => window.scrollTo(0, ref.current.offsetTop)\r\n\r\n    useEffect(() => {\r\n        if (csv == null) \r\n            return;\r\n        async function LoadColumnNames() {\r\n            const columns = await csv.columnNames();\r\n            setColumnNames(columns);\r\n            setLabel(columns[0]);\r\n        }\r\n        LoadColumnNames();\r\n    }, [csv, setColumnNames]);\r\n\r\n    return (\r\n        <div>\r\n            <Grid container>\r\n                <Grid item md={6} xs={12}>\r\n                    <TitleBar name=\"Hieararchical Clustering\" tags={['Clustering', 'Dendogram']} />\r\n                    <CsvReader />\r\n                    <CsvTable />\r\n                </Grid>\r\n                <Grid item md={6} xs={12}>                    \r\n                    {csv && columnNames && label ? (\r\n                        <div style={{ padding: '10px' }}>\r\n                        {error && (\r\n                            <Alert onClose={() => setError('')} severity=\"error\">\r\n                                {error}\r\n                            </Alert>\r\n                        )}\r\n                        <Formik\r\n                            enableReinitialize\r\n                            initialValues={{\r\n                                vectors: columnNames,\r\n                                label: label,\r\n                                linkage: 0,\r\n                                distance: 0,\r\n                                withLabel: true,\r\n                                withCentroid: false,\r\n                                withDistance: false,\r\n                                balanced: true,\r\n                                space: 5\r\n                            }}\r\n                            validate={values => {\r\n                                const errors = {};\r\n                                if (!values.label) {\r\n                                    errors.label = 'Required';\r\n                                }\r\n                                if (values.linkage < 0 || values.linkage > 2) {\r\n                                    console.log(\"haha\")\r\n                                    errors.linkage = 'Required';\r\n                                }\r\n                                if (values.distance < 0 || values.distance > 2) {\r\n                                    errors.distance = 'Required';\r\n                                }\r\n                                if (values.space !== 3 && values.space !== 5 && values.space !== 7 && values.space !== 9) {\r\n                                    errors.space = 'Invalid value'\r\n                                }\r\n\r\n                                return errors;\r\n                            }}\r\n                            onSubmit={(values, { setSubmitting }) => {\r\n                                const submitFormHandler = async values => {\r\n                                    try {                                        \r\n                                        let params = [...values.vectors, values.label]\r\n                                        params = [...new Set(params)]\r\n                                        params = params.filter((param) => param !== values.label)\r\n                                        let data = await csv.toArray()\r\n                                        let labels = [];\r\n                                        let vectors = [];\r\n                                        for (let i = 0 ; i < data.length ; i++) {\r\n                                            labels[i] = data[i][values.label] ;\r\n                                            vectors[i] = []\r\n                                            params.forEach((param) => {\r\n                                                vectors[i].push(data[i][param])\r\n                                            }) \r\n                                        }\r\n                                        let train = {'labels': labels , 'vectors': vectors}\r\n                                        let root = figue.agglomerate(train['labels'], train['vectors'] , values.distance, values.linkage)\r\n                                        let text = root.buildDendogram(values.space, values.balanced, values.withLabel, values.withCentroid, values.withDistance)\r\n                                        console.log(root)\r\n                                        dendoGram.current.innerText = text\r\n                                        scrollToRef(dendoGram)\r\n                                    } catch (err) {\r\n                                        console.error(err);\r\n                                        setError('Please Recheck your Provided Parameters');\r\n                                    }\r\n                                }\r\n                                submitFormHandler(values);\r\n                                setSubmitting(false)\r\n                            }}\r\n                        >{({\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            handleSubmit,\r\n                            isSubmitting,\r\n                            setFieldValue,\r\n                        }) => (\r\n                                <form className={classes.form} onSubmit={handleSubmit}>\r\n                                    <Grid container spacing={1}>\r\n                                        <Grid item xs={12}>\r\n                                            <Paper style={{ backgroundColor: 'black', padding: '20px' }}>\r\n                                                Select the numerical attributes\r\n                                            </Paper>\r\n                                            <Grid container spacing={1}>\r\n                                                {columnNames.map((column, index) =>\r\n                                                    <Grid item xs={12} key={index}>\r\n                                                        {column !== values.label && (\r\n                                                            <FormControlLabel\r\n                                                                control={<Checkbox\r\n                                                                    checked={values.vectors.includes(column)}\r\n                                                                    color=\"default\"\r\n                                                                    name={column}\r\n                                                                    onChange={(event) => {\r\n                                                                        let array = values.vectors;\r\n                                                                        if (array.includes(event.target.name)) {\r\n                                                                            const newArray = array.filter((col) => col !== event.target.name);\r\n                                                                            setFieldValue('vectors', newArray, false)\r\n                                                                        } else {\r\n                                                                            array.push(event.target.name)\r\n                                                                            setFieldValue('vectors', array, false)\r\n                                                                        }\r\n                                                                    }}\r\n                                                                />}\r\n                                                                label={column}\r\n                                                            />\r\n                                                        )}\r\n                                                    </Grid>\r\n                                                )}\r\n                                            </Grid>\r\n                                        </Grid>\r\n                                        <Grid style={{ padding: '10px' }} item xs={12}>\r\n                                            <hr />\r\n                                        </Grid>\r\n                                        <Grid item xs={12}>\r\n                                            <TextField id=\"select\"\r\n                                                label=\"Label\" select\r\n                                                fullWidth\r\n                                                value={values.label}\r\n                                                name=\"label\"\r\n                                                onChange={handleChange}\r\n                                                variant=\"filled\"\r\n                                            >\r\n                                                {columnNames.map((column, index) =>\r\n                                                    <MenuItem key={index} value={column}>{column}</MenuItem>\r\n                                                )}\r\n                                            </TextField>\r\n                                            <FormHelperText>Select a Label</FormHelperText>\r\n                                        </Grid>\r\n                                        <Grid style={{ padding: '10px' }} item xs={12}>\r\n                                            <hr />\r\n                                        </Grid>\r\n                                        <Grid style={{ marginTop: '10px' }} item xs={6}>\r\n                                            <FormControl component=\"fieldset\">\r\n                                            <FormLabel component=\"legend\">Linkage</FormLabel>\r\n                                            <RadioGroup aria-label=\"linkage\" name=\"linkage\" value={values.linkage} onChange={(event) => {\r\n                                                setFieldValue('linkage', parseInt(event.target.value), false)\r\n                                            }}>\r\n                                                <FormControlLabel value={0} control={<Radio />} label=\"Single-Linkage\" />\r\n                                                <FormControlLabel value={1} control={<Radio />} label=\"Complete-Linkage\" />\r\n                                                <FormControlLabel value={2} control={<Radio />} label=\"Average-Linkage\" />\r\n                                            </RadioGroup>\r\n                                            </FormControl>\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.linkage && touched.linkage && errors.linkage}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid style={{ marginTop: '10px' }} item xs={6}>\r\n                                            <FormControl component=\"fieldset\">\r\n                                            <FormLabel component=\"legend\">Distance</FormLabel>\r\n                                            <RadioGroup aria-label=\"distance\" name=\"distance\" value={values.distance} onChange={(event) => {\r\n                                                setFieldValue('distance', parseInt(event.target.value), false)\r\n                                            }}>\r\n                                                <FormControlLabel value={0} control={<Radio />} label=\"Euclidian\" />\r\n                                                <FormControlLabel value={1} control={<Radio />} label=\"Manhattan\" />\r\n                                                <FormControlLabel value={2} control={<Radio />} label=\"Maximum\" />\r\n                                            </RadioGroup>\r\n                                            </FormControl>\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.distance && touched.distance && errors.distance}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid style={{ padding: '10px' }} item xs={12}>\r\n                                            <hr />\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <FormControlLabel\r\n                                                control={<Checkbox checked={values.withLabel} onChange={handleChange} name=\"withLabel\" />}\r\n                                                label=\"Show Labels\"\r\n                                            />\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <FormControlLabel\r\n                                                control={<Checkbox checked={values.withDistance} onChange={handleChange} name=\"withDistance\" />}\r\n                                                label=\"Show Distance\"\r\n                                            />\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <FormControlLabel\r\n                                                control={<Checkbox checked={values.withCentroid} onChange={handleChange} name=\"withCentroid\" />}\r\n                                                label=\"Show Centroid\"\r\n                                            />\r\n                                        </Grid> \r\n                                        <Grid item xs={6}>\r\n                                            <FormControlLabel\r\n                                                control={<Checkbox checked={values.balanced} onChange={handleChange} name=\"balanced\" />}\r\n                                                label=\"Balance Dendogram\"\r\n                                            />\r\n                                        </Grid>\r\n                                        <Grid item xs={12}>\r\n                                            <TextField id=\"select\"\r\n                                                    style={{ width: '90%' }}\r\n                                                    label=\"Space\" select\r\n                                                    fullWidth\r\n                                                    value={values.space}\r\n                                                    name=\"space\"\r\n                                                    onChange={(event) => {\r\n                                                        setFieldValue('space', parseInt(event.target.value), true)\r\n                                                    }}\r\n                                                    variant=\"filled\"\r\n                                                >\r\n                                                    <MenuItem value={3}>3</MenuItem>\r\n                                                    <MenuItem value={5}>5</MenuItem>\r\n                                                    <MenuItem value={7}>7</MenuItem>\r\n                                                    <MenuItem value={9}>9</MenuItem>\r\n                                                </TextField>\r\n                                                <FormHelperText>Minimum spacing between nodes</FormHelperText>\r\n                                                <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                    {errors.space && touched.space && errors.space}\r\n                                                </div>\r\n                                        </Grid>\r\n                                        \r\n                                    </Grid>\r\n                                    <div style={{ margin: '10px', textAlign: 'center' }}>\r\n                                        <Button\r\n                                            style={{ width: '100%' }}\r\n                                            type=\"submit\"\r\n                                            fullWidth\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            className={classes.submit}\r\n                                            disabled={isSubmitting}\r\n                                        >\r\n                                            CLUSTER DATA AND DISPLAY DENDOGRAM\r\n                                    </Button>\r\n                                    </div>\r\n                                </form>\r\n                            )}\r\n                        </Formik>\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ paddingTop: '50px', textAlign: 'center' }}>\r\n                            Please select a dataset\r\n                        </div>\r\n                    )}\r\n                </Grid>\r\n                {csv && label && (\r\n                    <Paper style={{ width: '100%', margin: '20px', padding: '20px', textAlign: 'center', backgroundColor: '#000000' }}>\r\n                        <Typography variant=\"h4\" gutterBottom>\r\n                            Dendogram\r\n                        </Typography>\r\n                    </Paper>\r\n                )}\r\n                <div className=\"ddg-wrapper\">\r\n                    <pre className=\"ddg\" ref={dendoGram} />\r\n                </div>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HierarchicalClustering;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { Formik } from 'formik';\r\nimport { csvContext } from '../../context/csv-context';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TitleBar from '../../utils/TitleBar';\r\nimport CsvReader from '../../utils/CsvReader';\r\nimport CsvTable from '../../utils/CsvTable';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { kmeans } from '../fcmeans/figue';\r\nimport { ConvertCSVToSingleArray, ConvertClusterIconsToData } from '../../../ML/utils.js';\r\nimport { VisorStop, DrawScatterPlot, GenerateChartForCluster } from '../../linreg/utils';\r\nimport { Link } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        margin: theme.spacing(8, 4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        width: '80%',\r\n    },\r\n    selectEmpty: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    form: {\r\n        width: '90%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: '20px',\r\n    },\r\n    submit: {\r\n        width: '100px',\r\n    },\r\n}));\r\n\r\nasync function PerformKMeans(csv, k, labels, xIdx, yIdx) {\r\n    const data = await ConvertCSVToSingleArray(csv, labels);\r\n    const res = kmeans(k, data/*, epsilon, fuzziness*/)\r\n    console.log(res);\r\n    const clusters = ConvertClusterIconsToData(res.assignments, k, data);\r\n    VisorStop();\r\n    const chart = GenerateChartForCluster(res.centroids, clusters, xIdx, yIdx);\r\n    await DrawScatterPlot(chart);\r\n}\r\nexport default function Kmeans() {\r\n    const classes = useStyles();\r\n    const [error, setError] = useState('')\r\n    const { csv } = useContext(csvContext);\r\n    const [columnNames, setColumnNames] = useState([]);\r\n    const [label, setLabel] = useState();\r\n\r\n    useEffect(() => {\r\n        if (csv == null)\r\n            return;\r\n        async function LoadColumnNames() {\r\n            const columns = await csv.columnNames();\r\n            setColumnNames(columns);\r\n            setLabel(columns[0]);\r\n        }\r\n        LoadColumnNames();\r\n    }, [csv, setColumnNames]);\r\n\r\n    return (\r\n        <div>\r\n            <Grid container>\r\n                <Grid item md={6} xs={12}>\r\n                    <TitleBar name=\"K Means Clustering\" tags={['Clustering', 'K-Means', 'ScatterPlot']} />\r\n                    <p>\r\n                        <Link href={`${process.env.PUBLIC_URL}/Linear Regression.csv`}>Sample CSV</Link>\r\n                    </p>\r\n                    <CsvReader />\r\n                    <CsvTable />\r\n                </Grid>\r\n                <Grid item md={6} xs={12}>\r\n                    {csv && columnNames && label ? (\r\n                        <div style={{ padding: '10px' }}>\r\n                            {error && (\r\n                                <Alert onClose={() => setError('')} severity=\"error\">\r\n                                    {error}\r\n                                </Alert>\r\n                            )}\r\n                            <Formik\r\n                                enableReinitialize\r\n                                initialValues={{\r\n                                    vectors: columnNames,\r\n                                    label: label,\r\n                                    linkage: 0,\r\n                                    k: 3,\r\n                                    distance: 0,\r\n                                    withLabel: true,\r\n                                    withCentroid: false,\r\n                                    withDistance: false,\r\n                                    balanced: true,\r\n                                    space: 5\r\n                                }}\r\n                                validate={values => {\r\n                                    const errors = {};\r\n                                    if (values.linkage < 0 || values.linkage > 2) {\r\n                                        console.log(\"haha\")\r\n                                        errors.linkage = 'Required';\r\n                                    }\r\n                                    if (values.distance < 0 || values.distance > 2) {\r\n                                        errors.distance = 'Required';\r\n                                    }\r\n                                    if (values.space !== 3 && values.space !== 5 && values.space !== 7 && values.space !== 9) {\r\n                                        errors.space = 'Invalid value'\r\n                                    }\r\n\r\n                                    return errors;\r\n                                }}\r\n                                onSubmit={async (values) => {\r\n                                    setError(\"\");\r\n                                    try {\r\n                                        // TODO: KMeans    \r\n                                        const labels = [...(new Set([values.label, ...values.vectors]))];\r\n                                        const k = values.k;\r\n                                        const xIdx = 0;\r\n                                        const yIdx = 1;\r\n                                        await PerformKMeans(csv, k, labels, xIdx, yIdx);\r\n                                    } catch (err) {\r\n                                        console.error(err);\r\n                                        setError('Please Recheck your Provided Parameters');\r\n                                    }\r\n                                }}\r\n                            >{({\r\n                                values,\r\n                                errors,\r\n                                touched,\r\n                                handleChange,\r\n                                handleSubmit,\r\n                                isSubmitting,\r\n                            }) => (\r\n                                    <form className={classes.form} onSubmit={handleSubmit}>\r\n                                        <Grid container spacing={1}>\r\n                                            <Grid item xs={12}>\r\n                                                <TextField id=\"standard-basic\"\r\n                                                    style={{ width: '90%' }}\r\n                                                    label=\"k\"\r\n                                                    fullWidth\r\n                                                    onChange={handleChange}\r\n                                                    value={values.k}\r\n                                                    name=\"k\"\r\n                                                >\r\n                                                </TextField>\r\n                                                <FormHelperText>Minimum spacing between nodes</FormHelperText>\r\n                                                <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                    {errors.space && touched.space && errors.space}\r\n                                                </div>\r\n                                            </Grid>\r\n                                        </Grid>\r\n                                        <div style={{ margin: '10px', textAlign: 'center' }}>\r\n                                            <Button\r\n                                                style={{ width: '100%' }}\r\n                                                type=\"submit\"\r\n                                                fullWidth\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                className={classes.submit}\r\n                                                disabled={isSubmitting}\r\n                                            >\r\n                                                CLUSTER DATA\r\n                                    </Button>\r\n                                        </div>\r\n                                    </form>\r\n                                )}\r\n                            </Formik>\r\n                        </div>\r\n                    ) : (\r\n                            <div style={{ paddingTop: '50px', textAlign: 'center' }}>\r\n                                Please select a dataset\r\n                            </div>\r\n                        )}\r\n                </Grid>\r\n            </Grid>\r\n        </div >\r\n    )\r\n}\r\n","export function drawBubble(ctx, x, y, w, h, radius) {\r\n  let r = x + w;\r\n  let b = y + h;\r\n  ctx.beginPath();\r\n  ctx.strokeStyle=\"black\";\r\n  ctx.lineWidth=\"2\";\r\n  ctx.moveTo(x+radius, y);\r\n  ctx.lineTo(x+radius/2, y-10);\r\n  ctx.lineTo(x+radius * 2, y);\r\n  ctx.lineTo(r-radius, y);\r\n  ctx.quadraticCurveTo(r, y, r, y+radius);\r\n  ctx.lineTo(r, y+h-radius);\r\n  ctx.quadraticCurveTo(r, b, r-radius, b);\r\n  ctx.lineTo(x+radius, b);\r\n  ctx.quadraticCurveTo(x, b, x, b-radius);\r\n  ctx.lineTo(x, y+radius);\r\n  ctx.quadraticCurveTo(x, y, x+radius, y);\r\n  ctx.stroke();\r\n}\r\n\r\nexport function drawRect(ctx, x, y, w, h){\r\n  ctx.beginPath();\r\n  ctx.rect(x,y,w,h);\r\n  ctx.closePath();\r\n  ctx.fill();\r\n  ctx.stroke();\r\n}\r\n\r\nexport function drawCircle(ctx, x, y, r){\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, r, 0, Math.PI*2, true); \r\n  ctx.closePath();\r\n  ctx.stroke();\r\n  ctx.fill();\r\n}\r\n\r\n//uniform distribution integer\r\nexport function randi(s, e) {\r\n  return Math.floor(Math.random()*(e-s) + s);\r\n}\r\n\r\n//uniform distribution\r\nexport function randf(s, e) {\r\n  return Math.random()*(e-s) + s;\r\n}\r\n\r\n//normal distribution random number\r\nexport function randn(mean, letiance) {\r\n  let V1, V2, S;\r\n  do {\r\n    let U1 = Math.random();\r\n    let U2 = Math.random();\r\n    V1 = 2 * U1 - 1;\r\n    V2 = 2 * U2 - 1;\r\n    S = V1 * V1 + V2 * V2;\r\n  } while (S > 1);\r\n  let X = Math.sqrt(-2 * Math.log(S) / S) * V1;\r\n  X = mean + Math.sqrt(letiance) * X;\r\n  return X;\r\n}","import React, { useRef, useContext, useState, useEffect } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from '../utils/CsvReader';\r\nimport CsvTable from '../utils/CsvTable';\r\nimport { Button } from '@material-ui/core';\r\nimport { drawCircle } from './utils';\r\nimport { csvContext } from '../context/csv-context';\r\nimport { ConvertCSVToRawArrays } from '../../ML/utils';\r\nconst svmjs = require(\"./libsvm\");\r\n\r\nconst Overview = () => {\r\n  const NPGcanvas = useRef();\r\n  const { csv } = useContext(csvContext);\r\n  const [labelColumn, setLabelColumn] = useState(\"\");\r\n  const [columnNames, setColumnNames] = useState([]);\r\n  useEffect(() => {\r\n    if (csv == null)\r\n      return;\r\n    console.log(csv);\r\n    async function LoadColumnNames() {\r\n      const columns = await csv.columnNames();\r\n      setColumnNames(columns);\r\n      setLabelColumn(columns[columns.length - 1]);\r\n    }\r\n    LoadColumnNames();\r\n  }, [csv, setColumnNames]);\r\n\r\n  const trainModel = async (csv, labelColumn, columnNames) => {\r\n    let [data, labels] = await ConvertCSVToRawArrays(csv, labelColumn, columnNames);\r\n    labels = labels.map(label => label[0]);\r\n    console.log(labels);\r\n    const svm = new svmjs.SVM();\r\n    let wb = null\r\n    let ss = 50.0\r\n    let trainstats = null\r\n    let dirty = true\r\n    let kernelid = 1\r\n    let rbfKernelSigma = 0.5\r\n    let svmC = 1.0\r\n    const ctx = NPGcanvas.current.getContext('2d');\r\n    let WIDTH = ctx.canvas.width;\r\n    let HEIGHT = ctx.canvas.height;\r\n\r\n    trainstats = svm.train(data, labels, { kernel: 'rbf', rbfsigma: rbfKernelSigma, C: svmC });\r\n    dirty = true;\r\n\r\n    draw(ctx, WIDTH, HEIGHT, svm, data, labels, wb, ss, trainstats, dirty, kernelid, rbfKernelSigma, svmC);\r\n  }\r\n\r\n  const draw = (ctx, WIDTH, HEIGHT, svm, data, labels, wb, ss, trainstats, dirty, kernelid, rbfKernelSigma, svmC) => {\r\n    if (!dirty) return;\r\n\r\n    ctx.clearRect(0, 0, WIDTH, HEIGHT);\r\n\r\n    // draw decisions in the grid\r\n    let density = 4.0;\r\n    for (let x = 0.0; x <= WIDTH; x += density) {\r\n      for (let y = 0.0; y <= HEIGHT; y += density) {\r\n        let dec = svm.marginOne([(x - WIDTH / 2) / ss, (y - HEIGHT / 2) / ss]);\r\n        if (dec > 0) ctx.fillStyle = 'rgb(150,250,150)';\r\n        else ctx.fillStyle = 'rgb(250,150,150)';\r\n        ctx.fillRect(x - density / 2 - 1, y - density - 1, density + 2, density + 2);\r\n      }\r\n    }\r\n\r\n    // draw axes\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = 'rgb(50,50,50)';\r\n    ctx.lineWidth = 1;\r\n    ctx.moveTo(0, HEIGHT / 2);\r\n    ctx.lineTo(WIDTH, HEIGHT / 2);\r\n    ctx.moveTo(WIDTH / 2, 0);\r\n    ctx.lineTo(WIDTH / 2, HEIGHT);\r\n    ctx.stroke();\r\n\r\n    // draw datapoints. Draw support vectors larger\r\n    ctx.strokeStyle = 'rgb(0,0,0)';\r\n    for (let i = 0; i < data.length; i++) {\r\n\r\n      if (labels[i] === 1) ctx.fillStyle = 'rgb(100,200,100)';\r\n      else ctx.fillStyle = 'rgb(200,100,100)';\r\n\r\n      if (svm.alpha[i] > 1e-2) {\r\n        ctx.lineWidth = 3\r\n      }  // distinguish support vectors\r\n      else {\r\n        ctx.lineWidth = 1\r\n      }\r\n      drawCircle(ctx, data[i][0] * ss + WIDTH / 2, data[i][1] * ss + HEIGHT / 2, Math.floor(3 + svm.alpha[i] * 5.0 / svmC));\r\n    }\r\n\r\n    // if linear kernel, draw decision boundary and margin lines\r\n    if (kernelid === 0) {\r\n\r\n      let xs = [-5, 5];\r\n      let ys = [0, 0];\r\n      ys[0] = (-wb.b - wb.w[0] * xs[0]) / wb.w[1];\r\n      ys[1] = (-wb.b - wb.w[0] * xs[1]) / wb.w[1];\r\n      ctx.fillStyle = 'rgb(0,0,0)';\r\n      ctx.lineWidth = 1;\r\n      ctx.beginPath();\r\n      // wx+b=0 line\r\n      ctx.moveTo(xs[0] * ss + WIDTH / 2, ys[0] * ss + HEIGHT / 2);\r\n      ctx.lineTo(xs[1] * ss + WIDTH / 2, ys[1] * ss + HEIGHT / 2);\r\n      // wx+b=1 line\r\n      ctx.moveTo(xs[0] * ss + WIDTH / 2, (ys[0] - 1.0 / wb.w[1]) * ss + HEIGHT / 2);\r\n      ctx.lineTo(xs[1] * ss + WIDTH / 2, (ys[1] - 1.0 / wb.w[1]) * ss + HEIGHT / 2);\r\n      // wx+b=-1 line\r\n      ctx.moveTo(xs[0] * ss + WIDTH / 2, (ys[0] + 1.0 / wb.w[1]) * ss + HEIGHT / 2);\r\n      ctx.lineTo(xs[1] * ss + WIDTH / 2, (ys[1] + 1.0 / wb.w[1]) * ss + HEIGHT / 2);\r\n      ctx.stroke();\r\n\r\n      // draw margin lines for support vectors. The sum of the lengths of these\r\n      // lines, scaled by C is essentially the total hinge loss.\r\n      for (let i = 0; i < data.length; i++) {\r\n        if (svm.alpha[i] < 1e-2) continue;\r\n        if (labels[i] === 1) {\r\n          ys[0] = (1 - wb.b - wb.w[0] * xs[0]) / wb.w[1];\r\n          ys[1] = (1 - wb.b - wb.w[0] * xs[1]) / wb.w[1];\r\n        } else {\r\n          ys[0] = (-1 - wb.b - wb.w[0] * xs[0]) / wb.w[1];\r\n          ys[1] = (-1 - wb.b - wb.w[0] * xs[1]) / wb.w[1];\r\n        }\r\n        let u = (data[i][0] - xs[0]) * (xs[1] - xs[0]) + (data[i][1] - ys[0]) * (ys[1] - ys[0]);\r\n        u = u / ((xs[0] - xs[1]) * (xs[0] - xs[1]) + (ys[0] - ys[1]) * (ys[0] - ys[1]));\r\n        let xi = xs[0] + u * (xs[1] - xs[0]);\r\n        let yi = ys[0] + u * (ys[1] - ys[0]);\r\n        ctx.moveTo(data[i][0] * ss + WIDTH / 2, data[i][1] * ss + HEIGHT / 2);\r\n        ctx.lineTo(xi * ss + WIDTH / 2, yi * ss + HEIGHT / 2);\r\n      }\r\n      ctx.stroke();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Grid container>\r\n        <Grid item md={6} xs={12}>\r\n          <CsvReader />\r\n          <CsvTable />\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <div>\r\n            SVM\r\n           </div>\r\n          <Button variant=\"contained\" color=\"primary\" onClick={async () => await trainModel(csv, labelColumn, columnNames)}>Train</Button>\r\n          <div>\r\n            <canvas width=\"500\" height=\"500\" ref={NPGcanvas} />\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Overview;","const defaultOptions = {\r\n  rootNode: 'body',\r\n  width: 500,\r\n  height: 300,\r\n  padding: 50,\r\n  backgroundColor: '#1d1e22',\r\n  circleRadius: 5,\r\n  circleFill: 'grey',\r\n  circleStroke: 'white'\r\n};\r\nconst defaultType = 'None';\r\n\r\nconst defaultTypes = {\r\n  A: 'A',\r\n  B: 'B',\r\n  None: 'None'\r\n};\r\n\r\nconst defaultK = 3;\r\n\r\nexport {\r\n  defaultOptions,\r\n  defaultType,\r\n  defaultTypes,\r\n  defaultK\r\n};\r\n","import { defaultType, defaultOptions } from './defaults';\r\n\r\nexport default class Circle {\r\n  constructor(cx,\r\n              cy,\r\n              radius = defaultOptions.circleRadius,\r\n              fill = defaultOptions.circleFill,\r\n              stroke = defaultOptions.circleStroke,\r\n              type = defaultType\r\n  ) {\r\n    this.cx = cx;\r\n    this.cy = cy;\r\n    this.radius = radius;\r\n    this.fill = fill;\r\n    this.stroke = stroke;\r\n    this.type = type;\r\n    this.distance = null;\r\n    this.cssClass = null;\r\n  }\r\n  setType(type) {\r\n    this.type = type;\r\n  }\r\n  setDistance(distance) {\r\n    this.distance = distance;\r\n  }\r\n  setCssClass(value) {\r\n    this.cssClass = value;\r\n  }\r\n}\r\n","import * as d3 from 'd3';\r\nimport Circle from './circle';\r\nimport { defaultOptions, defaultType } from './defaults';\r\n\r\nexport default class Visualization {\r\n  constructor(data, options, types = [defaultType]) {\r\n    this.options = Object.assign({}, defaultOptions, options);\r\n    this.xScale = this.createXScale(data);\r\n    this.yScale = this.createYScale(data);\r\n    if (this.isValidTypes(types)) {\r\n      this.types = types;\r\n    } else {\r\n      this.types = [defaultType];\r\n    }\r\n    this.typeColorMap = this.mapTypesToColors(this.types);\r\n    if (this.isValidData(data)) {\r\n      this.data = data.map(d => this.mapDataToCircle(d));\r\n    }\r\n    this.svgId = 'd3ml-' + Date.now();\r\n    this.svg = this.appendSVG();\r\n    this.clickable = true;\r\n  }\r\n  isValidData(data) {\r\n    let result = false;\r\n    if (!!data && Array.isArray(data)) {\r\n      result = data.reduce((res, val) => {\r\n        return Object.entries(val).reduce((result, entry) => {\r\n          const key = entry[0];\r\n          const val = entry[1];\r\n          let res = false;\r\n          if (this.isValidCoordinate(key, val) || this.isValidType(key, val)) {\r\n            res = result && true;\r\n          } else {\r\n            if (!this.isValidType(key, val)) {\r\n              const msg = `Invalid data specified: ${key} with value ${val}. ` +\r\n                'Accepted data keys are x and y. Values must be numeric.';\r\n              throw Error(msg);\r\n            } else if (!this.isValidCoordinate(key, val)) {\r\n              throw Error(`Invalid type specified: ${key}: ${val}`);\r\n            }\r\n          }\r\n\r\n          return res;\r\n        }, true);\r\n      }, true);\r\n    }\r\n\r\n    return result;\r\n  }\r\n  isValidCoordinate(key, val) {\r\n    return ['x', 'y'].includes(key) &&\r\n      typeof val === 'number' &&\r\n      val !== Infinity &&\r\n      val !== -Infinity;\r\n  }\r\n  isValidType(key, val) {\r\n    return key === 'type' && this.types.includes(val);\r\n  }\r\n  isValidTypes(types) {\r\n    let result = false;\r\n    if (!!types && Array.isArray(types) && types.length > 0) {\r\n      result = types.reduce((res, type) => {\r\n        return res && !!type;\r\n      }, true);\r\n    }\r\n\r\n    return result;\r\n  }\r\n  mapTypesToColors(types) {\r\n    const colorScale = d3.scaleOrdinal(d3.schemeSet1);\r\n\r\n    const colorMap = types.reduce((map, type) => {\r\n      map[type] = colorScale(type);\r\n\r\n      return map;\r\n    }, {});\r\n    colorMap[defaultType] = colorScale(defaultType);\r\n\r\n    return colorMap;\r\n  }\r\n  getFillColor(data) {\r\n    return !!data && data.type && this.typeColorMap.hasOwnProperty(data.type) ?\r\n      this.typeColorMap[data.type] : this.options.circleFill;\r\n  }\r\n  mapDataToCircle(data) {\r\n    const fillColor = this.getFillColor(data);\r\n\r\n    return new Circle(\r\n      this.xScale(data.x),\r\n      this.yScale(data.y),\r\n      this.options.circleRadius,\r\n      fillColor,\r\n      this.options.circleStroke,\r\n      data.type);\r\n  }\r\n  onClickSvg(targetId, callbacks) {\r\n    document.querySelector(`#${this.svgId}`).addEventListener('click', (e) => {\r\n      this.clickCallback(e, targetId, callbacks);\r\n    });\r\n  }\r\n  clickCallback(e, targetId, callbacks) {\r\n    if (this.isValidEventTarget(e.target, targetId) && this.clickable) {\r\n      const newCircle = this.mapDataToCircle({x: this.xScale.invert(e.offsetX), y: this.yScale.invert(e.offsetY)});\r\n      callbacks.forEach(callback => {\r\n        callback.call(this, newCircle);\r\n      });\r\n    }\r\n  }\r\n  onChangeInput(inputId, inputType, callbacks) {\r\n    document.querySelector(`#${inputId}`).addEventListener('change', (e) => {\r\n      this.inputChangeCallback(e, inputId, inputType, callbacks);\r\n    });\r\n  }\r\n  isValidEventTarget(target, targetId) {\r\n    return !!target && target.id === targetId;\r\n  }\r\n  inputChangeCallback(e, inputId, type, callbacks) {\r\n    if (this.isValidEventTarget(e.target, inputId)) {\r\n      const value = type === 'checkbox' ? e.target.checked : e.target.value;\r\n      callbacks.forEach(callback => {\r\n        callback.call(this, value);\r\n      });\r\n    }\r\n  }\r\n  setClickable(clickable) {\r\n    this.clickable = clickable;\r\n  }\r\n  createElement(elementName, attributes = []) {\r\n    const el = document.createElement(elementName);\r\n    attributes.forEach(attr => {\r\n      el.setAttribute(attr[0], attr[1]);\r\n    });\r\n\r\n    return el;\r\n  }\r\n  createSettingsGroup(childElements) {\r\n    const settingsGroup = this.createElement('div', [['class', 'settings__group']]);\r\n    childElements.forEach(child => {\r\n      settingsGroup.append(child);\r\n    });\r\n\r\n    return settingsGroup;\r\n  }\r\n  createLabeledInput(labelText, labelAttributes, inputValue, inputAttributes) {\r\n    const span = this.createElement('span');\r\n    span.innerHTML = inputValue;\r\n\r\n    const inputLabel = this.createElement('label', labelAttributes);\r\n    inputLabel.textContent = labelText;\r\n\r\n    const input = this.createElement('input', [...inputAttributes, ['value', inputValue]]);\r\n    inputLabel.appendChild(span);\r\n\r\n    return {label: inputLabel, input};\r\n  }\r\n  addCircle(circle) {\r\n    this.data.push(circle);\r\n  }\r\n  appendSVG() {\r\n    return d3.select(this.options.rootNode)\r\n      .append('svg')\r\n      .attr('id', this.svgId)\r\n      .attr('width', this.options.width)\r\n      .attr('height', this.options.height)\r\n      .style('background-color', this.options.backgroundColor);\r\n  }\r\n  createXScale(data) {\r\n    return d3.scaleLinear()\r\n      .domain([\r\n        d3.min(data, function (d) { return d.x; }) - this.options.padding,\r\n        d3.max(data, function (d) { return d.x; }) + this.options.padding\r\n      ])\r\n      .range([0, this.options.width]);\r\n  }\r\n  createYScale(data) {\r\n    return d3.scaleLinear()\r\n      .domain([\r\n        d3.min(data, function (d) { return d.y; }) - this.options.padding,\r\n        d3.max(data, function (d) { return d.y; }) + this.options.padding\r\n      ])\r\n      .range([0, this.options.height]);\r\n  }\r\n  drawCircles() {\r\n    this.svg.selectAll('circle')\r\n      .data(this.data)\r\n      .enter().append('circle')\r\n      .style('stroke', function (d) { return d.stroke; })\r\n      .style('fill', function (d) { return d.fill; })\r\n      .attr('r', function (d) { return d.radius; })\r\n      .attr('cx', function (d) { return d.cx; })\r\n      .attr('cy', function (d) { return d.cy; })\r\n      .attr('class', function (d) { return d.cssClass ? d.cssClass : ''; });\r\n  }\r\n  draw() {\r\n    this.drawCircles();\r\n  }\r\n}\r\n","import MachineLearningAlgorithm from './machine-learning-algorithm';\r\nimport {defaultK} from '../visualization/defaults';\r\n\r\nexport default class KNN extends MachineLearningAlgorithm {\r\n  constructor(circles, types, k = defaultK, weighted = false) {\r\n    super(circles);\r\n    this.k = k;\r\n    this.types = types;\r\n    this.kClosestNeighbors = null;\r\n    this.weighted = weighted;\r\n  }\r\n  calculateDistance(a, b) {\r\n    return Math.sqrt(Math.pow((b.cx - a.cx), 2) + Math.pow((b.cy - a.cy), 2));\r\n  }\r\n  compareDistance(a, b) {\r\n    if (a.distance > b.distance) {\r\n      return 1;\r\n    } else if (a.distance < b.distance) {\r\n      return -1;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n  findKClosestNeighbors(newCircle, neighbors) {\r\n    return neighbors.filter(n => n !== newCircle)\r\n      .map(n => {\r\n        n.setDistance(this.calculateDistance(n, newCircle));\r\n\r\n        return n;\r\n      })\r\n      .sort((a, b) => this.compareDistance(a, b))\r\n      .filter((n, i) => i < this.k);\r\n\r\n  }\r\n  getCircleTypeWeighted(kClosestNeighbors) { // todo: test\r\n    const typeDistance = this.types.reduce((res, type) => {\r\n      res[type] = 0;\r\n\r\n      return res;\r\n    }, {max: {type: null, val: 0}});\r\n    const res = kClosestNeighbors.reduce((res, neighbor) => {\r\n      const inverseDistance = res[neighbor.type] + 1 / neighbor.distance;\r\n      if (inverseDistance > res.max.val) {\r\n        res.max.type = neighbor.type;\r\n        res.max.val = inverseDistance;\r\n      }\r\n      res[neighbor.type] = inverseDistance;\r\n\r\n      return res;\r\n    }, typeDistance);\r\n\r\n    return res.max.type;\r\n  }\r\n  getCircleTypeUnweighted(kClosestNeighbors) { // todo: test\r\n    const counts = {};\r\n    kClosestNeighbors.map(n => n.type)\r\n      .forEach(type => {\r\n        counts[type] = counts[type] ? counts[type] + 1 : 1;\r\n      });\r\n\r\n    return Object.entries(counts).sort((a, b) => a[1] < b[1])[0][0];\r\n  }\r\n  determineCircleType(kClosestNeighbors) {\r\n    return this.weighted ?\r\n      this.getCircleTypeWeighted(kClosestNeighbors) : this.getCircleTypeUnweighted(kClosestNeighbors);\r\n  }\r\n  classify(circle, neighbors) {\r\n    this.kClosestNeighbors = this.findKClosestNeighbors(circle, neighbors);\r\n\r\n    return this.determineCircleType(this.kClosestNeighbors);\r\n  }\r\n}\r\n","export default class MachineLearningAlgorithm {\r\n  constructor(circles) {\r\n    this.circles = circles;\r\n  }\r\n}\r\n","import Circle from './circle';\r\nimport {defaultK, defaultType} from './defaults';\r\nimport Visualization from './visualization';\r\nimport KNN from '../algorithms/knn';\r\n\r\nexport default class KNNVisualization extends Visualization {\r\n  constructor(data, options, types, k = defaultK) {\r\n    super(data, options, types);\r\n    this.knn = new KNN(this.data, types, k);\r\n    this.onClickSvg(this.svgId, [this.svgClickCallback])\r\n  }\r\n  svgClickCallback(circle) {\r\n    this.setClickable(false);\r\n\r\n    const classifiedCircle = this.getClassifiedCircle(circle);\r\n    this.addCircle(classifiedCircle);\r\n    const boundingCircle = this.getBoundingCircle(classifiedCircle);\r\n    this.addCircle(boundingCircle);\r\n\r\n    this.drawCircles();\r\n    this.drawConnectingLines(this.mapClosestNeighborsToConnectingLines(classifiedCircle));\r\n\r\n    this.data = this.data.filter(c => c !== boundingCircle);\r\n    this.removeElementsAfterTransition('.remove');\r\n  }\r\n  getClassifiedCircle(circle) {\r\n    const circleType = this.knn.classify(circle, this.data);\r\n    circle.setType(circleType);\r\n\r\n    return circle;\r\n  }\r\n  getBoundingCircle(circle) {\r\n    const furthestNeighbor = this.knn.kClosestNeighbors[this.knn.k - 1];\r\n    const radius = furthestNeighbor.distance + this.options.circleRadius;\r\n    const boundingCircle = new Circle(circle.cx, circle.cy, radius, 'transparent', 'white');\r\n    boundingCircle.setCssClass('remove');\r\n\r\n    return boundingCircle;\r\n  }\r\n  mapClosestNeighborsToConnectingLines(circle) {\r\n    return this.knn.kClosestNeighbors.map(n => {\r\n      return {\r\n        x1: n.cx,\r\n        x2: circle.cx,\r\n        y1: n.cy,\r\n        y2: circle.cy,\r\n        strokeWidth: 2,\r\n        stroke: 'rgba(230,230,230,0.5)'\r\n      };\r\n    });\r\n  }\r\n  drawConnectingLines(connectingLines) {\r\n    this.svg.selectAll('line')\r\n      .data(connectingLines)\r\n      .enter().append('line')\r\n      .style('stroke', function (d) { return d.stroke; })\r\n      .attr('stroke-width', function (d) { return d.strokeWidth; })\r\n      .attr('x1', function (d) { return d.x1; })\r\n      .attr('y1', function (d) { return d.y1; })\r\n      .attr('x2', function (d) { return d.x2; })\r\n      .attr('y2', function (d) { return d.y2; })\r\n      .attr('class', 'remove');\r\n  }\r\n  drawCircles() {\r\n    super.drawCircles();\r\n    const colorMap = this.typeColorMap;\r\n    this.svg.selectAll('circle')\r\n      .transition().duration(1500)\r\n      .style('fill', function (d) {\r\n        const typeColor = colorMap[d.type];\r\n\r\n        return d.type === defaultType || d.fill === typeColor ? d.fill : typeColor;\r\n      });\r\n  }\r\n  removeElementsAfterTransition(selector) {\r\n    const that = this;\r\n    this.svg.selectAll(selector)\r\n      .transition()\r\n      .duration(2000)\r\n      .style('stroke', 'transparent')\r\n      .style('fill', 'transparent')\r\n      .on('end', function () {\r\n        that.removeElements(selector);\r\n        that.setClickable(true);\r\n      });\r\n  }\r\n  removeElements(selector) {\r\n    this.svg.selectAll(selector).remove();\r\n  }\r\n};\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport {KNNVisualization} from './d3knn';\r\nimport TitleBar from '../utils/TitleBar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Slider from '@material-ui/core/Slider';\r\n\r\nconst KNN = () => {\r\n    const [params, setParams] = useState({\r\n        displayWidth: Math.min(350, window.innerWidth - 10),\r\n        displayHeight: 450,\r\n        types: ['A', 'B'],\r\n        dataSetSize: 250,\r\n        k: 10,\r\n    })\r\n\r\n    const knn = useRef();\r\n\r\n    const [data, setData] = useState(null)\r\n    useEffect(() => {\r\n        function getRandomInt(min, max) {\r\n            return Math.floor(Math.random() * (max - min + 1)) + min;\r\n          }\r\n          function createRandomEllipsoidCoordinates(width, height, cx, cy) {\r\n            const rho = Math.sqrt(Math.random());\r\n            const phi = Math.random() * Math.PI * 2;\r\n            const rands = {\r\n              x: getRandomInt(-width / 2, width / 2),\r\n              y: getRandomInt(-height / 2, height / 2)\r\n            };\r\n            const x = (rho * Math.cos(phi) * width) / 2 + cx + rands.x;\r\n            const y = (rho * Math.sin(phi) * height) / 2 + cy + rands.y;\r\n            return { x, y };\r\n        }\r\n\r\n        function createRandomData(displayWidth, displayHeight, dataSetSize, types) {\r\n            const ellipsoidOptions = {\r\n                A: {\r\n                    width: displayWidth / 3,\r\n                    height: displayWidth / 3,\r\n                    cx: displayWidth / 3,\r\n                    cy: displayHeight / 3\r\n                },\r\n                B: {\r\n                    width: displayWidth / 2.5,\r\n                    height: displayWidth / 2.5,\r\n                    cx: displayWidth * 0.663,\r\n                    cy: displayHeight * 0.66\r\n                }\r\n            };\r\n            return Array.apply(null, Array(dataSetSize)).map((d) => {\r\n                const type = Math.random() > 0.5 ? types[0] : types[1];\r\n                const { width, height, cx, cy } = ellipsoidOptions[type];\r\n                const { x, y } = createRandomEllipsoidCoordinates(width, height, cx, cy);\r\n                return { x, y, type };\r\n            });\r\n        }\r\n        const options = {\r\n            rootNode: '#knn',\r\n            width: params.displayWidth,\r\n            height: params.displayHeight,\r\n            backgroundColor: 'black',\r\n            circleFill: '#3fe4h2',\r\n            circleStroke: 'white' \r\n        };\r\n        knn.current.innerHTML = null;\r\n        let vis\r\n        if (!data) {\r\n            let dataset = createRandomData(params.displayWidth, params.displayHeight, params.dataSetSize, params.types);\r\n            setData(dataset)\r\n            vis = new KNNVisualization(dataset, options, params.types, params.k);\r\n        } else {\r\n            vis = new KNNVisualization(data, options, params.types, params.k);\r\n        }\r\n        vis.draw();\r\n    }, [params, data])\r\n\r\n\r\n    useEffect(() => {\r\n        function getRandomInt(min, max) {\r\n            return Math.floor(Math.random() * (max - min + 1)) + min;\r\n          }\r\n          function createRandomEllipsoidCoordinates(width, height, cx, cy) {\r\n            const rho = Math.sqrt(Math.random());\r\n            const phi = Math.random() * Math.PI * 2;\r\n            const rands = {\r\n              x: getRandomInt(-width / 2, width / 2),\r\n              y: getRandomInt(-height / 2, height / 2)\r\n            };\r\n            const x = (rho * Math.cos(phi) * width) / 2 + cx + rands.x;\r\n            const y = (rho * Math.sin(phi) * height) / 2 + cy + rands.y;\r\n            return { x, y };\r\n        }\r\n\r\n        function createRandomData(displayWidth, displayHeight, dataSetSize, types) {\r\n            const ellipsoidOptions = {\r\n                A: {\r\n                    width: displayWidth / 3,\r\n                    height: displayWidth / 3,\r\n                    cx: displayWidth / 3,\r\n                    cy: displayHeight / 3\r\n                },\r\n                B: {\r\n                    width: displayWidth / 2.5,\r\n                    height: displayWidth / 2.5,\r\n                    cx: displayWidth * 0.663,\r\n                    cy: displayHeight * 0.66\r\n                }\r\n            };\r\n            return Array.apply(null, Array(dataSetSize)).map((d) => {\r\n                const type = Math.random() > 0.5 ? types[0] : types[1];\r\n                const { width, height, cx, cy } = ellipsoidOptions[type];\r\n                const { x, y } = createRandomEllipsoidCoordinates(width, height, cx, cy);\r\n                return { x, y, type };\r\n            });\r\n        }\r\n        let dataset = createRandomData(params.displayWidth, params.displayHeight, params.dataSetSize, params.types);\r\n        setData(dataset)\r\n    }, [params.displayWidth, params.displayHeight, params.dataSetSize, params.types])\r\n\r\n    const options = {\r\n        filterType: \"dropdown\",\r\n        responsive: \"scroll\"\r\n    };\r\n\r\n    function valuetext(value) {\r\n        return `${value}`;\r\n    }\r\n\r\n    return (\r\n        <div style={{ paddingBottom: '30px' }}>\r\n            <Grid container>\r\n                <Grid item md={6} xs={12}>\r\n                    <TitleBar name=\"K Nearest Neighbours\" tags={['Nearest Neighbours', 'ScatterPlot']} />\r\n                    <div className=\"csv-table\">\r\n                    {data ? (\r\n                        <MUIDataTable\r\n                            title={\"Data Table\"}\r\n                            data={data}\r\n                            columns={['x', 'y', 'type']}\r\n                            options={options}\r\n                        />\r\n                    ) : (\r\n                        <div style={{ textAlign: 'center' }}>\r\n                            <h3>No Data Found</h3>\r\n                        </div>\r\n                    )}\r\n                    </div>\r\n                </Grid>\r\n                <Grid item md={6} xs={12}>\r\n                    <div style={{ margin: '20px' }}>\r\n                        <Grid container>\r\n                            <Grid item xs={12}>\r\n                                <Typography id=\"discrete-slider\" gutterBottom>\r\n                                    Dataset Size &nbsp;\r\n                                    <span style={{ color: '#1692f7', fontWeight: '500', fontSize: '18px' }}>\r\n                                        {params.dataSetSize}\r\n                                    </span>\r\n                                    &nbsp;rows\r\n                                </Typography>\r\n                                <Slider \r\n                                    style={{ color: '#1692f7', width: '90%' }} \r\n                                    value={params.dataSetSize}\r\n                                    aria-labelledby=\"discrete-slider\"\r\n                                    valueLabelDisplay=\"auto\"\r\n                                    step={50}\r\n                                    marks\r\n                                    min={10}\r\n                                    max={1000} \r\n                                    getAriaValueText={valuetext}\r\n                                    onChange={(event, newValue) => {\r\n                                        setParams({\r\n                                            ...params,\r\n                                            dataSetSize: newValue\r\n                                        })\r\n                                    }}\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <Typography id=\"continuous-slider\" gutterBottom>\r\n                                    Number of Neighbours (K) &nbsp;\r\n                                    <span style={{ color: 'red', fontWeight: '500', fontSize: '18px' }}>\r\n                                        {params.k}\r\n                                    </span>\r\n                                </Typography>\r\n                                <Slider \r\n                                    style={{ color: 'red', width: '90%' }} \r\n                                    value={params.k}\r\n                                    aria-labelledby=\"continuous-slider\"\r\n                                    valueLabelDisplay=\"auto\"\r\n                                    step={25}\r\n                                    marks\r\n                                    min={10}\r\n                                    max={params.dataSetSize} \r\n                                    getAriaValueText={valuetext}\r\n                                    onChange={(event, newValue) => {\r\n                                        setParams({\r\n                                            ...params,\r\n                                            k: newValue\r\n                                        })\r\n                                    }}\r\n                                />\r\n                            </Grid>\r\n                        </Grid>\r\n                    </div>\r\n                    <div style={{ textAlign: 'center' }}>\r\n                        <div id=\"knn\" ref={knn}></div>\r\n                    </div>\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default KNN;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { csvContext } from '../context/csv-context';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CsvReader from '../utils/CsvReader';\r\nimport CsvTable from '../utils/CsvTable';\r\nimport TitleBar from '../utils/TitleBar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport { Button } from '@material-ui/core';\r\nimport { VisorStop, DrawBarChart } from '../linreg/utils';\r\nimport { ConvertCSVToSingleArray } from '../../ML/utils';\r\nconst { PCA } = require('ml-pca');\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        '& > *': {\r\n            margin: theme.spacing(1),\r\n            width: '25ch',\r\n        },\r\n    },\r\n    button: {\r\n        margin: theme.spacing(1),\r\n        width: '100%',\r\n    },\r\n    descDiv: {\r\n        marginTop: '20px',\r\n        background: '#505050',\r\n        width: '100%',\r\n        padding: '15px',\r\n        fontSize: '14px',\r\n    },\r\n}));\r\n\r\nconst PCAnalysis = () => {\r\n    const classes = useStyles();\r\n    const { csv } = useContext(csvContext);\r\n    const [columns, setColumns] = useState([]);\r\n    const [threshold, setThreshold] = useState(0.5)\r\n    const [pcaColumns, setPcaColumns] = useState([]);\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (csv) {\r\n            async function Fetch() {\r\n                let cols = await csv.columnNames()\r\n                setColumns(cols);\r\n                setPcaColumns([]);\r\n            }\r\n            Fetch();\r\n        }\r\n    }, [csv])\r\n\r\n    const toggleColumn = (event) => {\r\n        if (event.target.checked) {\r\n            let array = [event.target.name]\r\n            setPcaColumns([...pcaColumns, ...array])\r\n        } else {\r\n            let newArray = pcaColumns.filter((col) => col !== event.target.name);\r\n            setPcaColumns([...newArray])\r\n        }\r\n    }\r\n\r\n    function valuetext(value) {\r\n        return `${value}`;\r\n    }\r\n\r\n    const trainPca = async () => {\r\n        if (pcaColumns && pcaColumns.length > 0) {\r\n            try {\r\n                // accepts the dataset and threshold and the output is total letiance of all features in order = arr1[] \"or\" the outputs which are above the threshold given = arr2[]\r\n\r\n                const data = await ConvertCSVToSingleArray(csv, pcaColumns);\r\n                // dataset is a two-dimensional array where rows represent the samples and columns the features\r\n                const pca = new PCA(data);\r\n                const arr1 = pca.getExplainedVariance();\r\n\r\n                VisorStop();\r\n                console.log(arr1);\r\n                await DrawBarChart(\"PCA\", \"PCA\", arr1)\r\n                console.log('The total variance is ' + arr1);\r\n            } catch (err) {\r\n                console.log(err)\r\n                setError('Please select only numerical Attributes')\r\n            }\r\n        } else {\r\n            setError('Please provide proper parameters')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Grid container>\r\n                <Grid item md={6} xs={12}>\r\n                    <TitleBar name=\"Principal Component Analysis\" tags={['Classification', 'Analysis', 'Variance']} />\r\n                    <CsvReader />\r\n                    <CsvTable />\r\n                </Grid>\r\n                <Grid item md={6} xs={12}>\r\n                    <div style={{ padding: '10px' }}>\r\n                        {error && (\r\n                            <Alert style={{ margin: '10px' }} onClose={() => setError('')} severity=\"error\">\r\n                                {error}\r\n                            </Alert>\r\n                        )}\r\n                        {csv ? (\r\n                            <Grid container>\r\n                                <Grid item xs={12}>\r\n                                    <Alert style={{ color: 'rgb(255, 213, 153)', background: 'rgb(25, 15, 0)' }} severity=\"warning\">\r\n                                        Please choose only numerical Attributes!\r\n                                    </Alert>\r\n                                    <Paper className={classes.descDiv}>\r\n                                        Select the Attributes for Analysis\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={12}>\r\n                                    {columns.map((column, index) =>\r\n                                        <FormControlLabel\r\n                                            key={index}\r\n                                            control={<Checkbox\r\n                                                checked={pcaColumns.includes(column)}\r\n                                                color=\"default\"\r\n                                                name={column}\r\n                                                onChange={toggleColumn}\r\n                                            />}\r\n                                            label={column}\r\n                                        />\r\n                                    )}\r\n                                </Grid>\r\n                                <Grid style={{ textAlign: 'center' }} item xs={12}>\r\n                                    <Paper className={classes.descDiv}>\r\n                                        Select Threshold\r\n                                    </Paper>\r\n                                    <Typography style={{ marginTop: '5px' }} id=\"range-slider\" gutterBottom>\r\n                                        <span style={{ color: '#1692f7', fontWeight: '500', fontSize: '18px' }}>\r\n                                            {threshold}\r\n                                        </span>\r\n                                    </Typography>\r\n                                    <Slider\r\n                                        style={{ color: '#1692f7', width: '90%' }}\r\n                                        value={threshold}\r\n                                        aria-labelledby=\"range-slider\"\r\n                                        valueLabelDisplay=\"auto\"\r\n                                        marks\r\n                                        min={0.1}\r\n                                        max={1.0}\r\n                                        step={0.01}\r\n                                        getAriaValueText={valuetext}\r\n                                        onChange={(event, newValue) => {\r\n                                            setThreshold(newValue)\r\n                                        }}\r\n                                    />\r\n                                </Grid>\r\n                                <Grid style={{ textAlign: 'center' }} item xs={12}>\r\n                                    <Button variant=\"contained\" color=\"primary\" style={{ width: '90%' }} onClick={trainPca}>Train</Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        ) : (\r\n                                <div style={{ paddingTop: '50px', textAlign: 'center' }}>\r\n                                    Please select a dataset\r\n                                </div>\r\n                            )}\r\n                    </div>\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PCAnalysis;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { Formik } from 'formik';\r\nimport { csvContext } from '../../context/csv-context';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TitleBar from '../../utils/TitleBar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from '../../utils/CsvReader';\r\nimport CsvTable from '../../utils/CsvTable';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Slider from '@material-ui/core/Slider';\r\n\r\nimport { fcmeans } from './figue.js';\r\nimport { FindArgMax, ConvertCSVToSingleArray, ConvertClusterIconsToData } from '../../../ML/utils';\r\nimport { VisorStop, DrawScatterPlot, GenerateChartForCluster } from '../../linreg/utils';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        margin: theme.spacing(8, 4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        width: '80%',\r\n    },\r\n    selectEmpty: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    form: {\r\n        width: '90%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: '20px',\r\n    },\r\n    submit: {\r\n        width: '100px',\r\n    },\r\n}));\r\n\r\nasync function PerformFCMeans(csv, k, epsilon, fuzziness, labels, xIdx, yIdx) {\r\n    const data = await ConvertCSVToSingleArray(csv, labels);\r\n    const res = fcmeans(k, data, epsilon, fuzziness)\r\n    const assignedClusters = await FindArgMax(res.membershipMatrix.mtx);\r\n    const clusters = ConvertClusterIconsToData(assignedClusters, k, data);\r\n    VisorStop();\r\n    const chart = GenerateChartForCluster(res.centroids, clusters, xIdx, yIdx);\r\n    await DrawScatterPlot(chart);\r\n}\r\nexport default function FCMeans() {\r\n    const classes = useStyles();\r\n    const [error, setError] = useState('')\r\n    const { csv } = useContext(csvContext);\r\n    const [columnNames, setColumnNames] = useState([]);\r\n    const [label, setLabel] = useState();\r\n\r\n    useEffect(() => {\r\n        if (csv == null)\r\n            return;\r\n        async function LoadColumnNames() {\r\n            const columns = await csv.columnNames();\r\n            setColumnNames(columns);\r\n            setLabel(columns[0]);\r\n        }\r\n        LoadColumnNames();\r\n    }, [csv, setColumnNames]);\r\n\r\n    function valuetext(value) {\r\n        return `${value}`;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Grid container>\r\n                <Grid item md={6} xs={12}>\r\n                    <TitleBar name=\"Fuzzy C-Means\" tags={['Clustering', 'C-Means', 'Matrix']} />\r\n                    <p>\r\n                        <Link href={`${process.env.PUBLIC_URL}/Linear Regression.csv`}>Sample CSV</Link>\r\n                    </p>\r\n                    <CsvReader />\r\n                    <CsvTable />\r\n                </Grid>\r\n                <Grid item md={6} xs={12}>\r\n                    {csv && columnNames && label ? (\r\n                        <div style={{ padding: '10px' }}>\r\n                            {error && (\r\n                                <Alert onClose={() => setError('')} severity=\"error\">\r\n                                    {error}\r\n                                </Alert>\r\n                            )}\r\n                            <Formik\r\n                                enableReinitialize\r\n                                initialValues={{\r\n                                    vectors: columnNames,\r\n                                    k: 4,\r\n                                    epsilon: 0.3,\r\n                                    fuzziness: 2\r\n                                }}\r\n                                validate={values => {\r\n                                    const errors = {};\r\n                                    if (!values.epsilon) {\r\n                                        errors.epsilon = 'Required';\r\n                                    }\r\n                                    if (!values.fuzziness) {\r\n                                        errors.fuzziness = 'Required';\r\n                                    }\r\n                                    if (values.k < 2 && values.k > 9) {\r\n                                        errors.k = 'Invalid number of clusters'\r\n                                    }\r\n                                    return errors;\r\n                                }}\r\n                                onSubmit={async (values) => {\r\n                                    console.log(values);\r\n                                    setError(\"\");\r\n                                    try {\r\n                                        const labels = [...(new Set([...values.vectors]))];\r\n                                        const xIdx = 0;\r\n                                        const yIdx = 1;\r\n                                        await PerformFCMeans(csv, values.k, values.epsilon, values.fuzziness, labels, xIdx, yIdx);\r\n                                    } catch (err) {\r\n                                        console.error(err);\r\n                                        setError('Please Recheck your Provided Parameters');\r\n                                    }\r\n                                }}\r\n                            >{({\r\n                                values,\r\n                                errors,\r\n                                touched,\r\n                                handleChange,\r\n                                handleBlur,\r\n                                handleSubmit,\r\n                                isSubmitting,\r\n                                setFieldValue,\r\n                            }) => (\r\n                                    <form className={classes.form} onSubmit={handleSubmit}>\r\n                                        <Grid container spacing={1}>\r\n                                            <Grid item xs={12}>\r\n                                                <Paper style={{ backgroundColor: 'black', padding: '20px' }}>\r\n                                                    Select the numerical attributes\r\n                                                </Paper>\r\n                                                {columnNames.map((column, index) =>\r\n                                                    <FormControlLabel\r\n                                                        key={index}\r\n                                                        control={<Checkbox\r\n                                                            checked={values.vectors.includes(column)}\r\n                                                            color=\"default\"\r\n                                                            name={column}\r\n                                                            onChange={(event) => {\r\n                                                                let array = values.vectors;\r\n                                                                if (array.includes(event.target.name)) {\r\n                                                                    const newArray = array.filter((col) => col !== event.target.name);\r\n                                                                    setFieldValue('vectors', newArray, false)\r\n                                                                } else {\r\n                                                                    array.push(event.target.name)\r\n                                                                    setFieldValue('vectors', array, false)\r\n                                                                }\r\n                                                            }}\r\n                                                        />}\r\n                                                        label={column}\r\n                                                    />\r\n                                                )}\r\n                                            </Grid>\r\n                                            <Grid style={{ marginTop: '10px' }} item xs={12}>\r\n                                                <TextField id=\"select\"\r\n                                                    style={{ width: '90%' }}\r\n                                                    label=\"Number of clusters\" select\r\n                                                    fullWidth\r\n                                                    value={values.k}\r\n                                                    name=\"k\"\r\n                                                    onChange={(event) => {\r\n                                                        setFieldValue('k', parseInt(event.target.value), true)\r\n                                                    }}\r\n                                                    variant=\"filled\"\r\n                                                >\r\n                                                    <MenuItem value={2}>2</MenuItem>\r\n                                                    <MenuItem value={3}>3</MenuItem>\r\n                                                    <MenuItem value={4}>4</MenuItem>\r\n                                                    <MenuItem value={5}>5</MenuItem>\r\n                                                    <MenuItem value={6}>6</MenuItem>\r\n                                                    <MenuItem value={7}>7</MenuItem>\r\n                                                    <MenuItem value={8}>8</MenuItem>\r\n                                                    <MenuItem value={9}>9</MenuItem>\r\n                                                </TextField>\r\n                                                <FormHelperText>Total number of clusters for FCMeans</FormHelperText>\r\n                                                <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                    {errors.k && touched.k && errors.k}\r\n                                                </div>\r\n                                            </Grid>\r\n                                            <Grid item xs={12}>\r\n                                                <Typography style={{ marginTop: '5px' }} id=\"epsilon-slider\" gutterBottom>\r\n                                                    Epsilon\r\n                                                    <span style={{ color: '#1692f7', marginLeft: '10px', fontWeight: '500', fontSize: '18px' }}>\r\n                                                        {values.epsilon}\r\n                                                    </span>\r\n                                                </Typography>\r\n                                                <Slider\r\n                                                    style={{ color: '#1692f7', width: '90%' }}\r\n                                                    value={values.epsilon}\r\n                                                    aria-labelledby=\"epsilon-slider\"\r\n                                                    valueLabelDisplay=\"auto\"\r\n                                                    marks\r\n                                                    min={0.1}\r\n                                                    max={0.9}\r\n                                                    step={0.1}\r\n                                                    getAriaValueText={valuetext}\r\n                                                    onChange={(event, newValue) => {\r\n                                                        setFieldValue('epsilon', parseFloat(newValue), false)\r\n                                                    }}\r\n                                                />\r\n                                                <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                    {errors.epsilon && touched.epsilon && errors.epsilon}\r\n                                                </div>\r\n                                            </Grid>\r\n                                            <Grid item xs={12}>\r\n                                                <Typography style={{ marginTop: '5px' }} id=\"fuzziness-slider\" gutterBottom>\r\n                                                    Fuzziness\r\n                                                    <span style={{ color: 'red', marginLeft: '10px', fontWeight: '500', fontSize: '18px' }}>\r\n                                                        {values.fuzziness}\r\n                                                    </span>\r\n                                                </Typography>\r\n                                                <Slider\r\n                                                    style={{ color: 'red', width: '90%' }}\r\n                                                    value={values.fuzziness}\r\n                                                    aria-labelledby=\"fuzziness-slider\"\r\n                                                    valueLabelDisplay=\"auto\"\r\n                                                    marks\r\n                                                    min={2}\r\n                                                    max={100}\r\n                                                    step={1}\r\n                                                    getAriaValueText={valuetext}\r\n                                                    onChange={(event, newValue) => {\r\n                                                        setFieldValue('fuzziness', parseInt(newValue), false)\r\n                                                    }}\r\n                                                />\r\n                                                <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                    {errors.fuzziness && touched.fuzziness && errors.fuzziness}\r\n                                                </div>\r\n                                            </Grid>\r\n                                        </Grid>\r\n                                        <div style={{ margin: '10px', textAlign: 'center' }}>\r\n                                            <Button\r\n                                                style={{ width: '100%' }}\r\n                                                type=\"submit\"\r\n                                                fullWidth\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                className={classes.submit}\r\n                                            // disabled={isSubmitting}\r\n                                            >\r\n                                                CLUSTER DATA\r\n                                    </Button>\r\n                                        </div>\r\n                                    </form>\r\n                                )}\r\n                            </Formik>\r\n                        </div>\r\n                    ) : (\r\n                            <div style={{ paddingTop: '50px', textAlign: 'center' }}>\r\n                                Please select a dataset\r\n                            </div>\r\n                        )}\r\n                </Grid>\r\n                {csv && label && (\r\n                    <Paper style={{ width: '100%', margin: '20px', padding: '20px', textAlign: 'center', backgroundColor: '#000000' }}>\r\n                        <Typography variant=\"h4\" gutterBottom>\r\n                            Dendogram\r\n                        </Typography>\r\n                    </Paper>\r\n                )}\r\n            </Grid>\r\n        </div >\r\n    )\r\n}\r\n","import React, { useState, useCallback } from 'react';\r\nimport { \r\n  HashRouter as Router, \r\n  Route, \r\n  Redirect, \r\n  Switch \r\n} from 'react-router-dom';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport customTheme from './components/theme/theme.json';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\nimport { csvContext } from './components/context/csv-context';\r\nimport Header from './components/utils/Header';\r\nimport Dashboard from './components/utils/Dashboard';\r\nimport Overview from './components/utils/Overview';\r\nimport LinearRegression from './components/linreg/LinearRegression';\r\nimport DecisionTree from './components/decisiontree/DecisionTree';\r\nimport HierarchicalClustering from './components/clustering/HC/HierarchicalClustering';\r\nimport Kmeans from './components/clustering/kmeans/Kmeans';\r\nimport Svm from './components/svm/Svm';\r\nimport KNN from './components/knn/KNN';\r\nimport PCAnalysis from './components/pca/PCAnalysis';\r\nimport FCMeans from './components/clustering/fcmeans/FCMeans';\r\n\r\n\r\nconst theme = createMuiTheme(customTheme);\r\n\r\nconst App = () => {\r\n  const [csv, setCsv] = useState();\r\n\r\n  const fetchCsv = useCallback((csv) => {\r\n    setCsv(csv);\r\n  }, []);\r\n\r\n  let routes = (\r\n      <Switch>\r\n        <Route path=\"/\" exact>\r\n            <Dashboard />\r\n        </Route>\r\n        <Route path=\"/overview\" exact>\r\n            <Overview />\r\n        </Route>\r\n        <Route path=\"/linreg\" exact>\r\n          <LinearRegression/>\r\n        </Route>\r\n        <Route path=\"/decision-tree\" exact>\r\n          <DecisionTree />\r\n        </Route>\r\n        <Route path=\"/hcluster\" exact>\r\n          <HierarchicalClustering />\r\n        </Route>\r\n        <Route path=\"/kmeans\" exact>\r\n          <Kmeans />\r\n        </Route>\r\n        <Route path=\"/fcmeans\" exact>\r\n          <FCMeans />\r\n        </Route>\r\n        <Route path=\"/svm\" exact>\r\n          <Svm />\r\n        </Route>\r\n        <Route path=\"/knn\" exact>\r\n          <KNN />\r\n        </Route>\r\n        <Route path=\"/pca\" exact>\r\n          <PCAnalysis />\r\n        </Route>\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    )\r\n\r\n  return (\r\n      <ThemeProvider theme={theme}>\r\n        <csvContext.Provider\r\n          value={{\r\n            csv: csv,\r\n            fetchCsv: fetchCsv\r\n          }}\r\n        >\r\n          <Router>\r\n            <Header>\r\n              {routes}\r\n            </Header>\r\n          </Router>\r\n        </csvContext.Provider>\r\n      </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\nserviceWorker.register()"],"sourceRoot":""}